/*! For license information please see index.js.LICENSE.txt */
(()=>{var t,e={2891:(t,e,n)=>{"use strict";n.d(e,{lg:()=>Z,xI:()=>ut});class r{constructor(t,e,n){this.eventTarget=t,this.eventName=e,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){const e=function(t){if("immediatePropagationStopped"in t)return t;{const{stopImmediatePropagation:e}=t;return Object.assign(t,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}(t);for(const t of this.bindings){if(e.immediatePropagationStopped)break;t.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort(((t,e)=>{const n=t.index,r=e.index;return n<r?-1:n>r?1:0}))}}class o{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((t=>t.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((t=>t.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((t,e)=>t.concat(Array.from(e.values()))),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,n={}){this.application.handleError(t,`Error ${e}`,n)}clearEventListenersForBinding(t){const e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){const{eventTarget:e,eventName:n,eventOptions:r}=t,o=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(n,r);o.delete(i),0==o.size&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){const{eventTarget:e,eventName:n,eventOptions:r}=t;return this.fetchEventListener(e,n,r)}fetchEventListener(t,e,n){const r=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(e,n);let i=r.get(o);return i||(i=this.createEventListener(t,e,n),r.set(o,i)),i}createEventListener(t,e,n){const o=new r(t,e,n);return this.started&&o.connect(),o}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){const n=[t];return Object.keys(e).sort().forEach((t=>{n.push(`${e[t]?"":"!"}${t}`)})),n.join(":")}}const i={stop:({event:t,value:e})=>(e&&t.stopPropagation(),!0),prevent:({event:t,value:e})=>(e&&t.preventDefault(),!0),self:({event:t,value:e,element:n})=>!e||n===t.target},s=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function a(t){return"window"==t?window:"document"==t?document:void 0}function c(t){return t.replace(/(?:[_-])([a-z0-9])/g,((t,e)=>e.toUpperCase()))}function u(t){return c(t.replace(/--/g,"-").replace(/__/g,"_"))}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){return t.replace(/([A-Z])/g,((t,e)=>`-${e.toLowerCase()}`))}function f(t){return null!=t}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const p=["meta","ctrl","alt","shift"];class m{constructor(t,e,n,r){this.element=t,this.index=e,this.eventTarget=n.eventTarget||t,this.eventName=n.eventName||function(t){const e=t.tagName.toLowerCase();if(e in v)return v[e](t)}(t)||y("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||y("missing identifier"),this.methodName=n.methodName||y("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=r}static forToken(t,e){return new this(t.element,t.index,function(t){const e=t.trim().match(s)||[];let n=e[2],r=e[3];return r&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${r}`,r=""),{eventTarget:a(e[4]),eventName:n,eventOptions:e[7]?(o=e[7],o.split(":").reduce(((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)})),{})):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||r};var o}(t.content),e)}toString(){const t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;const e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;const n=e.filter((t=>!p.includes(t)))[0];return!!n&&(d(this.keyMappings,n)||y(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==t.key.toLowerCase())}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;const e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){const t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:n,value:r}of Array.from(this.element.attributes)){const o=n.match(e),i=o&&o[1];i&&(t[c(i)]=b(r))}return t}get eventTargetName(){return(t=this.eventTarget)==window?"window":t==document?"document":void 0;var t}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){const[n,r,o,i]=p.map((t=>e.includes(t)));return t.metaKey!==n||t.ctrlKey!==r||t.altKey!==o||t.shiftKey!==i}}const v={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:t=>"submit"==t.getAttribute("type")?"click":"input",select:()=>"change",textarea:()=>"input"};function y(t){throw new Error(t)}function b(t){try{return JSON.parse(t)}catch(e){return t}}class g{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){const e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){const t=this.controller[this.methodName];if("function"==typeof t)return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){const{element:e}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:r}=this.context;let o=!0;for(const[i,s]of Object.entries(this.eventOptions))if(i in n){const a=n[i];o=o&&a({name:i,value:s,event:t,element:e,controller:r})}return o}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){const{target:e,currentTarget:n}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:n,action:this.methodName})}catch(e){const{identifier:n,controller:r,element:o,index:i}=this,s={identifier:n,controller:r,element:o,index:i,event:t};this.context.handleError(e,`invoking action "${this.action}"`,s)}}willBeInvokedByEvent(t){const e=t.target;return!(t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t))&&(!(t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t))&&(this.element===e||(e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element))))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class w{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver((t=>this.processMutations(t)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const t=new Set(this.matchElementsInTree());for(const e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(const e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){"attributes"==t.type?this.processAttributeChange(t.target,t.attributeName):"childList"==t.type&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.processTree(t,this.removeElement)}}processAddedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.elementIsActive(t)&&this.processTree(t,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(const n of this.matchElementsInTree(t))e.call(this,n)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected==this.element.isConnected&&this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}}class E{constructor(t,e,n){this.attributeName=e,this.delegate=n,this.elementObserver=new w(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){const e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector));return e.concat(n)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}}function S(t,e,n){k(t,e).add(n)}function O(t,e,n){k(t,e).delete(n),function(t,e){const n=t.get(e);null!=n&&0==n.size&&t.delete(e)}(t,e)}function k(t,e){let n=t.get(e);return n||(n=new Set,t.set(e,n)),n}class T{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((t,e)=>t.concat(Array.from(e))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((t,e)=>t+e.size),0)}add(t,e){S(this.valuesByKey,t,e)}delete(t,e){O(this.valuesByKey,t,e)}has(t,e){const n=this.valuesByKey.get(t);return null!=n&&n.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some((e=>e.has(t)))}getValuesForKey(t){const e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter((([e,n])=>n.has(t))).map((([t,e])=>t))}}class x{constructor(t,e,n,r){this._selector=e,this.details=r,this.elementObserver=new w(t,this),this.delegate=n,this.matchesByElement=new T}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){const{selector:e}=this;if(e){const n=t.matches(e);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(t,this.details):n}return!1}matchElementsInTree(t){const{selector:e}=this;if(e){const n=this.matchElement(t)?[t]:[],r=Array.from(t.querySelectorAll(e)).filter((t=>this.matchElement(t)));return n.concat(r)}return[]}elementMatched(t){const{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){const e=this.matchesByElement.getKeysForValue(t);for(const n of e)this.selectorUnmatched(t,n)}elementAttributeChanged(t,e){const{selector:n}=this;if(n){const e=this.matchElement(t),r=this.matchesByElement.has(n,t);e&&!r?this.selectorMatched(t,n):!e&&r&&this.selectorUnmatched(t,n)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}}class L{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((t=>this.processMutations(t)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){const e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){const n=this.delegate.getStringMapKeyForAttribute(t);if(null!=n){this.stringMap.has(t)||this.stringMapKeyAdded(n,t);const r=this.element.getAttribute(t);if(this.stringMap.get(t)!=r&&this.stringMapValueChanged(r,n,e),null==r){const e=this.stringMap.get(t);this.stringMap.delete(t),e&&this.stringMapKeyRemoved(n,t,e)}else this.stringMap.set(t,r)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,n)}stringMapKeyRemoved(t,e,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((t=>t.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class P{constructor(t,e,n){this.attributeObserver=new E(t,e,this),this.delegate=n,this.tokensByElement=new T}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){const[e,n]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(n)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach((t=>this.tokenMatched(t)))}tokensUnmatched(t){t.forEach((t=>this.tokenUnmatched(t)))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){const e=this.tokensByElement.getValuesForKey(t),n=this.readTokensForElement(t),r=function(t,e){const n=Math.max(t.length,e.length);return Array.from({length:n},((n,r)=>[t[r],e[r]]))}(e,n).findIndex((([t,e])=>{return r=e,!((n=t)&&r&&n.index==r.index&&n.content==r.content);var n,r}));return-1==r?[[],[]]:[e.slice(r),n.slice(r)]}readTokensForElement(t){const e=this.attributeName;return function(t,e,n){return t.trim().split(/\s+/).filter((t=>t.length)).map(((t,r)=>({element:e,attributeName:n,content:t,index:r})))}(t.getAttribute(e)||"",t,e)}}class A{constructor(t,e,n){this.tokenListObserver=new P(t,e,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){const{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).set(t,n),this.delegate.elementMatchedValue(e,n))}tokenUnmatched(t){const{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,n))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(t){return{error:t}}}}class C{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new A(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){const e=new g(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){const e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach((t=>this.delegate.bindingDisconnected(t,!0))),this.bindingsByAction.clear()}parseValueForToken(t){const e=m.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}}class _{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new L(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){const n=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,n.writer(this.receiver[t]),n.writer(n.defaultValue))}stringMapValueChanged(t,e,n){const r=this.valueDescriptorNameMap[e];null!==t&&(null===n&&(n=r.writer(r.defaultValue)),this.invokeChangedCallback(e,t,n))}stringMapKeyRemoved(t,e,n){const r=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,r.writer(this.receiver[t]),n):this.invokeChangedCallback(t,r.writer(r.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:t,name:e,defaultValue:n,writer:r}of this.valueDescriptors)null==n||this.controller.data.has(t)||this.invokeChangedCallback(e,r(n),void 0)}invokeChangedCallback(t,e,n){const r=`${t}Changed`,o=this.receiver[r];if("function"==typeof o){const r=this.valueDescriptorNameMap[t];try{const t=r.reader(e);let i=n;n&&(i=r.reader(n)),o.call(this.receiver,t,i)}catch(t){throw t instanceof TypeError&&(t.message=`Stimulus Value "${this.context.identifier}.${r.name}" - ${t.message}`),t}}}get valueDescriptors(){const{valueDescriptorMap:t}=this;return Object.keys(t).map((e=>t[e]))}get valueDescriptorNameMap(){const t={};return Object.keys(this.valueDescriptorMap).forEach((e=>{const n=this.valueDescriptorMap[e];t[n.name]=n})),t}hasValue(t){const e=`has${l(this.valueDescriptorNameMap[t].name)}`;return this.receiver[e]}}class j{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new T}start(){this.tokenListObserver||(this.tokenListObserver=new P(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var n;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetConnected(t,e))))}disconnectTarget(t,e){var n;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetDisconnected(t,e))))}disconnectAllTargets(){for(const t of this.targetsByName.keys)for(const e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function R(t,e){const n=N(t);return Array.from(n.reduce(((t,n)=>(function(t,e){const n=t[e];return Array.isArray(n)?n:[]}(n,e).forEach((e=>t.add(e))),t)),new Set))}function M(t,e){return N(t).reduce(((t,n)=>(t.push(...function(t,e){const n=t[e];return n?Object.keys(n).map((t=>[t,n[t]])):[]}(n,e)),t)),[])}function N(t){const e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}class I{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new T,this.outletElementsByName=new T,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach((t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)})),this.started=!0,this.dependentContexts.forEach((t=>t.refresh())))}refresh(){this.selectorObserverMap.forEach((t=>t.refresh())),this.attributeObserverMap.forEach((t=>t.refresh()))}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach((t=>t.stop())),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach((t=>t.stop())),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:n}){const r=this.getOutlet(t,n);r&&this.connectOutlet(r,t,n)}selectorUnmatched(t,e,{outletName:n}){const r=this.getOutletFromMap(t,n);r&&this.disconnectOutlet(r,t,n)}selectorMatchElement(t,{outletName:e}){const n=this.selector(e),r=this.hasOutlet(t,e),o=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return!!n&&(r&&o&&t.matches(n))}elementMatchedAttribute(t,e){const n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(t,e){const n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(t,e){const n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(t,e,n){var r;this.outletElementsByName.has(n,e)||(this.outletsByName.add(n,t),this.outletElementsByName.add(n,e),null===(r=this.selectorObserverMap.get(n))||void 0===r||r.pause((()=>this.delegate.outletConnected(t,e,n))))}disconnectOutlet(t,e,n){var r;this.outletElementsByName.has(n,e)&&(this.outletsByName.delete(n,t),this.outletElementsByName.delete(n,e),null===(r=this.selectorObserverMap.get(n))||void 0===r||r.pause((()=>this.delegate.outletDisconnected(t,e,n))))}disconnectAllOutlets(){for(const t of this.outletElementsByName.keys)for(const e of this.outletElementsByName.getValuesForKey(t))for(const n of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(n,e,t)}updateSelectorObserverForOutlet(t){const e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){const e=this.selector(t),n=new x(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,n),n.start()}setupAttributeObserverForOutlet(t){const e=this.attributeNameForOutletName(t),n=new E(this.scope.element,e,this);this.attributeObserverMap.set(t,n),n.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find((e=>this.attributeNameForOutletName(e)===t))}get outletDependencies(){const t=new T;return this.router.modules.forEach((e=>{R(e.definition.controllerConstructor,"outlets").forEach((n=>t.add(n,e.identifier)))})),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const t=this.dependentControllerIdentifiers;return this.router.contexts.filter((e=>t.includes(e.identifier)))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find((e=>e.element===t))}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class F{constructor(t,e){this.logDebugActivity=(t,e={})=>{const{identifier:n,controller:r,element:o}=this;e=Object.assign({identifier:n,controller:r,element:o},e),this.application.logDebugActivity(this.identifier,t,e)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new C(this,this.dispatcher),this.valueObserver=new _(this,this.controller),this.targetObserver=new j(this,this),this.outletObserver=new I(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(t){this.handleError(t,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,n={}){const{identifier:r,controller:o,element:i}=this;n=Object.assign({identifier:r,controller:o,element:i},n),this.application.handleError(t,`Error ${e}`,n)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,n){this.invokeControllerMethod(`${u(n)}OutletConnected`,t,e)}outletDisconnected(t,e,n){this.invokeControllerMethod(`${u(n)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){const n=this.controller;"function"==typeof n[t]&&n[t](...e)}}function D(t){return function(t,e){const n=H(t),r=function(t,e){return B(e).reduce(((n,r)=>{const o=function(t,e,n){const r=Object.getOwnPropertyDescriptor(t,n);if(!r||!("value"in r)){const t=Object.getOwnPropertyDescriptor(e,n).value;return r&&(t.get=r.get||t.get,t.set=r.set||t.set),t}}(t,e,r);return o&&Object.assign(n,{[r]:o}),n}),{})}(t.prototype,e);return Object.defineProperties(n.prototype,r),n}(t,function(t){const e=R(t,"blessings");return e.reduce(((e,n)=>{const r=n(t);for(const t in r){const n=e[t]||{};e[t]=Object.assign(n,r[t])}return e}),{})}(t))}const B="function"==typeof Object.getOwnPropertySymbols?t=>[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)]:Object.getOwnPropertyNames,H=(()=>{function t(t){function e(){return Reflect.construct(t,arguments,new.target)}return e.prototype=Object.create(t.prototype,{constructor:{value:e}}),Reflect.setPrototypeOf(e,t),e}try{return function(){const e=t((function(){this.a.call(this)}));e.prototype.a=function(){},new e}(),t}catch(t){return t=>class extends t{}}})();class q{constructor(t,e){this.application=t,this.definition=function(t){return{identifier:t.identifier,controllerConstructor:D(t.controllerConstructor)}}(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){const e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){const e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new F(this,t),this.contextsByScope.set(t,e)),e}}class U{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){const e=this.data.get(this.getDataKey(t))||"";return e.match(/[^\s]+/g)||[]}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}}class V{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){const e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){const n=this.getAttributeNameForKey(t);return this.element.setAttribute(n,e),this.get(t)}has(t){const e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){const e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${h(t)}`}}class W{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,n){let r=this.warnedKeysByObject.get(t);r||(r=new Set,this.warnedKeysByObject.set(t,r)),r.has(e)||(r.add(e),this.logger.warn(n,t))}}function $(t,e){return`[${t}~="${e}"]`}class z{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return null!=this.find(t)}find(...t){return t.reduce(((t,e)=>t||this.findTarget(e)||this.findLegacyTarget(e)),void 0)}findAll(...t){return t.reduce(((t,e)=>[...t,...this.findAllTargets(e),...this.findAllLegacyTargets(e)]),[])}findTarget(t){const e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){const e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){return $(this.schema.targetAttributeForScope(this.identifier),t)}findLegacyTarget(t){const e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){const e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map((e=>this.deprecate(e,t)))}getLegacySelectorForTargetName(t){const e=`${this.identifier}.${t}`;return $(this.schema.targetAttribute,e)}deprecate(t,e){if(t){const{identifier:n}=this,r=this.schema.targetAttribute,o=this.schema.targetAttributeForScope(n);this.guide.warn(t,`target:${e}`,`Please replace ${r}="${n}.${e}" with ${o}="${e}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}}class K{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return null!=this.find(t)}find(...t){return t.reduce(((t,e)=>t||this.findOutlet(e)),void 0)}findAll(...t){return t.reduce(((t,e)=>[...t,...this.findAllOutlets(e)]),[])}getSelectorForOutletName(t){const e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){const e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){const e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter((n=>this.matchesElement(n,t,e)))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter((n=>this.matchesElement(n,t,e)))}matchesElement(t,e,n){const r=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&r.split(" ").includes(n)}}class G{constructor(t,e,n,r){this.targets=new z(this),this.classes=new U(this),this.data=new V(this),this.containsElement=t=>t.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=n,this.guide=new W(r),this.outlets=new K(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return $(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new G(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class J{constructor(t,e,n){this.element=t,this.schema=e,this.delegate=n,this.valueListObserver=new A(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){const{element:e,content:n}=t;return this.parseValueForElementAndIdentifier(e,n)}parseValueForElementAndIdentifier(t,e){const n=this.fetchScopesByIdentifierForElement(t);let r=n.get(e);return r||(r=this.delegate.createScopeForElementAndIdentifier(t,e),n.set(e,r)),r}elementMatchedValue(t,e){const n=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,n),1==n&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){const n=this.scopeReferenceCounts.get(e);n&&(this.scopeReferenceCounts.set(e,n-1),1==n&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}}class X{constructor(t){this.application=t,this.scopeObserver=new J(this.element,this.schema,this),this.scopesByIdentifier=new T,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((t,e)=>t.concat(e.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);const e=new q(this.application,t);this.connectModule(e);const n=t.controllerConstructor.afterLoad;n&&n.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){const e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){const n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find((e=>e.element==t))}proposeToConnectScopeForElementAndIdentifier(t,e){const n=this.scopeObserver.parseValueForElementAndIdentifier(t,e);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,n){this.application.handleError(t,e,n)}createScopeForElementAndIdentifier(t,e){return new G(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t);this.scopesByIdentifier.getValuesForKey(t.identifier).forEach((e=>t.connectContextForScope(e)))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier);this.scopesByIdentifier.getValuesForKey(t.identifier).forEach((e=>t.disconnectContextForScope(e)))}}const Y={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:t=>`data-${t}-target`,outletAttributeForScope:(t,e)=>`data-${t}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Q("abcdefghijklmnopqrstuvwxyz".split("").map((t=>[t,t])))),Q("0123456789".split("").map((t=>[t,t]))))};function Q(t){return t.reduce(((t,[e,n])=>Object.assign(Object.assign({},t),{[e]:n})),{})}class Z{constructor(t=document.documentElement,e=Y){this.logger=console,this.debug=!1,this.logDebugActivity=(t,e,n={})=>{this.debug&&this.logFormattedMessage(t,e,n)},this.element=t,this.schema=e,this.dispatcher=new o(this),this.router=new X(this),this.actionDescriptorFilters=Object.assign({},i)}static start(t,e){const n=new this(t,e);return n.start(),n}async start(){await new Promise((t=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>t())):t()})),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach((t=>{t.controllerConstructor.shouldLoad&&this.router.loadDefinition(t)}))}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach((t=>this.router.unloadIdentifier(t)))}get controllers(){return this.router.contexts.map((t=>t.controller))}getControllerForElementAndIdentifier(t,e){const n=this.router.getContextForElementAndIdentifier(t,e);return n?n.controller:null}handleError(t,e,n){var r;this.logger.error("%s\n\n%o\n\n%o",e,t,n),null===(r=window.onerror)||void 0===r||r.call(window,e,"",0,0,t)}logFormattedMessage(t,e,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}function tt(t,e,n){return t.application.getControllerForElementAndIdentifier(e,n)}function et(t,e,n){let r=tt(t,e,n);return r||(t.application.router.proposeToConnectScopeForElementAndIdentifier(e,n),r=tt(t,e,n),r||void 0)}function nt([t,e],n){return function(t){const{token:e,typeDefinition:n}=t,r=`${h(e)}-value`,o=function(t){const{controller:e,token:n,typeDefinition:r}=t,o={controller:e,token:n,typeObject:r},i=function(t){const{controller:e,token:n,typeObject:r}=t,o=f(r.type),i=f(r.default),s=o&&i,a=o&&!i,c=!o&&i,u=rt(r.type),l=ot(t.typeObject.default);if(a)return u;if(c)return l;if(u!==l){throw new Error(`The specified default value for the Stimulus Value "${e?`${e}.${n}`:n}" must match the defined type "${u}". The provided default value of "${r.default}" is of type "${l}".`)}if(s)return u}(o),s=ot(r),a=rt(r),c=i||s||a;if(c)return c;const u=e?`${e}.${r}`:n;throw new Error(`Unknown value type "${u}" for "${n}" value`)}(t);return{type:o,key:r,name:c(r),get defaultValue(){return function(t){const e=rt(t);if(e)return it[e];const n=d(t,"default"),r=d(t,"type"),o=t;if(n)return o.default;if(r){const{type:t}=o,e=rt(t);if(e)return it[e]}return t}(n)},get hasCustomDefaultValue(){return void 0!==ot(n)},reader:st[o],writer:at[o]||at.default}}({controller:n,token:t,typeDefinition:e})}function rt(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function ot(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(t)?"array":"[object Object]"===Object.prototype.toString.call(t)?"object":void 0}const it={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},st={array(t){const e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${t}" of type "${ot(e)}"`);return e},boolean:t=>!("0"==t||"false"==String(t).toLowerCase()),number:t=>Number(t.replace(/_/g,"")),object(t){const e=JSON.parse(t);if(null===e||"object"!=typeof e||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${t}" of type "${ot(e)}"`);return e},string:t=>t},at={default:function(t){return`${t}`},array:ct,object:ct};function ct(t){return JSON.stringify(t)}class ut{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:n={},prefix:r=this.identifier,bubbles:o=!0,cancelable:i=!0}={}){const s=new CustomEvent(r?`${r}:${t}`:t,{detail:n,bubbles:o,cancelable:i});return e.dispatchEvent(s),s}}ut.blessings=[function(t){return R(t,"classes").reduce(((t,e)=>{return Object.assign(t,(n=e,{[`${n}Class`]:{get(){const{classes:t}=this;if(t.has(n))return t.get(n);{const e=t.getAttributeName(n);throw new Error(`Missing attribute "${e}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${l(n)}Class`]:{get(){return this.classes.has(n)}}}));var n}),{})},function(t){return R(t,"targets").reduce(((t,e)=>{return Object.assign(t,(n=e,{[`${n}Target`]:{get(){const t=this.targets.find(n);if(t)return t;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${l(n)}Target`]:{get(){return this.targets.has(n)}}}));var n}),{})},function(t){const e=M(t,"values"),n={valueDescriptorMap:{get(){return e.reduce(((t,e)=>{const n=nt(e,this.identifier),r=this.data.getAttributeNameForKey(n.key);return Object.assign(t,{[r]:n})}),{})}}};return e.reduce(((t,e)=>Object.assign(t,function(t,e){const n=nt(t,e),{key:r,name:o,reader:i,writer:s}=n;return{[o]:{get(){const t=this.data.get(r);return null!==t?i(t):n.defaultValue},set(t){void 0===t?this.data.delete(r):this.data.set(r,s(t))}},[`has${l(o)}`]:{get(){return this.data.has(r)||n.hasCustomDefaultValue}}}}(e))),n)},function(t){return R(t,"outlets").reduce(((t,e)=>Object.assign(t,function(t){const e=u(t);return{[`${e}Outlet`]:{get(){const e=this.outlets.find(t),n=this.outlets.getSelectorForOutletName(t);if(e){const n=et(this,e,t);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}Outlets`]:{get(){const e=this.outlets.findAll(t);return e.length>0?e.map((e=>{const n=et(this,e,t);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`,e)})).filter((t=>t)):[]}},[`${e}OutletElement`]:{get(){const e=this.outlets.find(t),n=this.outlets.getSelectorForOutletName(t);if(e)return e;throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(t)}},[`has${l(e)}Outlet`]:{get(){return this.outlets.has(t)}}}}(e))),{})}],ut.targets=[],ut.outlets=[],ut.values={}},89:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FrameElement:()=>h,FrameLoadingStyle:()=>i,FrameRenderer:()=>Y,PageRenderer:()=>bt,PageSnapshot:()=>nt,StreamActions:()=>kt,StreamElement:()=>Ut,StreamSourceElement:()=>Vt,cache:()=>xt,clearCache:()=>Mt,connectStreamSource:()=>_t,disconnectStreamSource:()=>jt,navigator:()=>Lt,registerAdapter:()=>At,renderStreamMessage:()=>Rt,session:()=>Tt,setConfirmMethod:()=>It,setFormMode:()=>Ft,setProgressBarDelay:()=>Nt,start:()=>Pt,visit:()=>Ct}),function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const t=HTMLElement,e=function(){return Reflect.construct(t,[],this.constructor)};window.HTMLElement=e,HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}(),function(t){function e(t,e,n){throw new t("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+e+".",n)}"function"!=typeof t.requestSubmit&&(t.requestSubmit=function(t){t?(!function(t,n){t instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==t.type||e(TypeError,"The specified element is not a submit button"),t.form==n||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}(t,this),t.click()):((t=document.createElement("input")).type="submit",t.hidden=!0,this.appendChild(t),t.click(),this.removeChild(t))})}(HTMLFormElement.prototype);const r=new WeakMap;function o(t){const e=function(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null,n=e?e.closest("input, button"):null;return"submit"==(null==n?void 0:n.type)?n:null}(t.target);e&&e.form&&r.set(e.form,e)}var i,s,a,c,u,l;!function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))t=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",o,!0),Object.defineProperty(t,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return r.get(this.target)}})}(),function(t){t.eager="eager",t.lazy="lazy"}(i||(i={}));class h extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new h.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){"loading"==t?this.delegate.loadingStyleChanged():"complete"==t?this.delegate.completeChanged():"src"==t?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loading(){return function(t){if("lazy"===t.toLowerCase())return i.lazy;return i.eager}(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return null===(e=null===(t=this.ownerDocument)||void 0===t?void 0:t.documentElement)||void 0===e?void 0:e.hasAttribute("data-turbo-preview")}}function f(t){return new URL(t.toString(),document.baseURI)}function d(t){let e;return t.hash?t.hash.slice(1):(e=t.href.match(/#(.*)$/))?e[1]:void 0}function p(t,e){return f((null==e?void 0:e.getAttribute("formaction"))||t.getAttribute("action")||t.action)}function m(t){return(function(t){return function(t){return t.pathname.split("/").slice(1)}(t).slice(-1)[0]}(t).match(/\.[^.]*$/)||[])[0]||""}function v(t,e){const n=function(t){return e=t.origin+t.pathname,e.endsWith("/")?e:e+"/";var e}(e);return t.href===f(n).href||t.href.startsWith(n)}function y(t,e){return v(t,e)&&!!m(t).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function b(t){const e=d(t);return null!=e?t.href.slice(0,-(e.length+1)):t.href}function g(t){return b(t)}class w{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return f(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}function E(t){if("false"==t.getAttribute("data-turbo-eval"))return t;{const e=document.createElement("script"),n=M("csp-nonce");return n&&(e.nonce=n),e.textContent=t.textContent,e.async=!1,function(t,e){for(const{name:n,value:r}of e.attributes)t.setAttribute(n,r)}(e,t),e}}function S(t,{target:e,cancelable:n,detail:r}={}){const o=new CustomEvent(t,{cancelable:n,bubbles:!0,composed:!0,detail:r});return e&&e.isConnected?e.dispatchEvent(o):document.documentElement.dispatchEvent(o),o}function O(){return new Promise((t=>requestAnimationFrame((()=>t()))))}function k(t=""){return(new DOMParser).parseFromString(t,"text/html")}function T(t,...e){const n=function(t,e){return t.reduce(((t,n,r)=>t+n+(null==e[r]?"":e[r])),"")}(t,e).replace(/^\n/,"").split("\n"),r=n[0].match(/^\s+/),o=r?r[0].length:0;return n.map((t=>t.slice(o))).join("\n")}function x(){return Array.from({length:36}).map(((t,e)=>8==e||13==e||18==e||23==e?"-":14==e?"4":19==e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16))).join("")}function L(t,...e){for(const n of e.map((e=>null==e?void 0:e.getAttribute(t))))if("string"==typeof n)return n;return null}function P(...t){for(const e of t)"turbo-frame"==e.localName&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function A(...t){for(const e of t)"turbo-frame"==e.localName&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function C(t,e=2e3){return new Promise((n=>{const r=()=>{t.removeEventListener("error",r),t.removeEventListener("load",r),n()};t.addEventListener("load",r,{once:!0}),t.addEventListener("error",r,{once:!0}),setTimeout(n,e)}))}function _(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function j(...t){const e=L("data-turbo-action",...t);return function(t){return"advance"==t||"replace"==t||"restore"==t}(e)?e:null}function R(t){return document.querySelector(`meta[name="${t}"]`)}function M(t){const e=R(t);return e&&e.content}function N(t,e){var n;if(t instanceof Element)return t.closest(e)||N(t.assignedSlot||(null===(n=t.getRootNode())||void 0===n?void 0:n.host),e)}!function(t){t[t.get=0]="get",t[t.post=1]="post",t[t.put=2]="put",t[t.patch=3]="patch",t[t.delete=4]="delete"}(s||(s={}));class I{constructor(t,e,n,r=new URLSearchParams,o=null){this.abortController=new AbortController,this.resolveRequestPromise=t=>{},this.delegate=t,this.method=e,this.headers=this.defaultHeaders,this.body=r,this.url=n,this.target=o}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(t);try{this.delegate.requestStarted(this);const e=await fetch(this.url.href,t);return await this.receive(e)}catch(t){if("AbortError"!==t.name)throw this.willDelegateErrorHandling(t)&&this.delegate.requestErrored(this,t),t}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new w(t);return S("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){var t;return{method:s[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:null===(t=this.delegate.referrer)||void 0===t?void 0:t.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===s.get}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(t){const e=new Promise((t=>this.resolveRequestPromise=t));S("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await e}willDelegateErrorHandling(t){return!S("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}}class F{constructor(t,e){this.started=!1,this.intersect=t=>{const e=t.slice(-1)[0];(null==e?void 0:e.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class D{static wrap(t){return"string"==typeof t?new this(function(t){const e=document.createElement("template");return e.innerHTML=t,e.content}(t)):t}constructor(t){this.fragment=function(t){for(const e of t.querySelectorAll("turbo-stream")){const t=document.importNode(e,!0);for(const e of t.templateElement.content.querySelectorAll("script"))e.replaceWith(E(e));e.replaceWith(t)}return t}(t)}}D.contentType="text/vnd.turbo-stream.html",function(t){t[t.initialized=0]="initialized",t[t.requesting=1]="requesting",t[t.waiting=2]="waiting",t[t.receiving=3]="receiving",t[t.stopping=4]="stopping",t[t.stopped=5]="stopped"}(a||(a={})),function(t){t.urlEncoded="application/x-www-form-urlencoded",t.multipart="multipart/form-data",t.plain="text/plain"}(c||(c={}));class B{static confirmMethod(t,e,n){return Promise.resolve(confirm(t))}constructor(t,e,n,r=!1){this.state=a.initialized,this.delegate=t,this.formElement=e,this.submitter=n,this.formData=function(t,e){const n=new FormData(t),r=null==e?void 0:e.getAttribute("name"),o=null==e?void 0:e.getAttribute("value");r&&n.append(r,o||"");return n}(e,n),this.location=f(this.action),this.method==s.get&&function(t,e){const n=new URLSearchParams;for(const[t,r]of e)r instanceof File||n.append(t,r);t.search=n.toString()}(this.location,[...this.body.entries()]),this.fetchRequest=new I(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=r}get method(){var t;return function(t){switch(t.toLowerCase()){case"get":return s.get;case"post":return s.post;case"put":return s.put;case"patch":return s.patch;case"delete":return s.delete}}(((null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"").toLowerCase())||s.get}get action(){var t;const e="string"==typeof this.formElement.action?this.formElement.action:null;return(null===(t=this.submitter)||void 0===t?void 0:t.hasAttribute("formaction"))?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||e||""}get body(){return this.enctype==c.urlEncoded||this.method==s.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var t;return function(t){switch(t.toLowerCase()){case c.multipart:return c.multipart;case c.plain:return c.plain;default:return c.urlEncoded}}((null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce(((t,[e,n])=>t.concat("string"==typeof n?[[e,n]]:[])),[])}async start(){const{initialized:t,requesting:e}=a,n=L("data-turbo-confirm",this.submitter,this.formElement);if("string"==typeof n){if(!await B.confirmMethod(n,this.formElement,this.submitter))return}if(this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){const{stopping:t,stopped:e}=a;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){const e=function(t){if(null!=t){const e=(document.cookie?document.cookie.split("; "):[]).find((e=>e.startsWith(t)));if(e){const t=e.split("=").slice(1).join("=");return t?decodeURIComponent(t):void 0}}}(M("csrf-param"))||M("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(D.contentType)}requestStarted(t){var e;this.state=a.waiting,null===(e=this.submitter)||void 0===e||e.setAttribute("disabled",""),this.setSubmitsWith(),S("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError)this.delegate.formSubmissionFailedWithResponse(this,e);else if(this.requestMustRedirect(t)&&function(t){return 200==t.statusCode&&!t.redirected}(e)){const t=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,t)}else this.state=a.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){var e;this.state=a.stopped,null===(e=this.submitter)||void 0===e||e.removeAttribute("disabled"),this.resetSubmitterText(),S("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(this.submitter&&this.submitsWith)if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}resetSubmitterText(){if(this.submitter&&this.originalSubmitText)if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){this.submitter.value=this.originalSubmitText}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||function(t,...e){return e.some((e=>e&&e.hasAttribute(t)))}("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var t;return null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("data-turbo-submits-with")}}class H{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return null!=this.getElementForAnchor(t)}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){for(const t of this.element.querySelectorAll("[autofocus]"))if(null==t.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])"))return t;return null}get permanentElements(){return U(this.element)}getPermanentElementById(t){return q(this.element,t)}getPermanentElementMapForSnapshot(t){const e={};for(const n of this.permanentElements){const{id:r}=n,o=t.getPermanentElementById(r);o&&(e[r]=[n,o])}return e}}function q(t,e){return t.querySelector(`#${e}[data-turbo-permanent]`)}function U(t){return t.querySelectorAll("[id][data-turbo-permanent]")}class V{constructor(t,e){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=t=>{if(!t.defaultPrevented){const e=t.target instanceof HTMLFormElement?t.target:void 0,n=t.submitter||void 0;e&&function(t,e){const n=(null==e?void 0:e.getAttribute("formmethod"))||t.getAttribute("method");return"dialog"!=n}(e,n)&&function(t,e){if((null==e?void 0:e.hasAttribute("formtarget"))||t.hasAttribute("target")){const n=(null==e?void 0:e.getAttribute("formtarget"))||t.target;for(const t of document.getElementsByName(n))if(t instanceof HTMLIFrameElement)return!1;return!0}return!0}(e,n)&&this.delegate.willSubmitForm(e,n)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,n))}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}class W{constructor(t,e){this.resolveRenderPromise=t=>{},this.resolveInterceptionPromise=t=>{},this.delegate=t,this.element=e}scrollToAnchor(t){const e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(d(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){const{isPreview:e,shouldRender:n,newSnapshot:r}=t;if(n)try{this.renderPromise=new Promise((t=>this.resolveRenderPromise=t)),this.renderer=t,await this.prepareToRenderSnapshot(t);const n=new Promise((t=>this.resolveInterceptionPromise=t)),o={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(r,o)||await n,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(r,e),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}}class $ extends W{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new H(this.element)}}class z{constructor(t,e){this.clickBubbled=t=>{this.respondsToEventTarget(t.target)?this.clickEvent=t:delete this.clickEvent},this.linkClicked=t=>{this.clickEvent&&this.respondsToEventTarget(t.target)&&t.target instanceof Element&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent},this.willVisit=t=>{delete this.clickEvent},this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}}class K{constructor(t,e){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){const e=t.composedPath&&t.composedPath()[0]||t.target,n=this.findLinkFromClickTarget(e);if(n&&function(t){if(t.hasAttribute("target")){for(const e of document.getElementsByName(t.target))if(e instanceof HTMLIFrameElement)return!1;return!0}return!0}(n)){const e=this.getLocationForLink(n);this.delegate.willFollowLinkToLocation(n,e,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(n,e))}}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){return N(t,"a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return f(t.getAttribute("href")||"")}}class G{constructor(t,e){this.delegate=t,this.linkInterceptor=new K(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(t,e,n){return this.delegate.willSubmitFormLinkToLocation(t,e,n)&&t.hasAttribute("data-turbo-method")}followedLinkToLocation(t,e){const n=document.createElement("form");for(const[t,r]of e.searchParams)n.append(Object.assign(document.createElement("input"),{type:"hidden",name:t,value:r}));const r=Object.assign(e,{search:""});n.setAttribute("data-turbo","true"),n.setAttribute("action",r.href),n.setAttribute("hidden","");const o=t.getAttribute("data-turbo-method");o&&n.setAttribute("method",o);const i=t.getAttribute("data-turbo-frame");i&&n.setAttribute("data-turbo-frame",i);const s=j(t);s&&n.setAttribute("data-turbo-action",s);const a=t.getAttribute("data-turbo-confirm");a&&n.setAttribute("data-turbo-confirm",a);t.hasAttribute("data-turbo-stream")&&n.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,n),document.body.appendChild(n),n.addEventListener("turbo:submit-end",(()=>n.remove()),{once:!0}),requestAnimationFrame((()=>n.requestSubmit()))}}class J{static async preservingPermanentElements(t,e,n){const r=new this(t,e);r.enter(),await n(),r.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(const t in this.permanentElementMap){const[e,n]=this.permanentElementMap[t];this.delegate.enteringBardo(e,n),this.replaceNewPermanentElementWithPlaceholder(n)}}leave(){for(const t in this.permanentElementMap){const[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){const e=function(t){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",t.id),e}(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){const e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){const e=this.getPlaceholderById(t.id);null==e||e.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find((e=>e.content==t))}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}class X{constructor(t,e,n,r,o=!0){this.activeElement=null,this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.willRender=o,this.renderElement=n,this.promise=new Promise(((t,e)=>this.resolvingFunctions={resolve:t,reject:e}))}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await J.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){const t=this.connectedSnapshot.firstAutofocusableElement;(function(t){return t&&"function"==typeof t.focus})(t)&&t.focus()}enteringBardo(t){this.activeElement||t.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}class Y extends X{static renderElement(t,e){var n;const r=document.createRange();r.selectNodeContents(t),r.deleteContents();const o=e,i=null===(n=o.ownerDocument)||void 0===n?void 0:n.createRange();i&&(i.selectNodeContents(o),t.appendChild(i.extractContents()))}constructor(t,e,n,r,o,i=!0){super(e,n,r,o,i),this.delegate=t}get shouldRender(){return!0}async render(){await O(),this.preservingPermanentElements((()=>{this.loadFrameElement()})),this.scrollFrameIntoView(),await O(),this.focusFirstAutofocusableElement(),await O(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const n=this.currentElement.firstElementChild,r=(t=this.currentElement.getAttribute("data-autoscroll-block"),e="end","end"==t||"start"==t||"center"==t||"nearest"==t?t:e),o=function(t,e){return"auto"==t||"smooth"==t?t:e}(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(n)return n.scrollIntoView({block:r,behavior:o}),!0}var t,e;return!1}activateScriptElements(){for(const t of this.newScriptElements){const e=E(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}class Q{static get defaultCSS(){return T`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${Q.animationDuration}ms ease-out,
          opacity ${Q.animationDuration/2}ms ${Q.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,1.5*Q.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,Q.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame((()=>{this.progressElement.style.width=10+90*this.value+"%"}))}createStylesheetElement(){const t=document.createElement("style");return t.type="text/css",t.textContent=Q.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return M("csp-nonce")}}Q.animationDuration=300;class Z extends H{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter((t=>!function(t){const e=t.localName;return"noscript"==e}(t))).map((t=>function(t){t.hasAttribute("nonce")&&t.setAttribute("nonce","");return t}(t))).reduce(((t,e)=>{const{outerHTML:n}=e,r=n in t?t[n]:{type:tt(e),tracked:et(e),elements:[]};return Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({},r),{elements:[...r.elements,e]})})}),{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((t=>this.detailsByOuterHTML[t].tracked)).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter((t=>!(t in e.detailsByOuterHTML))).map((t=>this.detailsByOuterHTML[t])).filter((({type:e})=>e==t)).map((({elements:[t]})=>t))}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce(((t,e)=>{const{type:n,tracked:r,elements:o}=this.detailsByOuterHTML[e];return null!=n||r?o.length>1?[...t,...o.slice(1)]:t:[...t,...o]}),[])}getMetaValue(t){const e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce(((e,n)=>{const{elements:[r]}=this.detailsByOuterHTML[n];return function(t,e){const n=t.localName;return"meta"==n&&t.getAttribute("name")==e}(r,t)?r:e}),void 0)}}function tt(t){return function(t){const e=t.localName;return"script"==e}(t)?"script":function(t){const e=t.localName;return"style"==e||"link"==e&&"stylesheet"==t.getAttribute("rel")}(t)?"stylesheet":void 0}function et(t){return"reload"==t.getAttribute("data-turbo-track")}class nt extends H{static fromHTMLString(t=""){return this.fromDocument(k(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({head:t,body:e}){return new this(e,new Z(t))}constructor(t,e){super(t),this.headSnapshot=e}clone(){const t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),n=t.querySelectorAll("select");for(const[t,r]of e.entries()){const e=n[t];for(const t of e.selectedOptions)t.selected=!1;for(const t of r.selectedOptions)e.options[t.index].selected=!0}for(const e of t.querySelectorAll('input[type="password"]'))e.value="";return new nt(t,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var t;return f(null!==(t=this.getSetting("root"))&&void 0!==t?t:"/")}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}}!function(t){t.visitStart="visitStart",t.requestStart="requestStart",t.requestEnd="requestEnd",t.visitEnd="visitEnd"}(u||(u={})),function(t){t.initialized="initialized",t.started="started",t.canceled="canceled",t.failed="failed",t.completed="completed"}(l||(l={}));const rt={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};var ot,it;!function(t){t[t.networkFailure=0]="networkFailure",t[t.timeoutFailure=-1]="timeoutFailure",t[t.contentTypeMismatch=-2]="contentTypeMismatch"}(ot||(ot={}));class st{constructor(t,e,n,r={}){this.identifier=x(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=l.initialized,this.delegate=t,this.location=e,this.restorationIdentifier=n||x();const{action:o,historyChanged:i,referrer:s,snapshot:a,snapshotHTML:c,response:u,visitCachedSnapshot:h,willRender:f,updateHistory:d,shouldCacheSnapshot:p,acceptsStreamResponse:m}=Object.assign(Object.assign({},rt),r);this.action=o,this.historyChanged=i,this.referrer=s,this.snapshot=a,this.snapshotHTML=c,this.response=u,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=h,this.willRender=f,this.updateHistory=d,this.scrolled=!f,this.shouldCacheSnapshot=p,this.acceptsStreamResponse=m}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==l.initialized&&(this.recordTimingMetric(u.visitStart),this.state=l.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==l.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=l.canceled)}complete(){this.state==l.started&&(this.recordTimingMetric(u.visitEnd),this.state=l.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==l.started&&(this.state=l.failed,this.adapter.visitFailed(this))}changeHistory(){var t;if(!this.historyChanged&&this.updateHistory){const e=_(this.location.href===(null===(t=this.referrer)||void 0===t?void 0:t.href)?"replace":this.action);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new I(this,s.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(u.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;at(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(u.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render((async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,at(t)&&null!=e?(await this.view.renderPage(nt.fromHTMLString(e),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(nt.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!d(this.location)||t.hasAnchor(d(this.location)))&&("restore"==this.action||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return nt.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render((async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(t,e,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),e||this.complete())}))}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&(null===(t=this.response)||void 0===t?void 0:t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render((async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)}))}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(D.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const n=await e.responseHTML,{redirected:r,statusCode:o}=e;null==n?this.recordResponse({statusCode:ot.contentTypeMismatch,redirected:r}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:o,responseHTML:n,redirected:r}))}async requestFailedWithResponse(t,e){const n=await e.responseHTML,{redirected:r,statusCode:o}=e;null==n?this.recordResponse({statusCode:ot.contentTypeMismatch,redirected:r}):this.recordResponse({statusCode:o,responseHTML:n,redirected:r})}requestErrored(t,e){this.recordResponse({statusCode:ot.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||this.view.forceReloaded||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){const t=d(this.location);if(null!=t)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=(new Date).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return!this.isSamePage&&("restore"==this.action?!this.hasCachedSnapshot():this.willRender)}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then((t=>t&&this.visitCachedSnapshot(t))),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise((t=>{this.frame=requestAnimationFrame((()=>t()))})),await t(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function at(t){return t>=200&&t<300}class ct{constructor(t){this.progressBar=new Q,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,(null==e?void 0:e.restorationIdentifier)||x(),e)}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!=t.action?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case ot.networkFailure:case ot.timeoutFailure:case ot.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(t){}pageInvalidated(t){this.reload(t)}visitFailed(t){}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),null!=this.visitProgressBarTimeout&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){null==this.formProgressBarTimeout&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),null!=this.formProgressBarTimeout&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){var e;S("turbo:reload",{detail:t}),window.location.href=(null===(e=this.location)||void 0===e?void 0:e.toString())||window.location.href}get navigator(){return this.session.navigator}}class ut{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=t=>{for(const t of this.temporaryElements)t.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}}class lt{constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new z(this,e),this.formSubmitObserver=new V(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,n){return this.shouldRedirect(t)}linkClickIntercepted(t,e,n){const r=this.findFrameElement(t);r&&r.delegate.linkClickIntercepted(t,e,n)}willSubmitForm(t,e){return null==t.closest("turbo-frame")&&this.shouldSubmit(t,e)&&this.shouldRedirect(t,e)}formSubmitted(t,e){const n=this.findFrameElement(t,e);n&&n.delegate.formSubmitted(t,e)}shouldSubmit(t,e){var n;const r=p(t,e),o=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),i=f(null!==(n=null==o?void 0:o.content)&&void 0!==n?n:"/");return this.shouldRedirect(t,e)&&y(r,i)}shouldRedirect(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){const n=this.findFrameElement(t,e);return!!n&&n!=t.closest("turbo-frame")}return!1}findFrameElement(t,e){const n=(null==e?void 0:e.getAttribute("data-turbo-frame"))||t.getAttribute("data-turbo-frame");if(n&&"_top"!=n){const t=this.element.querySelector(`#${n}:not([disabled])`);if(t instanceof h)return t}}}class ht{constructor(t){this.restorationIdentifier=x(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=t=>{if(this.shouldHandlePopState()){const{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);const{restorationIdentifier:t}=e;this.restorationIdentifier=t,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,t)}}},this.onPageLoad=async t=>{await Promise.resolve(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,n=x()){const r={turbo:{restorationIdentifier:n}};t.call(history,r,"",e.href),this.location=e,this.restorationIdentifier=n}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,n=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},n),t)}assumeControlOfScrollRestoration(){var t;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(t=history.scrollRestoration)&&void 0!==t?t:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}class ft{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&(y(t,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(t,e):window.location.href=t.toString())}startVisit(t,e,n={}){this.stop(),this.currentVisit=new st(this,f(t),e,Object.assign({referrer:this.location},n)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new B(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){"function"==typeof this.adapter.formSubmissionStarted&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){const n=await e.responseHTML;if(n){const r=t.isSafe;r||this.view.clearSnapshotCache();const{statusCode:o,redirected:i}=e,s={action:this.getActionForFormSubmission(t),shouldCacheSnapshot:r,response:{statusCode:o,responseHTML:n,redirected:i}};this.proposeVisit(e.location,s)}}}async formSubmissionFailedWithResponse(t,e){const n=await e.responseHTML;if(n){const t=nt.fromHTMLString(n);e.serverError?await this.view.renderError(t,this.currentVisit):await this.view.renderPage(t,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){"function"==typeof this.adapter.formSubmissionFinished&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){const n=d(t),r=d(this.view.lastRenderedLocation),o="restore"===e&&void 0===n;return"replace"!==e&&b(t)===b(this.view.lastRenderedLocation)&&(o||null!=n&&n!==r)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:t,formElement:e}){return j(t,e)||"advance"}}!function(t){t[t.initial=0]="initial",t[t.loading=1]="loading",t[t.interactive=2]="interactive",t[t.complete=3]="complete"}(it||(it={}));class dt{constructor(t){this.stage=it.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:t}=this;"interactive"==t?this.pageIsInteractive():"complete"==t&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=t}start(){this.started||(this.stage==it.initial&&(this.stage=it.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==it.loading&&(this.stage=it.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==it.interactive&&(this.stage=it.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class pt{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class mt{render({fragment:t}){J.preservingPermanentElements(this,function(t){const e=U(document.documentElement),n={};for(const r of e){const{id:e}=r;for(const o of t.querySelectorAll("turbo-stream")){const t=q(o.templateElement.content,e);t&&(n[e]=[r,t])}}return n}(t),(()=>document.documentElement.appendChild(t)))}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}}class vt{constructor(t){this.sources=new Set,this.started=!1,this.inspectFetchResponse=t=>{const e=function(t){var e;const n=null===(e=t.detail)||void 0===e?void 0:e.fetchResponse;if(n instanceof w)return n}(t);e&&function(t){var e;const n=null!==(e=t.contentType)&&void 0!==e?e:"";return n.startsWith(D.contentType)}(e)&&(t.preventDefault(),this.receiveMessageResponse(e))},this.receiveMessageEvent=t=>{this.started&&"string"==typeof t.data&&this.receiveMessageHTML(t.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(D.wrap(t))}}class yt extends X{static renderElement(t,e){const{documentElement:n,body:r}=document;n.replaceChild(e,r)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const t of this.scriptElements){const e=t.parentNode;if(e){const n=E(t);e.replaceChild(n,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class bt extends X{static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){return this.newSnapshot.isVisitable?this.trackedElementsAreIdentical?void 0:{reason:"tracked_element_mismatch"}:{reason:"turbo_visit_control_is_reload"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e}async replaceBody(){await this.preservingPermanentElements((async()=>{this.activateNewBody(),await this.assignNewBody()}))}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const e of this.newHeadStylesheetElements)t.push(C(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(E(t))}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(const e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(const[n,r]of e.entries()){if("TITLE"==t.tagName){if("TITLE"!=r.tagName)continue;if(t.innerHTML==r.innerHTML)return e.splice(n,1),!0}if(r.isEqualNode(t))return e.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const e=E(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class gt{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return g(t)in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[g(t)]}write(t,e){this.snapshots[g(t)]=e}touch(t){const e=g(t),n=this.keys.indexOf(e);n>-1&&this.keys.splice(n,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class wt extends W{constructor(){super(...arguments),this.snapshotCache=new gt(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(t,e=!1,n=!0,r){const o=new bt(this.snapshot,t,bt.renderElement,e,n);return o.shouldRender?null==r||r.changeHistory():this.forceReloaded=!0,this.render(o)}renderError(t,e){null==e||e.changeHistory();const n=new yt(this.snapshot,t,yt.renderElement,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:e}=this;await new Promise((t=>setTimeout((()=>t()),0)));const n=t.clone();return this.snapshotCache.put(e,n),n}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}get snapshot(){return nt.fromElement(this.element)}}class Et{constructor(t){this.selector="a[data-turbo-preload]",this.delegate=t}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",(()=>{this.preloadOnLoadLinksForView(document.body)}));this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(t){for(const e of t.querySelectorAll(this.selector))this.preloadURL(e)}async preloadURL(t){const e=new URL(t.href);if(!this.snapshotCache.has(e))try{const t=await fetch(e.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}}),n=await t.text(),r=nt.fromHTMLString(n);this.snapshotCache.put(e,r)}catch(t){}}}function St(t){Object.defineProperties(t,Ot)}const Ot={absoluteURL:{get(){return this.toString()}}};const kt={after(){this.targetElements.forEach((t=>{var e;return null===(e=t.parentElement)||void 0===e?void 0:e.insertBefore(this.templateContent,t.nextSibling)}))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((t=>t.append(this.templateContent)))},before(){this.targetElements.forEach((t=>{var e;return null===(e=t.parentElement)||void 0===e?void 0:e.insertBefore(this.templateContent,t)}))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((t=>t.prepend(this.templateContent)))},remove(){this.targetElements.forEach((t=>t.remove()))},replace(){this.targetElements.forEach((t=>t.replaceWith(this.templateContent)))},update(){this.targetElements.forEach((t=>{t.innerHTML="",t.append(this.templateContent)}))}},Tt=new class{constructor(){this.navigator=new ft(this),this.history=new ht(this),this.preloader=new Et(this),this.view=new wt(this,document.documentElement),this.adapter=new ct(this),this.pageObserver=new dt(this),this.cacheObserver=new ut,this.linkClickObserver=new K(this,window),this.formSubmitObserver=new V(this,document),this.scrollObserver=new pt(this),this.streamObserver=new vt(this),this.formLinkClickObserver=new G(this,document.documentElement),this.frameRedirector=new lt(this,document.documentElement),this.streamMessageRenderer=new mt,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){const n=e.frame?document.getElementById(e.frame):null;n instanceof h?(n.src=t.toString(),n.loaded):this.navigator.proposeVisit(f(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(D.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}setFormMode(t){this.formMode=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t,e){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&y(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(t,e,n){return this.elementIsNavigatable(t)&&y(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,n)}followedLinkToLocation(t,e){const n=this.getActionForLink(t),r=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:n,acceptsStreamResponse:r})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){St(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||P(document.documentElement),St(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){A(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){const n=p(t,e);return this.submissionIsNavigatable(t,e)&&y(f(n),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;(null===(t=this.navigator.currentVisit)||void 0===t?void 0:t.silent)||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){const n=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:r,detail:{render:o}}=n;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!r}viewRenderedSnapshot(t,e){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,n){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,n).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,n){return S("turbo:click",{target:t,detail:{url:e.href,originalEvent:n},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return S("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return S("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return S("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return S("turbo:before-render",{detail:Object.assign({newBody:t},e),cancelable:!0})}notifyApplicationAfterRender(){return S("turbo:render")}notifyApplicationAfterPageLoad(t={}){return S("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return S("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return S("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if("off"==this.formMode)return!1;{const n=!e||this.elementIsNavigatable(e);return"optin"==this.formMode?n&&null!=t.closest('[data-turbo="true"]'):n&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){const e=N(t,"[data-turbo]"),n=N(t,"turbo-frame");return this.drive||n?!e||"false"!=e.getAttribute("data-turbo"):!!e&&"true"==e.getAttribute("data-turbo")}getActionForLink(t){return j(t)||"advance"}get snapshot(){return this.view.snapshot}},xt=new class{constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(t){!function(t,e){let n=R(t);n||(n=document.createElement("meta"),n.setAttribute("name",t),document.head.appendChild(n)),n.setAttribute("content",e)}("turbo-cache-control",t)}}(Tt),{navigator:Lt}=Tt;function Pt(){Tt.start()}function At(t){Tt.registerAdapter(t)}function Ct(t,e){Tt.visit(t,e)}function _t(t){Tt.connectStreamSource(t)}function jt(t){Tt.disconnectStreamSource(t)}function Rt(t){Tt.renderStreamMessage(t)}function Mt(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Tt.clearCache()}function Nt(t){Tt.setProgressBarDelay(t)}function It(t){B.confirmMethod=t}function Ft(t){Tt.setFormMode(t)}var Dt=Object.freeze({__proto__:null,navigator:Lt,session:Tt,cache:xt,PageRenderer:bt,PageSnapshot:nt,FrameRenderer:Y,start:Pt,registerAdapter:At,visit:Ct,connectStreamSource:_t,disconnectStreamSource:jt,renderStreamMessage:Rt,clearCache:Mt,setProgressBarDelay:Nt,setConfirmMethod:It,setFormMode:Ft,StreamActions:kt});class Bt extends Error{}function Ht(t){if(null!=t){const e=document.getElementById(t);if(e instanceof h)return e}}function qt(t,e){if(t){const r=t.getAttribute("src");if(null!=r&&null!=e&&(n=e,f(r).href==f(n).href))throw new Error(`Matching <turbo-frame id="${t.id}"> element has a source URL which references itself`);if(t.ownerDocument!==document&&(t=document.importNode(t,!0)),t instanceof h)return t.connectedCallback(),t.disconnectedCallback(),t}var n}class Ut extends HTMLElement{static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return null!==(t=this.renderPromise)&&void 0!==t?t:this.renderPromise=(async()=>{const t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await O(),await t.detail.render(this))})()}disconnect(){try{this.remove()}catch(t){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach((t=>t.remove()))}get duplicateChildren(){var t;const e=this.targetElements.flatMap((t=>[...t.children])).filter((t=>!!t.id)),n=[...(null===(t=this.templateContent)||void 0===t?void 0:t.children)||[]].filter((t=>!!t.id)).map((t=>t.id));return e.filter((t=>n.includes(t.id)))}get performAction(){if(this.action){const t=kt[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){return this.target?this.targetElementsById:this.targets?this.targetElementsByQuery:void this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(null===this.firstElementChild){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(t){throw new Error(`${this.description}: ${t}`)}get description(){var t,e;return null!==(e=(null!==(t=this.outerHTML.match(/<[^>]+>/))&&void 0!==t?t:[])[0])&&void 0!==e?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Ut.renderElement}})}get targetElementsById(){var t;const e=null===(t=this.ownerDocument)||void 0===t?void 0:t.getElementById(this.target);return null!==e?[e]:[]}get targetElementsByQuery(){var t;const e=null===(t=this.ownerDocument)||void 0===t?void 0:t.querySelectorAll(this.targets);return 0!==e.length?Array.prototype.slice.call(e):[]}}class Vt extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),_t(this.streamSource)}disconnectedCallback(){this.streamSource&&jt(this.streamSource)}get src(){return this.getAttribute("src")||""}}h.delegateConstructor=class{constructor(t){this.fetchResponseLoaded=t=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:t})=>{const e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=t,this.view=new $(this,this.element),this.appearanceObserver=new F(this,this.element),this.formLinkClickObserver=new G(this,this.element),this.linkInterceptor=new z(this,this.element),this.restorationIdentifier=x(),this.formSubmitObserver=new V(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==i.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==i.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==i.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){const{src:t}=this.element;return this.ignoringChangesToAttribute("complete",(()=>{this.element.removeAttribute("complete")})),this.element.src=null,this.element.src=t,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==i.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(f(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{const e=await t.responseHTML;if(e){const n=k(e);nt.fromDocument(n).isVisitable?await this.loadFrameResponse(t,n):await this.handleUnvisitableFrameResponse(t)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,t),this.loadSourceURL()}willSubmitFormLinkToLocation(t){return this.shouldInterceptNavigation(t)}submittedFormLinkToLocation(t,e,n){const r=this.findFrameElement(t);r&&n.setAttribute("data-turbo-frame",r.id)}shouldInterceptLinkClick(t,e,n){return this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.navigateFrame(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new B(this,t,e);const{fetchRequest:n}=this.formSubmission;this.prepareRequest(n),this.formSubmission.start()}prepareRequest(t){var e;t.headers["Turbo-Frame"]=this.id,(null===(e=this.currentNavigationElement)||void 0===e?void 0:e.hasAttribute("data-turbo-stream"))&&t.acceptResponseType(D.contentType)}requestStarted(t){P(this.element)}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){A(this.element)}formSubmissionStarted({formElement:t}){P(t,this.findFrameElement(t))}formSubmissionSucceededWithResponse(t,e){const n=this.findFrameElement(t.formElement,t.submitter);n.delegate.proposeVisitIfNavigatedWithAction(n,t.formElement,t.submitter),n.delegate.loadResponse(e),t.isSafe||Tt.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),Tt.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){A(t,this.findFrameElement(t))}allowsImmediateRender({element:t},e){const n=S("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:t},e),cancelable:!0}),{defaultPrevented:r,detail:{render:o}}=n;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!r}viewRenderedSnapshot(t,e){}preloadOnLoadLinksForView(t){Tt.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}async loadFrameResponse(t,e){const n=await this.extractForeignFrameElement(e.body);if(n){const e=new H(n),r=new Y(this,this.view.snapshot,e,Y.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(r),this.complete=!0,Tt.frameRendered(t,this.element),Tt.frameLoaded(this.element),this.fetchResponseLoaded(t)}else this.willHandleFrameMissingFromResponse(t)&&this.handleFrameMissingFromResponse(t)}async visit(t){var e;const n=new I(this,s.get,t,new URLSearchParams,this.element);return null===(e=this.currentFetchRequest)||void 0===e||e.cancel(),this.currentFetchRequest=n,new Promise((t=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,t()},n.perform()}))}navigateFrame(t,e,n){const r=this.findFrameElement(t,n);r.delegate.proposeVisitIfNavigatedWithAction(r,t,n),this.withCurrentNavigationElement(t,(()=>{r.src=e}))}proposeVisitIfNavigatedWithAction(t,e,n){if(this.action=j(n,e,t),this.action){const e=nt.fromElement(t).clone(),{visitCachedSnapshot:n}=t.delegate;t.delegate.fetchResponseLoaded=r=>{if(t.src){const{statusCode:o,redirected:i}=r,s={response:{statusCode:o,redirected:i,responseHTML:t.ownerDocument.documentElement.outerHTML},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:e};this.action&&(s.action=this.action),Tt.visit(t.src,s)}}}}changeHistory(){if(this.action){const t=_(this.action);Tt.history.update(t,f(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(t.response)}willHandleFrameMissingFromResponse(t){this.element.setAttribute("complete","");const e=t.response;return!S("turbo:frame-missing",{target:this.element,detail:{response:e,visit:async(t,e={})=>{t instanceof Response?this.visitResponse(t):Tt.visit(t,e)}},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(t){this.view.missing(),this.throwFrameMissingError(t)}throwFrameMissingError(t){const e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Bt(e)}async visitResponse(t){const e=new w(t),n=await e.responseHTML,{location:r,redirected:o,statusCode:i}=e;return Tt.visit(r,{response:{redirected:o,statusCode:i,responseHTML:n}})}findFrameElement(t,e){var n;return null!==(n=Ht(L("data-turbo-frame",e,t)||this.element.getAttribute("target")))&&void 0!==n?n:this.element}async extractForeignFrameElement(t){let e;const n=CSS.escape(this.id);try{if(e=qt(t.querySelector(`turbo-frame#${n}`),this.sourceURL),e)return e;if(e=qt(t.querySelector(`turbo-frame[src][recurse~=${n}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(t){return console.error(t),new h}return null}formActionIsVisitable(t,e){return y(f(p(t,e)),this.rootLocation)}shouldInterceptNavigation(t,e){const n=L("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.formActionIsVisitable(t,e))return!1;if(!this.enabled||"_top"==n)return!1;if(n){const t=Ht(n);if(t)return!t.disabled}return!!Tt.elementIsNavigatable(t)&&!(e&&!Tt.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.ignoringChangesToAttribute("src",(()=>{this.element.src=null!=t?t:null}))}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission||void 0!==this.resolveVisitPromise()}get complete(){return this.element.hasAttribute("complete")}set complete(t){this.ignoringChangesToAttribute("complete",(()=>{t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}))}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var t;const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]');return f(null!==(t=null==e?void 0:e.content)&&void 0!==t?t:"/")}isIgnoringChangesTo(t){return this.ignoredAttributes.has(t)}ignoringChangesToAttribute(t,e){this.ignoredAttributes.add(t),e(),this.ignoredAttributes.delete(t)}withCurrentNavigationElement(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}},void 0===customElements.get("turbo-frame")&&customElements.define("turbo-frame",h),void 0===customElements.get("turbo-stream")&&customElements.define("turbo-stream",Ut),void 0===customElements.get("turbo-stream-source")&&customElements.define("turbo-stream-source",Vt),(()=>{let t=document.currentScript;if(t&&!t.hasAttribute("data-turbo-suppress-warning"))for(t=t.parentElement;t;){if(t==document.body)return console.warn(T`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,t.outerHTML);t=t.parentElement}})(),window.Turbo=Dt,Pt()},2355:()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title="",this.count=0},(n=[{key:"initialize",value:function(){this.title=document.title,this.count=0}},{key:"increment",value:function(){this.count++,this.update()}},{key:"reset",value:function(){this.count=0,this.update()}},{key:"update",value:function(){document.title=(this.count?"(".concat(this.count,") "):"")+this.title}}])&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Waterhole.documentTitle=new r,document.addEventListener("turbo:load",(function(){return Waterhole.documentTitle.initialize()})),window.addEventListener("focus",(function(){return Waterhole.documentTitle.reset()}))},2233:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"preload",value:function(){var t;this.hasFrameTarget&&(null===(t=this.frameTarget)||void 0===t||t.setAttribute("loading","eager"))}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI);l.targets=["frame"]},2209:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"dismiss",value:function(t){var e=this.element.closest("ui-alerts");e?e.dismiss(this.element):this.element.remove()}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI)},9792:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var r=n(2891),o=n(6877);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function c(t,e,n){return e=l(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var f={},d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,(r=[{key:"commentId",get:function(){return this.element.getAttribute("data-comment-id")||""}},{key:"parentId",get:function(){return this.element.getAttribute("data-parent-id")||""}},{key:"parentElements",get:function(){return Array.from(document.querySelectorAll('[data-comment-id="'.concat(this.parentId,'"]')))}},{key:"connect",value:function(){f[this.commentId]&&this.toggleHidden()}},{key:"disconnect",value:function(){f[this.commentId]=this.element.classList.contains("is-expanded")}},{key:"toggleHidden",value:function(){this.element.classList.toggle("is-expanded")}},{key:"highlightParent",value:function(){this.parentElements.forEach((function(t){t.classList.add("is-highlighted")})),this.parentTooltipTarget&&(this.parentTooltipTarget.disabled=this.parentElements.some((function(t){return(0,o.YG)(t,.5)})))}},{key:"stopHighlightingParent",value:function(){this.parentElements.forEach((function(t){t.classList.remove("is-highlighted")}))}}])&&s(n.prototype,r),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI);d.targets=["parentTooltip"]},7143:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){var t=this;this.element.addEventListener("click",(function(e){var n,r="false"===t.element.getAttribute("aria-expanded");t.element.setAttribute("aria-expanded",String(r));var o=null===(n=t.element.closest(".comment"))||void 0===n?void 0:n.querySelector(".comment__replies");o&&(o.hidden=!r),r||e.preventDefault()}))}},{key:"focusAfterLoad",value:function(){addEventListener("turbo:frame-render",(function(t){var e,n=window.scrollY;null===(e=t.target.querySelector(".comment__replies"))||void 0===e||e.focus(),window.scroll({top:n})}),{once:!0})}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI)},895:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var r=n(2891),o=n(9734),i=n(6877);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}function u(t,e,n){return e=h(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],h(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}var d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=u(this,e,arguments)).onHashChange=function(){requestAnimationFrame((function(){"#reply"===window.location.hash&&t.open()}))},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){var t=Number(localStorage.getItem("composer_height"));t&&(this.element.style.height=t+"px"),window.addEventListener("hashchange",this.onHashChange),this.onHashChange()}},{key:"disconnect",value:function(){window.removeEventListener("hashchange",this.onHashChange)}},{key:"placeholderClick",value:function(t){(0,i.kX)(t)||(t.preventDefault(),this.open(),this.scrollToBottom())}},{key:"scrollToBottom",value:function(){this.element.style.position="static";var t=this.element.getBoundingClientRect().top,e=parseInt(getComputedStyle(this.element).height);this.element.style.position="";var n=scrollY+t+e-window.innerHeight;scrollY>n||(0,o.A)(n,{minDuration:200,maxDuration:200})}},{key:"open",value:function(){var t=this;this.element.classList.add("is-open"),setTimeout((function(){var e;return null===(e=t.element.querySelector("textarea"))||void 0===e?void 0:e.focus()}))}},{key:"close",value:function(){this.element.classList.remove("is-open"),"#reply"===window.location.hash&&history.replaceState(null,""," ")}},{key:"submitEnd",value:function(t){t.detail.fetchResponse.contentType.startsWith("text/vnd.turbo-stream.html")&&this.close()}},{key:"startResize",value:function(t){t.preventDefault();var e=this.element,n=t.clientY,r=e.offsetHeight,o=e.getBoundingClientRect().bottom,i=function(t){var i=r-(t.clientY-n);e.style.height=i+"px",localStorage.setItem("composer_height",String(i)),window.scroll(0,window.scrollY+e.getBoundingClientRect().bottom-o)};document.addEventListener("pointermove",i),document.addEventListener("pointerup",(function(){document.removeEventListener("pointermove",i)}),{once:!0})}}])&&a(n.prototype,r),s&&a(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(r.xI);d.targets=["handle"]},8715:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var r=n(2891),o=n(6877);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(){s=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new j(r||[]);return o(s,"_invoke",{value:P(t,n,a)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",m="suspendedYield",v="executing",y="completed",b={};function g(){}function w(){}function E(){}var S={};h(S,c,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(R([])));k&&k!==n&&r.call(k,c)&&(S=k);var T=E.prototype=g.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(o,s,a,c){var u=d(t[o],t,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var s;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return s=s?s.then(o,o):o()}})}function P(e,n,r){var o=p;return function(i,s){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=A(a,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(e,n,r);if("normal"===u.type){if(o=r.done?y:m,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function A(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=E,o(T,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=h(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},x(L.prototype),h(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new L(f(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(T),h(T,l,"Generator"),h(T,c,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function u(t,e,n){return e=h(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],h(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}var d=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"copy",value:function(t){return d(this,void 0,void 0,s().mark((function e(){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.currentTarget,r=n.getAttribute("href")||"",e.prev=3,e.next=6,navigator.clipboard.writeText(r);case 6:this.hasMessageValue&&((i=(0,o.Ml)("template-alert-success")).querySelector(".alert__message").textContent=this.messageValue,Waterhole.alerts.show(i,{key:"copy-link"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),window.prompt("",r);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})))}}])&&a(n.prototype,r),i&&a(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI);p.values={message:String}},3316:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=s(this,e,arguments)).lockScrollPosition=function(e){var n;e.target===e.currentTarget&&(t.anchor=t.element.nextElementSibling,t.anchor&&(t.top=t.anchor.getBoundingClientRect().top),null===(n=t.observer)||void 0===n||n.disconnect(),t.observer=new MutationObserver((function(){return t.restore()})),t.observer.observe(document.body,{subtree:!0,childList:!0,attributes:!0}))},t.unlockScrollPosition=function(e){e&&e.target!==e.currentTarget||setTimeout((function(){var e;null===(e=t.observer)||void 0===e||e.disconnect(),delete t.observer}))},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){this.element.addEventListener("turbo:before-fetch-response",this.lockScrollPosition),this.element.addEventListener("turbo:frame-render",this.unlockScrollPosition)}},{key:"disconnect",value:function(){this.element.removeEventListener("turbo:before-fetch-response",this.lockScrollPosition),this.element.removeEventListener("turbo:frame-render",this.unlockScrollPosition),this.unlockScrollPosition()}},{key:"restore",value:function(){this.anchor&&this.top&&window.scroll({top:window.scrollY+this.anchor.getBoundingClientRect().top-this.top})}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI)},6636:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){var t=this;this.element.addEventListener("submit",(function(){var e;return null===(e=t.element.querySelector('button[type="submit"]'))||void 0===e?void 0:e.setAttribute("disabled","")}))}},{key:"disconnect",value:function(){var t,e=(null===(t=this.element.querySelector("input[name=email]"))||void 0===t?void 0:t.value)||"";document.addEventListener("turbo:load",(function(){var t=document.querySelector("input[name=email]");t&&(t.value=e)}),{once:!0})}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI)},5620:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var r=n(2891),o=n(89);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function l(t,e,n){return e=f(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h()?Reflect.construct(e,n||[],f(t).constructor):e.apply(t,n))}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var p=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=l(this,e,arguments)).onTextExpanderChange=function(e){var n=e.detail,r=n.provide,o=n.text,i=new URL(t.userLookupUrlValue);i.searchParams.append("q",o),r(Waterhole.fetch(i).json().then((function(t){var e=document.createElement("ul");return e.setAttribute("role","listbox"),e.className="menu",e.style.position="absolute",e.style.marginTop="24px",e.append.apply(e,s(t.map((function(t){var e=t.name,n=t.html,r=t.commentUrl,o=t.frameId,i=document.createElement("li");return i.setAttribute("role","option"),i.id="suggestion-".concat(Math.floor(1e5*Math.random()).toString()),i.className="menu-item",i.dataset.value=e,i.dataset.commentUrl=r||"",i.dataset.frameId=o||"",i.innerHTML=n,i})))),new MutationObserver((function(){e.getBoundingClientRect().bottom>window.innerHeight&&(e.style.transform="translateY(-100%)",e.style.marginTop="-12px")})).observe(e,{attributes:!0,attributeFilter:["style"]}),{matched:Boolean(t.length),fragment:e}})))},t.onTextExpanderValue=function(t){var e=t.detail.item;t.detail.value="@"+e.dataset.value.replace(/ /g," ");var n=e.dataset,r=n.commentUrl,i=n.frameId;r&&o.visit(r,{frame:i})},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){this.element.addEventListener("text-expander-change",this.onTextExpanderChange),this.element.addEventListener("text-expander-value",this.onTextExpanderValue)}},{key:"disconnect",value:function(){this.element.removeEventListener("text-expander-change",this.onTextExpanderChange),this.element.removeEventListener("text-expander-value",this.onTextExpanderValue)}}])&&c(n.prototype,r),i&&c(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI);p.values={userLookupUrl:String}},4608:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){this.frameTarget.removeAttribute("disabled")}},{key:"loading",value:function(){this.element.open||(this.frameTarget.hidden=!0,this.loadingTarget.hidden=!1),this.show()}},{key:"loaded",value:function(){this.frameTarget.hidden=!1,this.loadingTarget.hidden=!0,this.frameTarget.children.length?this.show():this.hide()}},{key:"show",value:function(){this.element.open||(this.element.open=!0)}},{key:"hide",value:function(t){t instanceof MouseEvent&&t.preventDefault(),this.element.open&&this.element.close()}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI);l.targets=["frame","loading"]},4254:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"open",value:function(t){this.badgeTarget.hidden||(this.badgeTarget.hidden=!0,this.frameTarget.reload()),Waterhole.alerts.dismiss("notification"),"none"===getComputedStyle(this.smTarget).display&&(window.Turbo.visit(t.currentTarget.href),this.element.open=!1)}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI);l.targets=["badge","frame","sm"]},160:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=n(2891),o=n(6877);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function c(t,e,n){return e=l(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,(r=[{key:"initialize",value:function(){var t=this;this.observer=new IntersectionObserver((function(e){t.hasBreadcrumbTarget&&(t.hideBreadcrumb&&cancelAnimationFrame(t.hideBreadcrumb),t.breadcrumbTarget.hidden=e[0].isIntersecting,e[0].isIntersecting||(t.breadcrumbTarget.innerHTML=e[0].target.innerHTML||""))}),{rootMargin:"-".concat((0,o.vF)(),"px")})}},{key:"connect",value:function(){var t=this;this.hideBreadcrumb=requestAnimationFrame((function(){t.hasBreadcrumbTarget&&(t.breadcrumbTarget.hidden=!0)}))}},{key:"titleTargetConnected",value:function(t){this.observer.observe(t)}},{key:"titleTargetDisconnected",value:function(){this.observer.disconnect()}},{key:"incrementDocumentTitle",value:function(){Waterhole.documentTitle.increment()}},{key:"closeModal",value:function(){var t;null===(t=document.querySelector("#modal-element"))||void 0===t||t.close()}}])&&s(n.prototype,r),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI);f.targets=["breadcrumb","title"]},3227:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"appearAsRead",value:function(){this.element.classList.contains("is-unread")&&(this.element.classList.remove("is-unread","is-new"),this.element.classList.add("is-read"))}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI)},8960:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var r=n(2891),o=n(9734),i=n(6877);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}function u(t,e,n){return e=h(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],h(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){var t,e=this;null===(t=this.channelsValue)||void 0===t||t.forEach((function(t){var n,r=(null===(n=e.publicChannelsValue)||void 0===n?void 0:n.includes(t))?"channel":"private";window.Echo[r]("Waterhole.Models.Channel.".concat(t)).listen("NewComment",(function(){"latest"===e.filterValue&&e.showNewActivity()})).listen("NewPost",(function(){"newest"!==e.filterValue&&"latest"!==e.filterValue||e.showNewActivity()}))}))}},{key:"disconnect",value:function(){var t;null===(t=this.channelsValue)||void 0===t||t.forEach((function(t){window.Echo.leave("Waterhole.Models.Channel.".concat(t))}))}},{key:"showNewActivity",value:function(){this.newActivityTarget&&(this.newActivityTarget.hidden=!1,Waterhole.documentTitle.increment())}},{key:"scrollToTop",value:function(){var t=(0,i.vF)()+20;this.element.getBoundingClientRect().top<t&&(0,o.A)(this.element,{verticalOffset:-t})}}])&&a(n.prototype,r),s&&a(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(r.xI);d.targets=["newActivity"],d.values={filter:String,channels:Array,publicChannels:Array}},8629:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var r=n(2891),o=n(89),i=n(6877);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}function u(t,e,n){return e=h(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],h(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}var d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=u(this,e,arguments)).showPostOnFirstPage=function(){document.getElementById("page_1")&&(t.postTarget.hidden=!1)},t.beforeStreamRender=function(e){var n,r=e.target;"remove"===r.action&&(null===(n=r.targets)||void 0===n?void 0:n.endsWith("post_"+t.idValue))&&(window.history.back(),window.addEventListener("popstate",(function(){window.requestAnimationFrame((function(){(0,o.renderStreamMessage)(r.outerHTML)}))}),{once:!0}),e.preventDefault())},t.onScroll=function(){setTimeout((function(){var e;t.hasCurrentPageTarget&&(t.currentPageTarget.textContent=(null===(e=t.element.querySelector('.comments-pagination [aria-current="page"]'))||void 0===e?void 0:e.textContent)||"1")})),t.hasCommentsLinkTarget&&t.hasCommentsPaginationTarget&&(t.commentsLinkTarget.hidden=t.postTarget.getBoundingClientRect().bottom<(0,i.vF)()+10,t.commentsPaginationTarget.hidden=!t.commentsLinkTarget.hidden)},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){document.addEventListener("turbo:before-stream-render",this.beforeStreamRender),document.addEventListener("turbo:frame-render",this.showPostOnFirstPage),window.addEventListener("scroll",this.onScroll,{passive:!0}),this.onScroll()}},{key:"disconnect",value:function(){document.removeEventListener("turbo:before-stream-render",this.beforeStreamRender),document.removeEventListener("turbo:frame-render",this.showPostOnFirstPage),window.removeEventListener("scroll",this.onScroll)}}])&&a(n.prototype,r),s&&a(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(r.xI);d.targets=["post","currentPage","commentsLink","commentsPagination"],d.values={id:Number}},222:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(3901),o=n(5361),i=n(2891);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(){a=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new j(r||[]);return o(s,"_invoke",{value:P(t,n,a)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",m="suspendedYield",v="executing",y="completed",b={};function g(){}function w(){}function E(){}var S={};h(S,c,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(R([])));k&&k!==n&&r.call(k,c)&&(S=k);var T=E.prototype=g.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(o,i,a,c){var u=d(t[o],t,i);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,n,r){var o=p;return function(i,s){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=A(a,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(e,n,r);if("normal"===u.type){if(o=r.done?y:m,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function A(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(s(e)+" is not iterable")}return w.prototype=E,o(T,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=h(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},x(L.prototype),h(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new L(f(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(T),h(T,l,"Generator"),h(T,c,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}function l(t,e,n){return e=f(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h()?Reflect.construct(e,n||[],f(t).constructor):e.apply(t,n))}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var p=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},m=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=l(this,e,arguments)).handleSelectionChange=function(){setTimeout(t.updateQuoteButton.bind(t),100)},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),n=e,(i=[{key:"connect",value:function(){document.addEventListener("mouseup",this.handleSelectionChange)}},{key:"disconnect",value:function(){document.removeEventListener("mouseup",this.handleSelectionChange)}},{key:"updateQuoteButton",value:function(){return p(this,void 0,void 0,a().mark((function t(){var e,n,i,s,c,u,l,h,f,d,p=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasButtonTarget){t.next=2;break}return t.abrupt("return");case 2:if(this.buttonTarget.hidden=!0,(e=window.getSelection())&&!e.isCollapsed&&e.anchorNode&&e.focusNode){t.next=6;break}return t.abrupt("return");case 6:if(n=e.getRangeAt(0),(i=n.commonAncestorContainer)===this.element||this.element.contains(i)){t.next=10;break}return t.abrupt("return");case 10:this.buttonTarget.hidden=!1,this.buttonTarget.style.position="absolute",this.buttonTarget.style.zIndex="var(--z-index-overlay)",s=e.anchorNode.compareDocumentPosition(e.focusNode),c=n.getClientRects(),s&Node.DOCUMENT_POSITION_PRECEDING||!s&&e.focusOffset<e.anchorOffset?(h=c[0],u=new DOMRect(h.left,h.top),l="top"):(f=c[c.length-1],u=new DOMRect(f.right,f.bottom),l="bottom"),d={getBoundingClientRect:function(){return u}},(0,r.rD)(d,this.buttonTarget,{placement:l,middleware:[(0,o.cY)(10),(0,r.BN)(),(0,r.UU)()]}).then((function(t){var e=t.x,n=t.y;Object.assign(p.buttonTarget.style,{left:"".concat(e,"px"),top:"".concat(n,"px")})}));case 18:case"end":return t.stop()}}),t,this)})))}},{key:"quoteSelectedText",value:function(){var t=this,e=document.createElement("div"),n=window.getSelection();n&&(e.appendChild(n.getRangeAt(0).cloneContents()),e.querySelectorAll("img").forEach((function(t){return t.replaceWith(t.alt)})),n.removeAllRanges(),setTimeout((function(){t.dispatch("quote-text",{detail:{text:e.textContent},bubbles:!0,cancelable:!0})})))}}])&&c(n.prototype,i),s&&c(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(i.xI);m.targets=["button"]},4582:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=s(this,e,arguments)).toggle=function(e){var n=e.target,r=n.value;n instanceof HTMLInputElement&&["checkbox","radio"].includes(n.type)&&!n.checked&&(r=""),t.thenTargets.forEach((function(t){if(t.dataset.revealValue){var e=t.dataset.revealValue;try{e=JSON.parse(e)}catch(t){}finally{e=Array.isArray(e)?e.map((function(t){return String(t)})):[t.dataset.revealValue]}t.hidden=!e.includes(r)}else t.hidden=!r}))},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"ifTargetConnected",value:function(t){t.addEventListener("change",this.toggle),("radio"!==t.type||t.checked)&&t.dispatchEvent(new Event("change"))}},{key:"ifTargetDisconnected",value:function(t){t.removeEventListener("change",this.toggle)}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI);l.targets=["if","then"]},7452:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=n(2891),o=n(6877);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function c(t,e,n){return e=l(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=c(this,e,arguments)).onScroll=function(){var e=Array.from(t.links()),n=(0,o.vF)();e.forEach((function(t){return t.removeAttribute("aria-current")})),e.reverse().some((function(e){var r=e.hash.substring(1);if(r){var o=document.getElementById(r);return o&&o.getBoundingClientRect().top<=n+100?(e.setAttribute("aria-current","page"),t.current!==e&&t.element&&t.element.scroll({top:e.offsetTop+e.offsetHeight/2-t.element.offsetHeight/2,left:e.offsetLeft+e.offsetWidth/2-t.element.offsetWidth/2,behavior:t.current?"smooth":"auto"}),t.current=e,!0):void 0}}))},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){this.onScroll(),window.addEventListener("scroll",this.onScroll)}},{key:"disconnect",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"links",value:function(){return this.element.querySelectorAll('a[href*="#"]')}}])&&s(n.prototype,r),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI)},3207:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>H});var r=n(2891);const o=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const i="object"==typeof global&&global&&global.Object===Object&&global;var s="object"==typeof self&&self&&self.Object===Object&&self;const a=i||s||Function("return this")();const c=function(){return a.Date.now()};var u=/\s/;const l=function(t){for(var e=t.length;e--&&u.test(t.charAt(e)););return e};var h=/^\s+/;const f=function(t){return t?t.slice(0,l(t)+1).replace(h,""):t};const d=a.Symbol;var p=Object.prototype,m=p.hasOwnProperty,v=p.toString,y=d?d.toStringTag:void 0;const b=function(t){var e=m.call(t,y),n=t[y];try{t[y]=void 0;var r=!0}catch(t){}var o=v.call(t);return r&&(e?t[y]=n:delete t[y]),o};var g=Object.prototype.toString;const w=function(t){return g.call(t)};var E=d?d.toStringTag:void 0;const S=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":E&&E in Object(t)?b(t):w(t)};const O=function(t){return null!=t&&"object"==typeof t};const k=function(t){return"symbol"==typeof t||O(t)&&"[object Symbol]"==S(t)};var T=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,L=/^0o[0-7]+$/i,P=parseInt;const A=function(t){if("number"==typeof t)return t;if(k(t))return NaN;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=f(t);var n=x.test(t);return n||L.test(t)?P(t.slice(2),n?2:8):T.test(t)?NaN:+t};var C=Math.max,_=Math.min;const j=function(t,e,n){var r,i,s,a,u,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,o=i;return r=i=void 0,h=e,a=t.apply(o,n)}function v(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-h>=s}function y(){var t=c();if(v(t))return b(t);u=setTimeout(y,function(t){var n=e-(t-l);return d?_(n,s-(t-h)):n}(t))}function b(t){return u=void 0,p&&r?m(t):(r=i=void 0,a)}function g(){var t=c(),n=v(t);if(r=arguments,i=this,l=t,n){if(void 0===u)return function(t){return h=t,u=setTimeout(y,e),f?m(t):a}(l);if(d)return clearTimeout(u),u=setTimeout(y,e),m(l)}return void 0===u&&(u=setTimeout(y,e)),a}return e=A(e)||0,o(n)&&(f=!!n.leading,s=(d="maxWait"in n)?C(A(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),g.cancel=function(){void 0!==u&&clearTimeout(u),h=0,r=l=i=u=void 0},g.flush=function(){return void 0===u?a:b(c())},g};function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N(r.key),r)}}function N(t){var e=function(t,e){if("object"!=R(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R(e)?e:e+""}function I(t,e,n){return e=D(e),function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,n||[],D(t).constructor):e.apply(t,n))}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}var H=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=I(this,e,arguments)).input=j(t.submit,250),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(e,t),n=e,(r=[{key:"submit",value:function(){var t;null===(t=this.submitTarget)||void 0===t||t.click()}},{key:"frameTargetConnected",value:function(t){t.addEventListener("turbo:before-frame-render",(function(e){t.hidden=!e.detail.newFrame.children.length}))}}])&&M(n.prototype,r),o&&M(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(r.xI);H.targets=["submit","frame"]},2345:(t,e,n)=>{"use strict";function r(t,e){var n,r,o;const i=t.value.slice(0,null!==(n=t.selectionStart)&&void 0!==n?n:void 0),s=t.value.slice(null!==(r=t.selectionEnd)&&void 0!==r?r:void 0);let a=!0;t.contentEditable="true";try{a=document.execCommand("insertText",!1,e)}catch(t){a=!1}if(t.contentEditable="false",a&&!t.value.slice(0,null!==(o=t.selectionStart)&&void 0!==o?o:void 0).endsWith(e)&&(a=!1),!a){try{document.execCommand("ms-beginUndoUnit")}catch(t){}t.value=i+e+s;try{document.execCommand("ms-endUndoUnit")}catch(t){}t.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0}))}}n.r(e),n.d(e,{default:()=>G});const o=new WeakMap;function i(t){const{currentTarget:e}=t,n="KeyV"===t.code&&(t.ctrlKey||t.metaKey)&&t.shiftKey;(n||n&&t.altKey)&&o.set(e,!0)}function s(t){const{currentTarget:e}=t;o.delete(e)}function a(t){var e;return null!==(e=o.get(t))&&void 0!==e&&e}function c(t){t.addEventListener("paste",u)}function u(t){const e=t.clipboardData,{currentTarget:n}=t;if(a(n))return;if(!e||!function(t){return t.types.includes("text/html")}(e))return;const o=t.currentTarget;if(!(o instanceof HTMLTextAreaElement))return;if(function(t){const e=t.selectionStart||0;if(0===e)return!1;return"@"===t.value.substring(e-1,e)}(o))return;let i=e.getData("text/plain");const s=e.getData("text/html"),c=s.replace(/\u00A0/g," ").replace(/\uC2A0/g," ");if(!s)return;if(i=i.trim(),!i)return;const u=(new DOMParser).parseFromString(c,"text/html"),d=function(t,e){let n=e.firstChild(),r=t,o=0,i=0;const s=1e4;for(;n&&i<s;){i++;const t=h(n)?(n.textContent||"").replace(/[\t\n\r ]+/g," "):(null==n?void 0:n.wholeText)||"";if(l(t)){n=e.nextNode();continue}if(!h(n)){o+=t.replace(/[\t\n\r ]+/g," ").trimStart().length,n=e.nextNode();continue}const s=r.indexOf(t,o);if(s>=0){const e=f(n,t);r=r.slice(0,s)+e+r.slice(s+t.length),o=s+e.length}n=e.nextNode()}return i===s?t:r}(i,u.createTreeWalker(u.body,NodeFilter.SHOW_ALL,(t=>t.parentNode&&h(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT)));d!==i&&(t.stopPropagation(),t.preventDefault(),r(o,d))}function l(t){return!t||0===(null==t?void 0:t.trim().length)}function h(t){var e;return"a"===(null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase())&&t.hasAttribute("href")}function f(t,e){const n=t.href||"";let r="";var o,i,s,a;return r="@"===(null===(a=(s=t).textContent)||void 0===a?void 0:a.slice(0,1))&&"user"===s.getAttribute("data-hovercard-type")||function(t){var e;return"@"===(null===(e=t.textContent)||void 0===e?void 0:e.slice(0,1))&&"team"===t.getAttribute("data-hovercard-type")}(t)?e:function(t){return t.className.indexOf("commit-link")>=0||!!t.getAttribute("data-hovercard-type")&&"user"!==t.getAttribute("data-hovercard-type")}(t)||(i=e,o="/"===(o=n).slice(-1)?o.slice(0,-1):o,i="/"===i.slice(-1)?i.slice(0,-1):i,o.toLowerCase()===i.toLowerCase())?n:`[${e}](${n})`,r}function d(t){t.addEventListener("dragover",m),t.addEventListener("drop",p),t.addEventListener("paste",v)}function p(t){const e=t.dataTransfer;if(!e)return;if(function(t){return Array.from(t.types).indexOf("Files")>=0}(e))return;if(!b(e))return;const n=g(e);if(!n.some(E))return;t.stopPropagation(),t.preventDefault();const o=t.currentTarget;o instanceof HTMLTextAreaElement&&r(o,n.map(y).join(""))}function m(t){const e=t.dataTransfer;e&&(e.dropEffect="link")}function v(t){const{currentTarget:e}=t;if(a(e))return;const n=t.clipboardData;if(!n||!b(n))return;const o=g(n);if(!o.some(E))return;t.stopPropagation(),t.preventDefault();const i=t.currentTarget;i instanceof HTMLTextAreaElement&&r(i,o.map(y).join(""))}function y(t){return E(t)?`\n![](${t})\n`:t}function b(t){return Array.from(t.types).indexOf("text/uri-list")>=0}function g(t){return(t.getData("text/uri-list")||"").split("\r\n")}const w=/\.(gif|png|jpe?g)$/i;function E(t){return w.test(t)}const S=new WeakMap;function O(t,e){var n;S.set(t,!0===(null===(n=null==e?void 0:e.defaultPlainTextPaste)||void 0===n?void 0:n.urlLinks)),t.addEventListener("paste",k)}function k(t){var e;const{currentTarget:n}=t,o=n,i=null!==(e=S.get(o))&&void 0!==e&&e,s=a(o);if(!i&&s||i&&!s)return;const c=t.clipboardData;if(!c||!function(t){return Array.from(t.types).includes("text/plain")}(c))return;const u=t.currentTarget;if(!(u instanceof HTMLTextAreaElement))return;const l=c.getData("text/plain");if(!l)return;if(!T(l))return;if(function(t){const e=t.selectionStart||0;if(e>1){return"]("===t.value.substring(e-2,e)}return!1}(u))return;const h=u.value.substring(u.selectionStart,u.selectionEnd);h.length&&(T(h.trim())||(t.stopPropagation(),t.preventDefault(),r(u,function(t,e){return`[${t}](${e})`}(h,l.trim()))))}function T(t){try{return x(new URL(t).href).trim()===x(t).trim()}catch(t){return!1}}function x(t){return t.endsWith("/")?t.slice(0,t.length-1):t}function L(t){t.addEventListener("dragover",A),t.addEventListener("drop",P),t.addEventListener("paste",C)}function P(t){const e=t.dataTransfer;if(!e)return;if(function(t){return Array.from(t.types).indexOf("Files")>=0}(e))return;const n=R(e);if(!n)return;t.stopPropagation(),t.preventDefault();const o=t.currentTarget;o instanceof HTMLTextAreaElement&&r(o,n)}function A(t){const e=t.dataTransfer;e&&(e.dropEffect="copy")}function C(t){const{currentTarget:e}=t;if(a(e))return;if(!t.clipboardData)return;const n=R(t.clipboardData);if(!n)return;t.stopPropagation(),t.preventDefault();const o=t.currentTarget;o instanceof HTMLTextAreaElement&&r(o,n)}function _(t){return(t.textContent||"").trim().replace(/\|/g,"\\|").replace(/\n/g," ")||" "}function j(t){const e=Array.from(t.querySelectorAll("tr")),n=e.shift();if(!n)return"";const r=(o=n,Array.from(o.querySelectorAll("td, th")).map(_));var o;const i=r.map((()=>"--")),s=`${r.join(" | ")}\n${i.join(" | ")}\n`,a=e.map((t=>Array.from(t.querySelectorAll("td")).map(_).join(" | "))).join("\n");return`\n${s}${a}\n\n`}function R(t){if(-1===Array.from(t.types).indexOf("text/html"))return;const e=t.getData("text/html");if(!/<table/i.test(e))return;const n=e.substring(0,e.indexOf("<table")),r=e.lastIndexOf("</table>");if(!n||!r)return;const o=e.substring(r+8);let i=(new DOMParser).parseFromString(e,"text/html").querySelector("table");if(i=!i||i.closest("[data-paste-markdown-skip]")?null:i,!i)return;const s=j(i);return s?[n,s,o].join("").replace(/<meta.*?>/,""):void 0}function M(t){t.addEventListener("paste",N)}function N(t){const{currentTarget:e}=t;if(a(e))return;const n=t.clipboardData;if(!n||!function(t){return Array.from(t.types).indexOf("text/x-gfm")>=0}(n))return;const o=t.currentTarget;if(!(o instanceof HTMLTextAreaElement))return;const i=n.getData("text/x-gfm");i&&(t.stopPropagation(),t.preventDefault(),r(o,i))}function I(t,e){return function(t,e,n){t.addEventListener("keydown",i);for(const r of e)r(t,n);t.addEventListener("paste",s)}(t,[L,d,O,M,c],e),{unsubscribe:()=>{!function(t){t.removeEventListener("keydown",i),t.removeEventListener("paste",s)}(t),function(t){t.removeEventListener("dragover",A),t.removeEventListener("drop",P),t.removeEventListener("paste",C)}(t),function(t){t.removeEventListener("paste",u)}(t),function(t){t.removeEventListener("dragover",m),t.removeEventListener("drop",p),t.removeEventListener("paste",v)}(t),function(t){t.removeEventListener("paste",k)}(t),function(t){t.removeEventListener("paste",N)}(t)}}}var F=n(2891),D=n(9315);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function H(){H=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,s=Object.create(i.prototype),a=new C(r||[]);return o(s,"_invoke",{value:x(t,n,a)}),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function y(){}function b(){}function g(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(_([])));S&&S!==n&&r.call(S,s)&&(w=S);var O=g.prototype=y.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,i,s,a){var c=h(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==B(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,n,r){var o=f;return function(i,s){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=h(e,n,r);if("normal"===u.type){if(o=r.done?m:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function L(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function _(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(B(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(T.prototype),u(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new T(l(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:_(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U(r.key),r)}}function U(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B(e)?e:e+""}function V(t,e,n){return e=$(e),function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,W()?Reflect.construct(e,n||[],$(t).constructor):e.apply(t,n))}function W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(W=function(){return!!t})()}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}var K=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},G=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(e,t),n=e,(r=[{key:"inputTargetConnected",value:function(t){this.editor=new D.Ay(t),this.pasteMarkdown=I(t)}},{key:"inputTargetDisconnected",value:function(){var t;null===(t=this.pasteMarkdown)||void 0===t||t.unsubscribe()}},{key:"hotkeyLabelTargetConnected",value:function(t){var e=navigator.userAgent.match(/Macintosh/);t.innerText=t.innerText.split("+").map((function(t){return"Meta"===t?e?"⌘":"Ctrl":"Shift"===t&&e?"⇧":"Alt"===t&&e?"⌥":1===t.length?t.toUpperCase():t})).join(e?"":"-")}},{key:"format",value:function(t){var e;t.preventDefault(),null===(e=this.editor)||void 0===e||e.toggle(t.params.format)}},{key:"togglePreview",value:function(){var t;return K(this,void 0,void 0,H().mark((function e(){var n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inputTarget&&this.previewTarget){e.next=2;break}return e.abrupt("return");case 2:if(n=!this.inputTarget.hidden,this.inputTarget.hidden=n,this.previewTarget.hidden=!n,null===(t=this.previewButtonTarget)||void 0===t||t.setAttribute("aria-pressed",String(n)),this.element.classList.toggle("is-previewing",n),n){e.next=9;break}return e.abrupt("return");case 9:return this.previewTarget.setAttribute("aria-busy","true"),e.next=12,Waterhole.fetch.post(this.formatUrlValue,{body:this.inputTarget.value}).text();case 12:this.previewTarget.innerHTML=e.sent,this.previewTarget.hidden=!1,this.previewTarget.setAttribute("aria-busy","false");case 15:case"end":return e.stop()}}),e,this)})))}},{key:"insertQuote",value:function(t){if(this.inputTarget&&this.editor){var e=(this.inputTarget.selectionStart>0?"\n\n":"")+"> ";this.editor.insert(e+t.detail.text.replace(/\n/g,"\n> ")+"\n\n")}}},{key:"insertEmoji",value:function(t){var e;null===(e=this.editor)||void 0===e||e.insert(t.detail.unicode||""),t.target.closest("ui-popup").open=!1}}])&&q(n.prototype,r),o&&q(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(F.xI);G.targets=["input","preview","previewButton","hotkeyLabel"],G.values={formatUrl:String}},1068:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=n(2891);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}function a(t,e,n){return e=u(e),function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}var h="theme",f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){var t=this;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){localStorage.getItem(h)||t.apply(e.matches?"dark":"light")})),this.updateMenuItems()}},{key:"set",value:function(t){var e=t.params.name;e?(localStorage.setItem(h,e),this.apply(e)):(localStorage.removeItem(h),this.apply(matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),this.updateMenuItems(),this.dispatch("change",{detail:{name:e}})}},{key:"apply",value:function(t){document.documentElement.dataset.theme=t}},{key:"updateMenuItems",value:function(){var t=localStorage.getItem(h)||"";this.element.querySelectorAll("[data-theme-name-param]").forEach((function(e){e.setAttribute("aria-checked",e.getAttribute("data-theme-name-param")===t?"true":"false")}))}}])&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(r.xI)},9849:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){this.element.scrollHeight>this.element.offsetHeight&&(this.expanderTarget.hidden=!1)}},{key:"expand",value:function(){this.element.style.maxHeight="none",this.expanderTarget.hidden=!0}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI);l.targets=["expander"]},9631:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function c(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}n.r(e),n.d(e,{default:()=>f});var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){this.element.id||(this.element.id=this.element.dataset.id||"")}},{key:"reload",value:function(){this.element.reload()}},{key:"disable",value:function(){this.element.disabled=!0}},{key:"removeSrc",value:function(){this.element.removeAttribute("src")}},{key:"remove",value:function(){var t;(t=this.element).replaceWith.apply(t,o(this.element.children))}}])&&s(n.prototype,r),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI)},8821:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var r=n(2891),o=n(9315);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(){s=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new j(r||[]);return o(s,"_invoke",{value:P(t,n,a)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",m="suspendedYield",v="executing",y="completed",b={};function g(){}function w(){}function E(){}var S={};h(S,c,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(R([])));k&&k!==n&&r.call(k,c)&&(S=k);var T=E.prototype=g.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(o,s,a,c){var u=d(t[o],t,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var s;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return s=s?s.then(o,o):o()}})}function P(e,n,r){var o=p;return function(i,s){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=A(a,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(e,n,r);if("normal"===u.type){if(o=r.done?y:m,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function A(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=E,o(T,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=h(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,h(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},x(L.prototype),h(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new L(f(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(T),h(T,l,"Generator"),h(T,c,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function u(t,e,n){return e=h(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],h(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}var d=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},p=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=u(this,e,arguments)).onDrop=function(e){var n;(null===(n=e.dataTransfer)||void 0===n?void 0:n.files.length)&&(e.preventDefault(),Array.from(e.dataTransfer.files).forEach((function(e){return t.uploadFile(e)})))},t.onPaste=function(e){var n;(null===(n=e.clipboardData)||void 0===n?void 0:n.files.length)&&(e.preventDefault(),Array.from(e.clipboardData.files).forEach((function(e){return t.uploadFile(e)})))},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){this.editor=new o.Ay(this.inputTarget),this.inputTarget.addEventListener("drop",this.onDrop),this.inputTarget.addEventListener("paste",this.onPaste)}},{key:"disconnect",value:function(){this.inputTarget.removeEventListener("drop",this.onDrop),this.inputTarget.removeEventListener("paste",this.onPaste)}},{key:"chooseFiles",value:function(){var t=this,e=document.createElement("input");e.type="file",e.multiple=!0,e.hidden=!0,document.body.appendChild(e),e.addEventListener("change",(function(){e.files&&Array.from(e.files).forEach((function(e){return t.uploadFile(e)}))})),e.click(),e.remove()}},{key:"uploadFile",value:function(t){var e;return d(this,void 0,void 0,s().mark((function n(){var r,o,i,a,c,u,l,h;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.type.startsWith("image/")?"!":"",o="".concat(r,"[Uploading ").concat(t.name,"]()\n"),i="",null===(e=this.editor)||void 0===e||e.insert(o),(a=new FormData).append("file",t),n.prev=6,n.next=9,Waterhole.fetch.post(this.urlValue,{body:a}).json();case 9:c=n.sent,i="".concat(r,"[").concat(t.name,"](").concat(c.url,")\n"),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(6);case 15:if(-1!==(u=this.inputTarget.value.indexOf(o))&&this.editor){n.next=18;break}return n.abrupt("return");case 18:l=i.length-o.length,h=this.editor.range(),this.editor.range([u,u+o.length]).insert(i).range([h[0]+l,h[1]+l]);case 21:case"end":return n.stop()}}),n,this,[[6,13]])})))}}])&&a(n.prototype,r),i&&a(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI);p.targets=["input"],p.values={url:String}},7784:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function s(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>l});var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=s(this,e,arguments)).onScroll=function(){var e=t.element;e.classList.toggle("is-scrolled-down",e.scrollTop>0),e.classList.toggle("is-scrolled-right",e.scrollLeft>0),e.classList.toggle("is-scrolled-up",e.scrollTop<e.scrollHeight-e.offsetHeight),e.classList.toggle("is-scrolled-left",e.scrollLeft<e.scrollWidth-e.offsetWidth)},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){var t=this;this.element.addEventListener("scroll",this.onScroll,{passive:!0}),this.observer=new ResizeObserver((function(){return t.onScroll()})),this.observer.observe(this.element)}},{key:"disconnect",value:function(){var t;this.element.removeEventListener("scroll",this.onScroll),null===(t=this.observer)||void 0===t||t.disconnect()}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(n(2891).xI)},2073:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=n(2891);class o{el;callback;options;observer;constructor(t,e,n={}){this.el=t,this.callback=e,this.options=n,this.start()}start(){this.stop();const t=getComputedStyle(this.el),e=["top","right","bottom","left"].map((e=>"auto"===t[e]?"100%":-1*parseInt(t[e])-1+"px")).join(" ");this.observer=new IntersectionObserver((t=>{this.callback(!t[0].isIntersecting,this.el)}),{threshold:[1],rootMargin:e,root:this.options.root}),this.observer.observe(this.el)}stop(){this.observer?.disconnect()}}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function c(t,e,n){return e=l(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,(r=[{key:"connect",value:function(){var t=this;this.observer=new o(this.element,(function(e){t.element.classList.toggle("is-stuck",e),t.element.classList.toggle("is-unstuck",!e)}))}},{key:"disconnect",value:function(){var t;null===(t=this.observer)||void 0===t||t.stop()}}])&&s(n.prototype,r),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI)},5805:(t,e,n)=>{"use strict";var r,o=function(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n},i=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};const s="undefined"!=typeof Intl&&Intl.ListFormat||class{formatToParts(t){const e=[];for(const n of t)e.push({type:"element",value:n}),e.push({type:"literal",value:", "});return e.slice(0,-1)}},a=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],c={minimumIntegerDigits:2};class u{constructor(t,e={}){r.set(this,void 0);let n=String(e.style||"short");"long"!==n&&"short"!==n&&"narrow"!==n&&"digital"!==n&&(n="short");let i="digital"===n?"numeric":n;const s=e.hours||i;i="2-digit"===s?"numeric":s;const a=e.minutes||i;i="2-digit"===a?"numeric":a;const c=e.seconds||i;i="2-digit"===c?"numeric":c;const u=e.milliseconds||i;o(this,r,{locale:t,style:n,years:e.years||"digital"===n?"short":n,yearsDisplay:"always"===e.yearsDisplay?"always":"auto",months:e.months||"digital"===n?"short":n,monthsDisplay:"always"===e.monthsDisplay?"always":"auto",weeks:e.weeks||"digital"===n?"short":n,weeksDisplay:"always"===e.weeksDisplay?"always":"auto",days:e.days||"digital"===n?"short":n,daysDisplay:"always"===e.daysDisplay?"always":"auto",hours:s,hoursDisplay:"always"===e.hoursDisplay||"digital"===n?"always":"auto",minutes:a,minutesDisplay:"always"===e.minutesDisplay||"digital"===n?"always":"auto",seconds:c,secondsDisplay:"always"===e.secondsDisplay||"digital"===n?"always":"auto",milliseconds:u,millisecondsDisplay:"always"===e.millisecondsDisplay?"always":"auto"},"f")}resolvedOptions(){return i(this,r,"f")}formatToParts(t){const e=[],n=i(this,r,"f"),o=n.style,u=n.locale;for(const[r,o]of a){const i=t[r];if("auto"===n[`${r}Display`]&&!i)continue;const s=n[r],a="2-digit"===s?c:"numeric"===s?{}:{style:"unit",unit:o,unitDisplay:s};e.push(new Intl.NumberFormat(u,a).format(i))}return new s(u,{type:"unit",style:"digital"===o?"short":o}).formatToParts(e)}format(t){return this.formatToParts(t).map((t=>t.value)).join("")}}r=new WeakMap;const l=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,h=["year","month","week","day","hour","minute","second","millisecond"];class f{constructor(t=0,e=0,n=0,r=0,o=0,i=0,s=0,a=0){this.years=t,this.months=e,this.weeks=n,this.days=r,this.hours=o,this.minutes=i,this.seconds=s,this.milliseconds=a,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=0===this.sign}abs(){return new f(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){var e;if("string"==typeof t){const n=String(t).trim(),r=n.startsWith("-")?-1:1,o=null===(e=n.match(l))||void 0===e?void 0:e.slice(1).map((t=>(Number(t)||0)*r));return o?new f(...o):new f}if("object"==typeof t){const{years:e,months:n,weeks:r,days:o,hours:i,minutes:s,seconds:a,milliseconds:c}=t;return new f(e,n,r,o,i,s,a,c)}throw new RangeError("invalid duration")}static compare(t,e){const n=Date.now(),r=Math.abs(d(n,f.from(t)).getTime()-n),o=Math.abs(d(n,f.from(e)).getTime()-n);return r>o?-1:r<o?1:0}toLocaleString(t,e){return new u(t,e).format(this)}}function d(t,e){const n=new Date(t);return n.setFullYear(n.getFullYear()+e.years),n.setMonth(n.getMonth()+e.months),n.setDate(n.getDate()+7*e.weeks+e.days),n.setHours(n.getHours()+e.hours),n.setMinutes(n.getMinutes()+e.minutes),n.setSeconds(n.getSeconds()+e.seconds),n}function p(t,{relativeTo:e=Date.now()}={}){if(e=new Date(e),t.blank)return t;const n=t.sign;let r=Math.abs(t.years),o=Math.abs(t.months),i=Math.abs(t.weeks),s=Math.abs(t.days),a=Math.abs(t.hours),c=Math.abs(t.minutes),u=Math.abs(t.seconds),l=Math.abs(t.milliseconds);l>=900&&(u+=Math.round(l/1e3)),(u||c||a||s||i||o||r)&&(l=0),u>=55&&(c+=Math.round(u/60)),(c||a||s||i||o||r)&&(u=0),c>=55&&(a+=Math.round(c/60)),(a||s||i||o||r)&&(c=0),s&&a>=12&&(s+=Math.round(a/24)),!s&&a>=21&&(s+=Math.round(a/24)),(s||i||o||r)&&(a=0);const h=e.getFullYear();let d=e.getMonth();const p=e.getDate();if(s>=27||r+o+s){const t=new Date(e);t.setFullYear(h+r*n),t.setMonth(d+o*n),t.setDate(p+s*n);const a=t.getFullYear()-e.getFullYear(),c=t.getMonth()-e.getMonth(),u=Math.abs(Math.round((Number(t)-Number(e))/864e5)),l=Math.abs(12*a+c);u<27?(s>=6?(i+=Math.round(s/7),s=0):s=u,o=r=0):l<11?(o=l,r=0):(o=0,r=a*n),(o||r)&&(s=0),d=e.getMonth()}return r&&(o=0),i>=4&&(o+=Math.round(i/4)),(o||r)&&(i=0),s&&i&&!o&&!r&&(i+=Math.round(s/7),s=0),new f(r*n,o*n,i*n,s*n,a*n,c*n,u*n,l*n)}var m,v,y,b,g,w,E,S,O,k,T,x=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},L=function(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n};const P=globalThis.HTMLElement||null,A=new f,C=new f(0,0,0,0,0,1);class _ extends Event{constructor(t,e,n,r){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=t,this.newText=e,this.oldTitle=n,this.newTitle=r}}function j(t){if(!t.date)return 1/0;if("duration"===t.format||"elapsed"===t.format){const e=t.precision;if("second"===e)return 1e3;if("minute"===e)return 6e4}const e=Math.abs(Date.now()-t.date.getTime());return e<6e4?1e3:e<36e5?6e4:36e5}const R=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(t){if(this.elements.has(t))return;this.elements.add(t);const e=t.date;if(e&&e.getTime()){const e=j(t),n=Date.now()+e;n<this.time&&(clearTimeout(this.timer),this.timer=setTimeout((()=>this.update()),e),this.time=n)}}unobserve(t){this.elements.has(t)&&this.elements.delete(t)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let t=1/0;for(const e of this.elements)t=Math.min(t,j(e)),e.update();this.time=Math.min(36e5,t),this.timer=setTimeout((()=>this.update()),this.time),this.time+=Date.now()}};class M extends P{constructor(){super(...arguments),m.add(this),v.set(this,!1),y.set(this,!1),g.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),T.set(this,null)}static define(t="relative-time",e=customElements){return e.define(t,this),this}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","datetime","lang","title"]}get onRelativeTimeUpdated(){return x(this,T,"f")}set onRelativeTimeUpdated(t){x(this,T,"f")&&this.removeEventListener("relative-time-updated",x(this,T,"f")),L(this,T,"object"==typeof t||"function"==typeof t?t:null,"f"),"function"==typeof t&&this.addEventListener("relative-time-updated",t)}get second(){const t=this.getAttribute("second");if("numeric"===t||"2-digit"===t)return t}set second(t){this.setAttribute("second",t||"")}get minute(){const t=this.getAttribute("minute");if("numeric"===t||"2-digit"===t)return t}set minute(t){this.setAttribute("minute",t||"")}get hour(){const t=this.getAttribute("hour");if("numeric"===t||"2-digit"===t)return t}set hour(t){this.setAttribute("hour",t||"")}get weekday(){const t=this.getAttribute("weekday");return"long"===t||"short"===t||"narrow"===t?t:"datetime"===this.format&&""!==t?this.formatStyle:void 0}set weekday(t){this.setAttribute("weekday",t||"")}get day(){var t;const e=null!==(t=this.getAttribute("day"))&&void 0!==t?t:"numeric";if("numeric"===e||"2-digit"===e)return e}set day(t){this.setAttribute("day",t||"")}get month(){const t=this.format;let e=this.getAttribute("month");if(""!==e)return null!=e||(e="datetime"===t?this.formatStyle:"short"),"numeric"===e||"2-digit"===e||"short"===e||"long"===e||"narrow"===e?e:void 0}set month(t){this.setAttribute("month",t||"")}get year(){var t;const e=this.getAttribute("year");return"numeric"===e||"2-digit"===e?e:this.hasAttribute("year")||(new Date).getUTCFullYear()===(null===(t=this.date)||void 0===t?void 0:t.getUTCFullYear())?void 0:"numeric"}set year(t){this.setAttribute("year",t||"")}get timeZoneName(){const t=this.getAttribute("time-zone-name");if("long"===t||"short"===t||"shortOffset"===t||"longOffset"===t||"shortGeneric"===t||"longGeneric"===t)return t}set timeZoneName(t){this.setAttribute("time-zone-name",t||"")}get prefix(){var t;return null!==(t=this.getAttribute("prefix"))&&void 0!==t?t:"datetime"===this.format?"":"on"}set prefix(t){this.setAttribute("prefix",t)}get threshold(){const t=this.getAttribute("threshold");return t&&(e=t,l.test(e))?t:"P30D";var e}set threshold(t){this.setAttribute("threshold",t)}get tense(){const t=this.getAttribute("tense");return"past"===t?"past":"future"===t?"future":"auto"}set tense(t){this.setAttribute("tense",t)}get precision(){const t=this.getAttribute("precision");return h.includes(t)?t:"micro"===this.format?"minute":"second"}set precision(t){this.setAttribute("precision",t)}get format(){const t=this.getAttribute("format");return"datetime"===t?"datetime":"relative"===t?"relative":"duration"===t?"duration":"micro"===t?"micro":"elapsed"===t?"elapsed":"auto"}set format(t){this.setAttribute("format",t)}get formatStyle(){const t=this.getAttribute("format-style");if("long"===t)return"long";if("short"===t)return"short";if("narrow"===t)return"narrow";const e=this.format;return"elapsed"===e||"micro"===e?"narrow":"datetime"===e?"short":"long"}set formatStyle(t){this.setAttribute("format-style",t)}get datetime(){return this.getAttribute("datetime")||""}set datetime(t){this.setAttribute("datetime",t)}get date(){const t=Date.parse(this.datetime);return Number.isNaN(t)?null:new Date(t)}set date(t){this.datetime=(null==t?void 0:t.toISOString())||""}connectedCallback(){this.update()}disconnectedCallback(){R.unobserve(this)}attributeChangedCallback(t,e,n){e!==n&&("title"===t&&L(this,v,null!==n&&(this.date&&x(this,m,"m",w).call(this,this.date))!==n,"f"),x(this,y,"f")||"title"===t&&x(this,v,"f")||L(this,y,(async()=>{await Promise.resolve(),this.update()})(),"f"))}update(){const t=x(this,g,"f").textContent||this.textContent||"",e=this.getAttribute("title")||"";let n=e;const r=this.date;if("undefined"==typeof Intl||!Intl.DateTimeFormat||!r)return void(x(this,g,"f").textContent=t);const o=Date.now();x(this,v,"f")||(n=x(this,m,"m",w).call(this,r)||"",n&&this.setAttribute("title",n));const i=function(t,e="second",n=Date.now()){const r=t.getTime()-n;if(0===r)return new f;const o=Math.sign(r),i=Math.abs(r),s=Math.floor(i/1e3),a=Math.floor(s/60),c=Math.floor(a/60),u=Math.floor(c/24),l=Math.floor(u/30),d=Math.floor(l/12),p=h.indexOf(e)||h.length;return new f(p>=0?d*o:0,p>=1?(l-12*d)*o:0,0,p>=3?(u-30*l)*o:0,p>=4?(c-24*u)*o:0,p>=5?(a-60*c)*o:0,p>=6?(s-60*a)*o:0,p>=7?(i-1e3*s)*o:0)}(r,this.precision,o),s=x(this,m,"m",E).call(this,i);let a=t;a="duration"===s?x(this,m,"m",S).call(this,i):"relative"===s?x(this,m,"m",O).call(this,i):x(this,m,"m",k).call(this,r),a?x(this,g,"f").textContent=a:this.shadowRoot===x(this,g,"f")&&this.textContent&&(x(this,g,"f").textContent=this.textContent),a===t&&n===e||this.dispatchEvent(new _(t,a,e,n)),"relative"===s||"duration"===s?R.observe(this):R.unobserve(this),L(this,y,!1,"f")}}v=new WeakMap,y=new WeakMap,g=new WeakMap,T=new WeakMap,m=new WeakSet,b=function(){var t;return(null===(t=this.closest("[lang]"))||void 0===t?void 0:t.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang")||"default"},w=function(t){return new Intl.DateTimeFormat(x(this,m,"a",b),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}).format(t)},E=function(t){const e=this.format;if("datetime"===e)return"datetime";if("duration"===e)return"duration";if("elapsed"===e)return"duration";if("micro"===e)return"duration";if(("auto"===e||"relative"===e)&&"undefined"!=typeof Intl&&Intl.RelativeTimeFormat){const e=this.tense;if("past"===e||"future"===e)return"relative";if(1===f.compare(t,this.threshold))return"relative"}return"datetime"},S=function(t){const e=x(this,m,"a",b),n=this.format,r=this.formatStyle,o=this.tense;let i=A;"micro"===n?(t=p(t),i=C,("past"===this.tense&&-1!==t.sign||"future"===this.tense&&1!==t.sign)&&(t=C)):("past"===o&&-1!==t.sign||"future"===o&&1!==t.sign)&&(t=i);const s=`${this.precision}sDisplay`;return t.blank?i.toLocaleString(e,{style:r,[s]:"always"}):t.abs().toLocaleString(e,{style:r})},O=function(t){const e=new Intl.RelativeTimeFormat(x(this,m,"a",b),{numeric:"auto",style:this.formatStyle}),n=this.tense;"future"===n&&1!==t.sign&&(t=A),"past"===n&&-1!==t.sign&&(t=A);const[r,o]=function(t,e){const n=p(t,e);if(n.blank)return[0,"second"];for(const t of h){if("millisecond"===t)continue;const e=n[`${t}s`];if(e)return[e,t]}return[0,"second"]}(t);return"second"===o&&r<10?e.format(0,"millisecond"===this.precision?"second":this.precision):e.format(r,o)},k=function(t){const e=new Intl.DateTimeFormat(x(this,m,"a",b),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName});return`${this.prefix} ${e.format(t)}`.trim()};const N="undefined"!=typeof globalThis?globalThis:window;try{N.RelativeTimeElement=M.define()}catch(Re){if(!(N.DOMException&&Re instanceof DOMException&&"NotSupportedError"===Re.name||Re instanceof ReferenceError))throw Re}var I=n(2891);class F extends Error{constructor(t,e,n){const r=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super(`Request failed with ${r?`status code ${r}`:"an unknown error"}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=n}}class D extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const B=t=>null!==t&&"object"==typeof t,H=(...t)=>{for(const e of t)if((!B(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return U({},...t)},q=(t={},e={})=>{const n=new globalThis.Headers(t),r=e instanceof globalThis.Headers,o=new globalThis.Headers(e);for(const[t,e]of o.entries())r&&"undefined"===e||void 0===e?n.delete(t):n.set(t,e);return n},U=(...t)=>{let e={},n={};for(const r of t)if(Array.isArray(r))Array.isArray(e)||(e=[]),e=[...e,...r];else if(B(r)){for(let[t,n]of Object.entries(r))B(n)&&t in e&&(n=U(e[t],n)),e={...e,[t]:n};B(r.headers)&&(n=q(n,r.headers),e.headers=n)}return e},V=(()=>{let t=!1,e=!1;const n="function"==typeof globalThis.ReadableStream,r="function"==typeof globalThis.Request;return n&&r&&(e=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")),t&&!e})(),W="function"==typeof globalThis.AbortController,$="function"==typeof globalThis.ReadableStream,z="function"==typeof globalThis.FormData,K=["get","post","put","patch","head","delete"],G={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},J=2147483647,X=Symbol("stop"),Y=t=>K.includes(t)?t.toUpperCase():t,Q=[413,429,503],Z={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:Q,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},tt=(t={})=>{if("number"==typeof t)return{...Z,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Z,...t,afterStatusCodes:Q}};const et=Boolean(globalThis.DOMException);function nt(t){if(et)return new DOMException(t?.reason??"The operation was aborted.","AbortError");const e=new Error(t?.reason??"The operation was aborted.");return e.name="AbortError",e}class rt{static create(t,e){const n=new rt(t,e),r=async()=>{if(n._options.timeout>J)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await n._fetch();for(const e of n._options.hooks.afterResponse){const r=await e(n.request,n._options,n._decorateResponse(t.clone()));r instanceof globalThis.Response&&(t=r)}if(n._decorateResponse(t),!t.ok&&n._options.throwHttpErrors){let e=new F(t,n.request,n._options);for(const t of n._options.hooks.beforeError)e=await t(e);throw e}if(n._options.onDownloadProgress){if("function"!=typeof n._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!$)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return n._stream(t.clone(),n._options.onDownloadProgress)}return t},o=n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(r):r();for(const[t,r]of Object.entries(G))o[t]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||r);const i=(await o).clone();if("json"===t){if(204===i.status)return"";if(0===(await i.clone().arrayBuffer()).byteLength)return"";if(e.parseJson)return e.parseJson(await i.text())}return i[t]()};return o}constructor(t,e={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:q(this._input.headers,e.headers),hooks:U({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:Y(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:tt(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:e.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(W){if(this.abortController=new globalThis.AbortController,this._options.signal){const t=this._options.signal;this._options.signal.addEventListener("abort",(()=>{this.abortController.abort(t.reason)}))}this._options.signal=this.abortController.signal}if(V&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(z&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,{...this.request}),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof D)){if(t instanceof F){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}const e=.3;return Math.min(this._options.retry.backoffLimit,e*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const n=Math.min(this._calculateRetryDelay(e),J);if(0!==n&&this._retryCount>0){await async function(t,{signal:e}){return new Promise(((n,r)=>{if(e){if(e.aborted)return void r(nt(e));e.addEventListener("abort",o,{once:!0})}function o(){r(nt(e)),clearTimeout(i)}const i=setTimeout((()=>{e?.removeEventListener("abort",o),n()}),t)}))}(n,{signal:this._options.signal});for(const t of this._options.hooks.beforeRetry){if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===X)return}return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):async function(t,e,n){return new Promise(((r,o)=>{const i=setTimeout((()=>{e&&e.abort(),o(new D(t))}),n.timeout);n.fetch(t).then(r).catch(o).then((()=>{clearTimeout(i)}))}))}(this.request.clone(),this.abortController,this._options)}_stream(t,e){const n=Number(t.headers.get("content-length"))||0;let r=0;return 204===t.status?(e&&e({percent:1,totalBytes:n,transferredBytes:r},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const i=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array),await async function t(){const{done:s,value:a}=await i.read();if(s)o.close();else{if(e){r+=a.byteLength;e({percent:0===n?0:r/n,transferredBytes:r,totalBytes:n},a)}o.enqueue(a),await t()}}()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}const ot=t=>{const e=(e,n)=>rt.create(e,H(t,n));for(const n of K)e[n]=(e,r)=>rt.create(e,H(t,r,{method:n}));return e.create=t=>ot(H(t)),e.extend=e=>ot(H(t,e)),e.stop=X,e},it=ot();class st{constructor(t,e,{tabInsertsSuggestions:n,defaultFirstOption:r}={}){this.input=t,this.list=e,this.tabInsertsSuggestions=null==n||n,this.defaultFirstOption=null!=r&&r,this.isComposing=!1,e.id||(e.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=t=>function(t,e){if(t.shiftKey||t.metaKey||t.altKey)return;if(!e.ctrlBindings&&t.ctrlKey)return;if(e.isComposing)return;switch(t.key){case"Enter":ct(e.input,e.list)&&t.preventDefault();break;case"Tab":e.tabInsertsSuggestions&&ct(e.input,e.list)&&t.preventDefault();break;case"Escape":e.clearSelection();break;case"ArrowDown":e.navigate(1),t.preventDefault();break;case"ArrowUp":e.navigate(-1),t.preventDefault();break;case"n":e.ctrlBindings&&t.ctrlKey&&(e.navigate(1),t.preventDefault());break;case"p":e.ctrlBindings&&t.ctrlKey&&(e.navigate(-1),t.preventDefault());break;default:if(t.ctrlKey)break;e.clearSelection()}}(t,this),this.compositionEventHandler=t=>function(t,e){e.isComposing="compositionstart"===t.type;const n=document.getElementById(e.input.getAttribute("aria-controls")||"");if(!n)return;e.clearSelection()}(t,this),this.inputHandler=this.clearSelection.bind(this),t.setAttribute("role","combobox"),t.setAttribute("aria-controls",e.id),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",at),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",at)}indicateDefaultOption(){var t;this.defaultFirstOption&&(null===(t=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(lt)[0])||void 0===t||t.setAttribute("data-combobox-option-default","true"))}navigate(t=1){const e=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(lt)[0],n=Array.from(this.list.querySelectorAll('[role="option"]')).filter(lt),r=n.indexOf(e);if(r===n.length-1&&1===t||0===r&&-1===t)return this.clearSelection(),void this.input.focus();let o=1===t?0:n.length-1;if(e&&r>=0){const e=r+t;e>=0&&e<n.length&&(o=e)}const i=n[o];if(i)for(const t of n)t.removeAttribute("data-combobox-option-default"),i===t?(this.input.setAttribute("aria-activedescendant",i.id),i.setAttribute("aria-selected","true"),ut(i),ht(this.list,i)):t.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const t of this.list.querySelectorAll('[aria-selected="true"]'))t.removeAttribute("aria-selected");this.indicateDefaultOption()}}function at(t){if(!(t.target instanceof Element))return;const e=t.target.closest('[role="option"]');e&&"true"!==e.getAttribute("aria-disabled")&&function(t,e){t.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0,detail:e}))}(e,{event:t})}function ct(t,e){const n=e.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return!!n&&("true"===n.getAttribute("aria-disabled")||n.click(),!0)}function ut(t){t.dispatchEvent(new Event("combobox-select",{bubbles:!0}))}function lt(t){return!t.hidden&&!(t instanceof HTMLInputElement&&"hidden"===t.type)&&(t.offsetWidth>0||t.offsetHeight>0)}function ht(t,e){(function(t,e){const n=t.scrollTop,r=n+t.clientHeight,o=e.offsetTop,i=o+e.clientHeight;return o>=n&&i<=r})(t,e)||(t.scrollTop=e.offsetTop)}const ft=/\s|\(|\[/;function dt(t,e,n,{multiWord:r,lookBackIndex:o,lastMatchPosition:i}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let s=t.lastIndexOf(e,n-1);if(-1===s)return;if(s<o)return;if(r){if(null!=i){if(i===s)return;s=i-e.length}if(" "===t[s+1]&&n>=s+e.length+1)return;if(t.lastIndexOf("\n",n-1)>s)return;if(t.lastIndexOf(".",n-1)>s)return}else{if(t.lastIndexOf(" ",n-1)>s)return}const a=t[s-1];if(a&&!ft.test(a))return;return{text:t.substring(s+e.length,n),position:s+e.length}}const pt=["position:absolute;","overflow:auto;","word-wrap:break-word;","top:0px;","left:-9999px;"],mt=["box-sizing","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","min-height","padding-bottom","padding-left","padding-right","padding-top","border-bottom","border-left","border-right","border-top","text-decoration","text-indent","text-transform","width","word-spacing"],vt=new WeakMap;function yt(t,e=t.selectionEnd){const{mirror:n,marker:r}=function(t,e){const n=t.nodeName.toLowerCase();if("textarea"!==n&&"input"!==n)throw new Error("expected textField to a textarea or input");let r=vt.get(t);if(r&&r.parentElement===t.parentElement)r.innerHTML="";else{r=document.createElement("div"),vt.set(t,r);const e=window.getComputedStyle(t),o=pt.slice(0);"textarea"===n?o.push("white-space:pre-wrap;"):o.push("white-space:nowrap;");for(let t=0,n=mt.length;t<n;t++){const n=mt[t];o.push(`${n}:${e.getPropertyValue(n)};`)}r.style.cssText=o.join(" ")}const o=document.createElement("span");let i,s;if(o.style.cssText="position: absolute;",o.innerHTML="&nbsp;","number"==typeof e){let n=t.value.substring(0,e);n&&(i=document.createTextNode(n)),n=t.value.substring(e),n&&(s=document.createTextNode(n))}else{const e=t.value;e&&(i=document.createTextNode(e))}if(i&&r.appendChild(i),r.appendChild(o),s&&r.appendChild(s),!r.parentElement){if(!t.parentElement)throw new Error("textField must have a parentElement to mirror");t.parentElement.insertBefore(r,t)}return r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft,{mirror:r,marker:o}}(t,e),o=n.getBoundingClientRect(),i=r.getBoundingClientRect();return setTimeout((()=>{n.remove()}),5e3),{top:i.top-o.top,left:i.left-o.left}}const bt=new WeakMap;class gt{constructor(t,e){this.expander=t,this.input=e,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,e.addEventListener("paste",this.onpaste),e.addEventListener("input",this.oninput),e.addEventListener("keydown",this.onkeydown),e.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,e){var n,r;if(this.input!==document.activeElement&&this.input!==(null===(r=null===(n=document.activeElement)||void 0===n?void 0:n.shadowRoot)||void 0===r?void 0:r.activeElement))return;this.deactivate(),this.menu=e,e.id||(e.id=`text-expander-${Math.floor(1e5*Math.random()).toString()}`),this.expander.append(e),this.combobox=new st(this.input,e),this.expander.dispatchEvent(new Event("text-expander-activate"));let{top:o,left:i}=yt(this.input,t.position);if(function(t){try{if(t.matches(":popover-open"))return!0}catch(t){}try{if(t.matches("dialog:modal"))return!0}catch(t){}try{if(t.matches(":fullscreen"))return!0}catch(t){}return!1}(e)){const t=this.input.getBoundingClientRect();o+=t.top,i+=t.left,"absolute"===getComputedStyle(e).position&&(o+=window.scrollY,i+=window.scrollX)}e.style.top=`${o}px`,e.style.left=`${i}px`,this.combobox.start(),e.addEventListener("combobox-commit",this.oncommit),e.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1)}deactivate(){const t=this.menu;return!(!t||!this.combobox)&&(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){var e;const n=t;if(!(n instanceof HTMLElement))return;if(!this.combobox)return;const r=this.match;if(!r)return;const o=this.input.value.substring(0,r.position-r.key.length),i=this.input.value.substring(r.position+r.text.length),s={item:n,key:r.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:s})))return;if(!s.value)return;let a=null!==(e=this.expander.getAttribute("suffix"))&&void 0!==e?e:" ";s.continue&&(a="");const c=`${s.value}${a}`;this.input.value=o+c+i;const u=o.length+c.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=u,this.input.selectionEnd=u,s.continue||(this.lookBackIndex=u,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){this.interactingWithList?this.interactingWithList=!1:this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted)return void(this.justPasted=!1);const t=this.findMatch();if(t){this.match=t;const e=await this.notifyProviders(t);if(!this.match)return;e?this.activate(t,e):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const t=this.input.selectionEnd||0,e=this.input.value;t<=this.lookBackIndex&&(this.lookBackIndex=t-1);for(const{key:n,multiWord:r}of this.expander.keys){const o=dt(e,n,t,{multiWord:r,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(o)return{text:o.text,key:n,position:o.position}}}async notifyProviders(t){const e=[];if(!this.expander.dispatchEvent(new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:t=>e.push(t),text:t.text,key:t.key}})))return;const n=(await Promise.all(e)).filter((t=>t.matched)).map((t=>t.fragment));return n[0]}onMousedown(){this.interactingWithList=!0}onKeydown(t){"Escape"===t.key&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class wt extends HTMLElement{get keys(){const t=this.getAttribute("keys"),e=t?t.split(" "):[],n=this.getAttribute("multiword"),r=n?n.split(" "):[],o=0===r.length&&this.hasAttribute("multiword");return e.map((t=>({key:t,multiWord:o||r.includes(t)})))}connectedCallback(){const t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;const e=new gt(this,t);bt.set(this,e)}disconnectedCallback(){const t=bt.get(this);t&&(t.destroy(),bt.delete(this))}dismiss(){const t=bt.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=wt,window.customElements.define("text-expander",wt));var Et=Object.defineProperty,St=(t,e,n)=>(((t,e,n)=>{e in t?Et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);class Ot extends HTMLElement{constructor(){super(...arguments),St(this,"onToggle",(t=>{const e=t.target;e.open&&this.querySelectorAll(":scope > :is(ui-disclosure, details)").forEach((t=>{t.toggleAttribute("open",t===e),this.required&&t.toggleAttribute("disabled",t===e)}))}))}connectedCallback(){this.addEventListener("toggle",this.onToggle,{capture:!0})}disconnectedCallback(){this.removeEventListener("toggle",this.onToggle,{capture:!0})}get required(){return this.hasAttribute("required")}}function kt(t,e,n={}){const r=new WeakMap,o=_t(n);t instanceof HTMLCollection&&(t=Array.from(t)),t.forEach((t=>{"none"!==getComputedStyle(t).display&&r.set(t,t.getBoundingClientRect())})),e(),t.forEach((t=>{const e=r.get(t);if(!e)return;const n=e.left-t.getBoundingClientRect().left,i=e.top-t.getBoundingClientRect().top;if(!n&&!i)return;const s=t.style;s.transitionDuration="0s",s.transform=`translate(${n}px, ${i}px)`,requestAnimationFrame((async()=>{t.classList.add(o+"move"),s.transitionDuration=s.transform="",await Ct(t),t.classList.remove(o+"move")}))}))}function Tt(t){t._currentTransition&&(t.classList.remove(...["active","from","to"].map((e=>t._currentTransition+e))),t._currentTransition=null)}async function xt(t,e,n={}){const r=_t(n)+e+"-",o=t.classList;Tt(t),t._currentTransition=r,o.add(r+"active",r+"from"),await At(),o.add(r+"to"),o.remove(r+"from"),await Ct(t),o.remove(r+"to",r+"active"),t._currentTransition===r&&(t._currentTransition=null)}function Lt(t,e={}){return xt(t,"enter",e)}function Pt(t,e={}){return xt(t,"leave",e)}function At(){return new Promise((t=>requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))))}async function Ct(t){if(getComputedStyle(t).transitionDuration.startsWith("0s"))return;let e=!1;const n=n=>e||(e=n.target===t);return t.addEventListener("transitionstart",n),await At(),t.removeEventListener("transitionstart",n),e?new Promise((e=>{const n=r=>{r.target===t&&(e(),t.removeEventListener("transitionend",n),t.removeEventListener("transitioncancel",n))};t.addEventListener("transitionend",n),t.addEventListener("transitioncancel",n)})):void 0}function _t(t){return null!=t&&t.prefix?t.prefix+"-":""}var jt=Object.defineProperty,Rt=(t,e,n)=>(((t,e,n)=>{e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Mt=class extends HTMLElement{constructor(){super(),Rt(this,"added",new Set),Rt(this,"timeouts",new Map),Rt(this,"index",0),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{t instanceof HTMLElement&&!this.added.has(t)&&this.show(t)}))}))})).observe(this,{childList:!0})}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","status"),this.hasAttribute("aria-live")||this.setAttribute("aria-live","polite"),this.hasAttribute("aria-relevant")||this.setAttribute("aria-relevant","additions");for(const t of this.children)this.show(t,{animate:!1})}show(t,e={}){const n=e.key||t.dataset.key||String(this.index++);this.dismiss(n),t.dataset.key=n,this.contains(t)?Lt(t):!1===e.animate?this.append(t):kt(this.children,(()=>{this.append(t),Lt(t)})),this.added.add(t);const r=Number(void 0!==e.duration?e.duration:t.dataset.duration||Mt.duration);return r>0&&(this.startTimeout(t,r),t.addEventListener("mouseenter",this.clearTimeout.bind(this,t)),t.addEventListener("focusin",this.clearTimeout.bind(this,t)),t.addEventListener("mouseleave",this.startTimeout.bind(this,t,r)),t.addEventListener("focusout",this.startTimeout.bind(this,t,r))),n}dismiss(t){"string"!=typeof t?(this.added.delete(t),kt(this.children,(()=>Pt(t).then((()=>t.remove())))),this.clearTimeout(t)):this.querySelectorAll(`[data-key="${t}"]`).forEach((t=>this.dismiss(t)))}clear(){Array.from(this.children).forEach((t=>{this.dismiss(t)}))}speak(t){const e=document.createElement("div");Object.assign(e.style,{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"}),e.textContent=t,this.show(e)}startTimeout(t,e){this.clearTimeout(t),this.timeouts.set(t,window.setTimeout((()=>{this.dismiss(t)}),e))}clearTimeout(t){this.timeouts.has(t)&&clearTimeout(this.timeouts.get(t))}};let Nt=Mt;function It(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||void 0!==t.button&&0!==t.button}Rt(Nt,"duration",1e4);var Ft=Object.defineProperty,Dt=(t,e,n)=>(((t,e,n)=>{e in t?Ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);class Bt extends HTMLElement{constructor(){super(...arguments),Dt(this,"onButtonClick",(t=>{!It(t)&&!this.disabled&&(this.open=!this.open,t.preventDefault())}))}static get observedAttributes(){return["open"]}connectedCallback(){this.content.hidden=!this.open,this.button.setAttribute("aria-expanded",String(this.open)),this.button.addEventListener("click",this.onButtonClick)}disconnectedCallback(){Tt(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeEventListener("click",this.onButtonClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,n){"open"===t&&(null!==n?this.wasOpened():this.wasClosed())}wasOpened(){this.content.hidden&&(this.content.hidden=!1,Lt(this.content)),this.button.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("toggle"))}wasClosed(){this.content.hidden||Pt(this.content).then((()=>this.content.hidden=!0)),this.button.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("toggle"))}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}var Ht=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],qt=Ht.join(","),Ut="undefined"==typeof Element,Vt=Ut?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Wt=!Ut&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},$t=function(t,e,n){var r=Array.prototype.slice.apply(t.querySelectorAll(qt));return e&&Vt.call(t,qt)&&r.unshift(t),r=r.filter(n)},zt=function t(e,n,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if("SLOT"===s.tagName){var a=s.assignedElements(),c=t(a.length?a:s.children,!0,r);r.flatten?o.push.apply(o,c):o.push({scope:s,candidates:c})}else{Vt.call(s,qt)&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var u=s.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(s),l=!r.shadowRootFilter||r.shadowRootFilter(s);if(u&&l){var h=t(!0===u?s.children:u.children,!0,r);r.flatten?o.push.apply(o,h):o.push({scope:s,candidates:h})}else i.unshift.apply(i,s.children)}}return o},Kt=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},Gt=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},Jt=function(t){return"INPUT"===t.tagName},Xt=function(t){return function(t){return Jt(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e,n=t.form||Wt(t),r=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=r(window.CSS.escape(t.name));else try{e=r(t.name)}catch(t){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",t.message),!1}var o=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return!o||o===t}(t)},Yt=function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;return 0===n&&0===r},Qt=function(t,e){return!(e.disabled||function(t){return Jt(t)&&"hidden"===t.type}(e)||function(t,e){var n=e.displayCheck,r=e.getShadowRoot;if("hidden"===getComputedStyle(t).visibility)return!0;var o=Vt.call(t,"details>summary:first-of-type")?t.parentElement:t;if(Vt.call(o,"details:not([open]) *"))return!0;var i=Wt(t).host,s=(null==i?void 0:i.ownerDocument.contains(i))||t.ownerDocument.contains(t);if(n&&"full"!==n){if("non-zero-area"===n)return Yt(t)}else{if("function"==typeof r){for(var a=t;t;){var c=t.parentElement,u=Wt(t);if(c&&!c.shadowRoot&&!0===r(c))return Yt(t);t=t.assignedSlot?t.assignedSlot:c||u===t.ownerDocument?c:u.host}t=a}if(s)return!t.getClientRects().length}return!1}(e,t)||function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))}(e)||function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var r=e.children.item(n);if("LEGEND"===r.tagName)return!!Vt.call(e,"fieldset[disabled] *")||!r.contains(t)}return!0}e=e.parentElement}return!1}(e))},Zt=function(t,e){return!(Xt(e)||Kt(e)<0||!Qt(t,e))},te=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},ee=function t(e){var n=[],r=[];return e.forEach((function(e,o){var i=!!e.scope,s=i?e.scope:e,a=Kt(s,i),c=i?t(e.candidates):s;0===a?i?n.push.apply(n,c):n.push(s):r.push({documentOrder:o,tabIndex:a,item:e,isScope:i,content:c})})),r.sort(Gt).reduce((function(t,e){return e.isScope?t.push.apply(t,e.content):t.push(e.content),t}),[]).concat(n)},ne=function(t,e){var n;return n=(e=e||{}).getShadowRoot?zt([t],e.includeContainer,{filter:Zt.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:te}):$t(t,e.includeContainer,Zt.bind(null,e)),ee(n)},re=function(t,e){return(e=e||{}).getShadowRoot?zt([t],e.includeContainer,{filter:Qt.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):$t(t,e.includeContainer,Qt.bind(null,e))},oe=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==Vt.call(t,qt)&&Zt(e,t)},ie=Ht.concat("iframe").join(","),se=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==Vt.call(t,ie)&&Qt(e,t)},ae=Object.defineProperty,ce=(t,e,n)=>(((t,e,n)=>{e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const ue=class extends HTMLElement{constructor(){super(...arguments),ce(this,"search",""),ce(this,"searchTimeout"),ce(this,"onKeyDown",(t=>{if(!this.hidden){if("ArrowUp"===t.key)return this.navigate(-1),void t.preventDefault();if("ArrowDown"===t.key)return this.navigate(1),void t.preventDefault();t.key.length>1||t.ctrlKey||t.metaKey||t.altKey||(this.search+=t.key.toLowerCase(),t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout((()=>{this.search=""}),ue.searchDelay),this.items.some((t=>{var e;return 0===(null==(e=t.textContent)?void 0:e.trim().toLowerCase().indexOf(this.search))&&(t.focus(),!0)})))}}))}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","menu"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),this.items.forEach((t=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1")})),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}get items(){return Array.from(this.querySelectorAll("[role^=menuitem]")).filter((t=>se(t)))}navigate(t){var e;const n=this.items;let r=(document.activeElement instanceof HTMLElement?n.indexOf(document.activeElement):-1)+t;r<0&&(r=n.length-1),r>=n.length&&(r=0),null==(e=n[r])||e.focus()}};let le=ue;function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){de(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ce(le,"searchDelay",800);var pe,me=(pe=[],{activateTrap:function(t){if(pe.length>0){var e=pe[pe.length-1];e!==t&&e.pause()}var n=pe.indexOf(t);-1===n||pe.splice(n,1),pe.push(t)},deactivateTrap:function(t){var e=pe.indexOf(t);-1!==e&&pe.splice(e,1),pe.length>0&&pe[pe.length-1].unpause()}}),ve=function(t){return setTimeout(t,0)},ye=function(t,e){var n=-1;return t.every((function(t,r){return!e(t)||(n=r,!1)})),n},be=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"==typeof t?t.apply(void 0,n):t},ge=function(t){return t.target.shadowRoot&&"function"==typeof t.composedPath?t.composedPath()[0]:t.target},we=function(t,e){var n,r=(null==e?void 0:e.document)||document,o=fe({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},s=function(t,e,n){return t&&void 0!==t[e]?t[e]:o[n||e]},a=function(t){return i.containerGroups.findIndex((function(e){var n=e.container,r=e.tabbableNodes;return n.contains(t)||r.find((function(e){return e===t}))}))},c=function(t){var e=o[t];if("function"==typeof e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e=e.apply(void 0,i)}if(!0===e&&(e=void 0),!e){if(void 0===e||!1===e)return e;throw new Error("`".concat(t,"` was specified but was not a node, or did not return a node"))}var a=e;if("string"==typeof e&&!(a=r.querySelector(e)))throw new Error("`".concat(t,"` as selector refers to no known node"));return a},u=function(){var t=c("initialFocus");if(!1===t)return!1;if(void 0===t)if(a(r.activeElement)>=0)t=r.activeElement;else{var e=i.tabbableGroups[0];t=e&&e.firstTabbableNode||c("fallbackFocus")}if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t},l=function(){if(i.containerGroups=i.containers.map((function(t){var e=ne(t,o.tabbableOptions),n=re(t,o.tabbableOptions);return{container:t,tabbableNodes:e,focusableNodes:n,firstTabbableNode:e.length>0?e[0]:null,lastTabbableNode:e.length>0?e[e.length-1]:null,nextTabbableNode:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.findIndex((function(e){return e===t}));if(!(r<0))return e?n.slice(r+1).find((function(t){return oe(t,o.tabbableOptions)})):n.slice(0,r).reverse().find((function(t){return oe(t,o.tabbableOptions)}))}}})),i.tabbableGroups=i.containerGroups.filter((function(t){return t.tabbableNodes.length>0})),i.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},h=function t(e){!1!==e&&e!==r.activeElement&&(e&&e.focus?(e.focus({preventScroll:!!o.preventScroll}),i.mostRecentlyFocusedNode=e,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(e)&&e.select()):t(u()))},f=function(t){var e=c("setReturnFocus",t);return e||!1!==e&&t},d=function(t){var e=ge(t);a(e)>=0||(be(o.clickOutsideDeactivates,t)?n.deactivate({returnFocus:o.returnFocusOnDeactivate&&!se(e,o.tabbableOptions)}):be(o.allowOutsideClick,t)||t.preventDefault())},p=function(t){var e=ge(t),n=a(e)>=0;n||e instanceof Document?n&&(i.mostRecentlyFocusedNode=e):(t.stopImmediatePropagation(),h(i.mostRecentlyFocusedNode||u()))},m=function(t){if(function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t)&&!1!==be(o.escapeDeactivates,t))return t.preventDefault(),void n.deactivate();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){var e=ge(t);l();var n=null;if(i.tabbableGroups.length>0){var r=a(e),s=r>=0?i.containerGroups[r]:void 0;if(r<0)n=t.shiftKey?i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:i.tabbableGroups[0].firstTabbableNode;else if(t.shiftKey){var u=ye(i.tabbableGroups,(function(t){var n=t.firstTabbableNode;return e===n}));if(u<0&&(s.container===e||se(e,o.tabbableOptions)&&!oe(e,o.tabbableOptions)&&!s.nextTabbableNode(e,!1))&&(u=r),u>=0){var f=0===u?i.tabbableGroups.length-1:u-1;n=i.tabbableGroups[f].lastTabbableNode}}else{var d=ye(i.tabbableGroups,(function(t){var n=t.lastTabbableNode;return e===n}));if(d<0&&(s.container===e||se(e,o.tabbableOptions)&&!oe(e,o.tabbableOptions)&&!s.nextTabbableNode(e))&&(d=r),d>=0){var p=d===i.tabbableGroups.length-1?0:d+1;n=i.tabbableGroups[p].firstTabbableNode}}}else n=c("fallbackFocus");n&&(t.preventDefault(),h(n))}(t)},v=function(t){var e=ge(t);a(e)>=0||be(o.clickOutsideDeactivates,t)||be(o.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())},y=function(){if(i.active)return me.activateTrap(n),i.delayInitialFocusTimer=o.delayInitialFocus?ve((function(){h(u())})):h(u()),r.addEventListener("focusin",p,!0),r.addEventListener("mousedown",d,{capture:!0,passive:!1}),r.addEventListener("touchstart",d,{capture:!0,passive:!1}),r.addEventListener("click",v,{capture:!0,passive:!1}),r.addEventListener("keydown",m,{capture:!0,passive:!1}),n},b=function(){if(i.active)return r.removeEventListener("focusin",p,!0),r.removeEventListener("mousedown",d,!0),r.removeEventListener("touchstart",d,!0),r.removeEventListener("click",v,!0),r.removeEventListener("keydown",m,!0),n};return(n={get active(){return i.active},get paused(){return i.paused},activate:function(t){if(i.active)return this;var e=s(t,"onActivate"),n=s(t,"onPostActivate"),o=s(t,"checkCanFocusTrap");o||l(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=r.activeElement,e&&e();var a=function(){o&&l(),y(),n&&n()};return o?(o(i.containers.concat()).then(a,a),this):(a(),this)},deactivate:function(t){if(!i.active)return this;var e=fe({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},t);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,b(),i.active=!1,i.paused=!1,me.deactivateTrap(n);var r=s(e,"onDeactivate"),a=s(e,"onPostDeactivate"),c=s(e,"checkCanReturnFocus"),u=s(e,"returnFocus","returnFocusOnDeactivate");r&&r();var l=function(){ve((function(){u&&h(f(i.nodeFocusedBeforeActivation)),a&&a()}))};return u&&c?(c(f(i.nodeFocusedBeforeActivation)).then(l,l),this):(l(),this)},pause:function(){return i.paused||!i.active||(i.paused=!0,b()),this},unpause:function(){return i.paused&&i.active?(i.paused=!1,l(),y(),this):this},updateContainerElements:function(t){var e=[].concat(t).filter(Boolean);return i.containers=e.map((function(t){return"string"==typeof t?r.querySelector(t):t})),i.active&&l(),this}}).updateContainerElements(t),n},Ee=Object.defineProperty,Se=(t,e,n)=>(((t,e,n)=>{e in t?Ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Oe=class extends HTMLElement{constructor(){super(),Se(this,"focusTrap"),Se(this,"connected",!1);const t=document.createElement("template");t.innerHTML='\n            <div part="backdrop" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>\n            <div part="content" style="z-index: 1"><slot></slot></div>\n        ';const e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),this.backdrop.addEventListener("click",(()=>{var t;this.hasAttribute("static")?null==(t=Oe.attention)||t.call(Oe,e.children[1]):this.close()})),this.focusTrap=we(this,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0})}static get observedAttributes(){return["open"]}connectedCallback(){var t,e,n,r,o,i;this.connected=!0,null!=(t=this.content)&&t.hasAttribute("role")||null==(e=this.content)||e.setAttribute("role","dialog"),null!=(n=this.content)&&n.hasAttribute("aria-modal")||null==(r=this.content)||r.setAttribute("aria-modal","true"),null!=(o=this.content)&&o.hasAttribute("tabindex")||null==(i=this.content)||i.setAttribute("tabindex","-1"),this.addEventListener("keydown",(t=>{"Escape"===t.key&&this.open&&(t.preventDefault(),t.stopPropagation(),this.close())})),this.open&&this.wasOpened()}disconnectedCallback(){this.connected=!1}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}close(){if(!this.open)return;const t=new Event("beforeclose",{cancelable:!0});this.dispatchEvent(t)&&(this.open=!1)}attributeChangedCallback(t,e,n){"open"!==t||!this.connected||(null!==n?this.wasOpened():this.wasClosed())}wasOpened(){var t,e;this.hidden=!1,Lt(this),null==(t=this.focusTrap)||t.activate(),null==(e=this.querySelector("[autofocus]"))||e.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;null==(t=this.focusTrap)||t.deactivate(),Pt(this).then((()=>this.hidden=!0)),this.dispatchEvent(new Event("close"))}get backdrop(){var t;return null==(t=this.shadowRoot)?void 0:t.firstElementChild}get content(){return this.firstElementChild}};let ke=Oe;Se(ke,"attention",(t=>t.animate([{transform:"scale(1)"},{transform:"scale(1.1)"},{transform:"scale(1)"}],300)));var Te=n(3901),xe=Object.defineProperty,Le=(t,e,n)=>(((t,e,n)=>{e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);class Pe extends HTMLElement{constructor(){super(),Le(this,"cleanup"),Le(this,"onButtonClick",(t=>{!It(t)&&!this.disabled&&(this.open=!this.open,t.preventDefault())})),Le(this,"onButtonKeyDown",(t=>{var e;"ArrowDown"===t.key&&!this.disabled&&(t.preventDefault(),this.open=!0,null==(e=re(this.content)[0])||e.focus())})),Le(this,"onKeyDown",(t=>{"Escape"===t.key&&this.open&&(t.preventDefault(),t.stopPropagation(),this.open=!1,this.button.focus())})),Le(this,"onFocusOut",(t=>{t.relatedTarget instanceof Node&&this.contains(t.relatedTarget)||(this.open=!1)})),Le(this,"onContentClick",(t=>{t.target instanceof Element&&t.target.closest("[role=menuitem], [role=menuitemradio]")&&(this.open=!1,this.button.focus())}));const t=document.createElement("template");t.innerHTML='\n            <div part="backdrop" hidden style="position: fixed; top: 0; left: 0; right: 0; bottom: 0"></div>\n            <slot></slot>\n        ',this.attachShadow({mode:"open"}).appendChild(t.content.cloneNode(!0)),this.backdrop.onclick=()=>this.open=!1}static get observedAttributes(){return["open"]}connectedCallback(){this.backdrop.hidden=!0,this.content.hidden=!0,this.open=!1,this.button.setAttribute("aria-expanded","false"),setTimeout((()=>{"menu"===this.content.getAttribute("role")&&this.button.setAttribute("aria-haspopup","true")})),this.button.addEventListener("click",this.onButtonClick),this.button.addEventListener("keydown",this.onButtonKeyDown),this.addEventListener("keydown",this.onKeyDown),this.addEventListener("focusout",this.onFocusOut),this.content.addEventListener("click",this.onContentClick)}disconnectedCallback(){Tt(this.backdrop),Tt(this.content),this.button.removeAttribute("aria-expanded"),this.button.removeAttribute("aria-haspopup"),this.button.removeEventListener("click",this.onButtonClick),this.button.removeEventListener("keydown",this.onButtonKeyDown),this.removeEventListener("keydown",this.onKeyDown),this.removeEventListener("focusout",this.onFocusOut),this.content.removeEventListener("click",this.onContentClick)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}get disabled(){return this.hasAttribute("disabled")}attributeChangedCallback(t,e,n){"open"===t&&(null!==n?this.wasOpened():this.wasClosed())}wasOpened(){if(!this.content.hidden)return;this.content.hidden=!1,this.content.style.position="absolute",this.backdrop.hidden=!1,Lt(this.content),Lt(this.backdrop),this.button.setAttribute("aria-expanded","true"),this.cleanup=(0,Te.ll)(this.button,this.content,(()=>{(0,Te.rD)(this.button,this.content,{placement:this.getAttribute("placement")||"bottom",middleware:[(0,Te.BN)(),(0,Te.UU)(),(0,Te.Ej)({apply:({availableWidth:t,availableHeight:e})=>{Object.assign(this.content.style,{maxWidth:"",maxHeight:""});const n=getComputedStyle(this.content);("none"===n.maxWidth||t<parseInt(n.maxWidth))&&(this.content.style.maxWidth=`${t}px`),("none"===n.maxHeight||e<parseInt(n.maxHeight))&&(this.content.style.maxHeight=`${e}px`)}})]}).then((({x:t,y:e,placement:n})=>{Object.assign(this.content.style,{left:`${t}px`,top:`${e}px`}),this.content.dataset.placement=n}))}),{ancestorScroll:!1});const t=this.content.querySelector("[autofocus]");t?t.focus():this.content.focus(),this.dispatchEvent(new Event("open"))}wasClosed(){var t;this.content.hidden||(this.button.setAttribute("aria-expanded","false"),null==(t=this.cleanup)||t.call(this),Pt(this.backdrop).then((()=>this.backdrop.hidden=!0)),Pt(this.content).then((()=>this.content.hidden=!0)),this.dispatchEvent(new Event("close")))}get backdrop(){var t;return null==(t=this.shadowRoot)?void 0:t.firstElementChild}get button(){return this.querySelector("button, [role=button]")}get content(){return this.children[1]}}var Ae=Object.defineProperty,Ce=(t,e,n)=>(((t,e,n)=>{e in t?Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);class _e extends HTMLElement{constructor(){super(...arguments),Ce(this,"onInitialFocus",(()=>{this.removeAttribute("tabindex"),this.focusControlAtIndex(0)})),Ce(this,"onKeyDown",(t=>{if("ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"Home"!==t.key&&"End"!==t.key)return;const e=this.controls,n=this.controls.length,r=e.indexOf(t.target);if(-1===r)return;let o=0;"ArrowLeft"===t.key&&(o=r-1),"ArrowRight"===t.key&&(o=r+1),"End"===t.key&&(o=n-1),o<0&&(o=n-1),o>n-1&&(o=0),this.focusControlAtIndex(o),t.preventDefault()}))}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.setAttribute("tabindex","0"),this.addEventListener("focus",this.onInitialFocus,{once:!0}),this.addEventListener("keydown",this.onKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.onKeyDown)}focusControlAtIndex(t){this.controls.forEach(((e,n)=>{n===t?(e.setAttribute("tabindex","0"),e.focus()):e.setAttribute("tabindex","-1")}))}get controls(){return re(this)}}var je=Object.defineProperty,Re=(t,e,n)=>(((t,e,n)=>{e in t?je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Me=class extends HTMLElement{constructor(){super(...arguments),Re(this,"parent"),Re(this,"tooltip"),Re(this,"timeout"),Re(this,"disabledObserver"),Re(this,"showing",!1),Re(this,"cleanup"),Re(this,"prevInnerHTML"),Re(this,"onMouseEnter",this.afterDelay.bind(this,this.show)),Re(this,"onFocus",this.show.bind(this)),Re(this,"onMouseLeave",this.afterDelay.bind(this,this.hide)),Re(this,"onBlur",this.hide.bind(this)),Re(this,"onPointerUp",(t=>{"mouse"===t.pointerType?this.hide():this.show()})),Re(this,"onKeyDown",(t=>{"Escape"===t.key&&this.hide()}))}connectedCallback(){this.parent=this.parentNode,this.parent&&(this.parent.addEventListener("mouseenter",this.onMouseEnter),this.parent.addEventListener("focus",this.onFocus),this.parent.addEventListener("mouseleave",this.onMouseLeave),this.parent.addEventListener("blur",this.onBlur),this.parent.addEventListener("pointerup",this.onPointerUp),this.disabledObserver=new MutationObserver((t=>{t.forEach((t=>{"disabled"===t.attributeName&&this.hide()}))})),this.disabledObserver.observe(this.parent,{attributes:!0})),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("scroll",this.onBlur)}disconnectedCallback(){var t,e;null==(t=this.cleanup)||t.call(this),this.tooltip&&(this.tooltip.remove(),this.tooltip=void 0),this.parent&&(this.parent.removeEventListener("mouseenter",this.onMouseEnter),this.parent.removeEventListener("focus",this.onFocus),this.parent.removeEventListener("mouseleave",this.onMouseLeave),this.parent.removeEventListener("blur",this.onBlur),this.parent.removeEventListener("pointerup",this.onPointerUp),this.parent=void 0),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("scroll",this.onBlur),null==(e=this.disabledObserver)||e.disconnect(),clearTimeout(this.timeout)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}show(){var t;if(this.disabled)return;const e=this.createTooltip();clearTimeout(this.timeout),this.showing||(e.hidden=!1,Lt(e),this.showing=!0),this.innerHTML!==this.prevInnerHTML&&(this.prevInnerHTML=e.innerHTML=this.innerHTML),e.style.position="absolute",null==(t=this.cleanup)||t.call(this),this.cleanup=(0,Te.ll)(this.parent,e,(()=>(0,Te.rD)(this.parent,e,{placement:this.getAttribute("placement")||Me.placement,middleware:[(0,Te.BN)(),(0,Te.UU)()]}).then((({x:t,y:n,placement:r})=>{Object.assign(e.style,{left:`${t}px`,top:`${n}px`}),e.dataset.placement=r}))))}hide(){var t;clearTimeout(this.timeout),null==(t=this.cleanup)||t.call(this),this.showing&&(this.showing=!1,Pt(this.tooltip).then((()=>{this.tooltip&&(this.tooltip.hidden=!0)})))}afterDelay(t){clearTimeout(this.timeout);const e=parseInt(this.getAttribute("delay")||"");this.timeout=window.setTimeout(t.bind(this),isNaN(e)?Me.delay:e)}createTooltip(){return this.tooltip||(this.tooltip=document.createElement("div"),this.tooltip.className=this.getAttribute("tooltip-class")||Me.tooltipClass,this.tooltip.hidden=!0,this.tooltip.addEventListener("mouseenter",this.show.bind(this)),this.tooltip.addEventListener("mouseleave",this.afterDelay.bind(this,this.hide)),document.body.appendChild(this.tooltip)),this.tooltip}};let Ne=Me;Re(Ne,"delay",100),Re(Ne,"placement","top"),Re(Ne,"tooltipClass","tooltip"),window.customElements.define("ui-accordion",Ot),window.customElements.define("ui-alerts",Nt),window.customElements.define("ui-disclosure",Bt),window.customElements.define("ui-menu",le),window.customElements.define("ui-modal",ke),window.customElements.define("ui-popup",Pe),window.customElements.define("ui-toolbar",_e),window.customElements.define("ui-tooltip",Ne);n(2355);function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Be(t,e,n){return e&&De(t.prototype,e),n&&De(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function He(){return He=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},He.apply(this,arguments)}function qe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}function Ue(t){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ue(t)}function Ve(t,e){return Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ve(t,e)}function We(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ue(t);if(e){var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return We(this,n)}}var ze=function(){function t(){Fe(this,t)}return Be(t,[{key:"listenForWhisper",value:function(t,e){return this.listen(".client-"+t,e)}},{key:"notification",value:function(t){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",t)}},{key:"stopListeningForWhisper",value:function(t,e){return this.stopListening(".client-"+t,e)}}]),t}(),Ke=function(){function t(e){Fe(this,t),this.namespace=e}return Be(t,[{key:"format",value:function(t){return"."===t.charAt(0)||"\\"===t.charAt(0)?t.substr(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(t){this.namespace=t}}]),t}(),Ge=function(t){qe(n,t);var e=$e(n);function n(t,r,o){var i;return Fe(this,n),(i=e.call(this)).name=r,i.pusher=t,i.options=o,i.eventFormatter=new Ke(i.options.namespace),i.subscribe(),i}return Be(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"listenToAll",value:function(t){var e=this;return this.subscription.bind_global((function(n,r){if(!n.startsWith("pusher:")){var o=e.options.namespace.replace(/\./g,"\\"),i=n.startsWith(o)?n.substring(o.length+1):"."+n;t(i,r)}})),this}},{key:"stopListening",value:function(t,e){return e?this.subscription.unbind(this.eventFormatter.format(t),e):this.subscription.unbind(this.eventFormatter.format(t)),this}},{key:"stopListeningToAll",value:function(t){return t?this.subscription.unbind_global(t):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(t){return this.on("pusher:subscription_succeeded",(function(){t()})),this}},{key:"error",value:function(t){return this.on("pusher:subscription_error",(function(e){t(e)})),this}},{key:"on",value:function(t,e){return this.subscription.bind(t,e),this}}]),n}(ze),Je=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),n}(Ge),Xe=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}}]),n}(Ge),Ye=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"here",value:function(t){return this.on("pusher:subscription_succeeded",(function(e){t(Object.keys(e.members).map((function(t){return e.members[t]})))})),this}},{key:"joining",value:function(t){return this.on("pusher:member_added",(function(e){t(e.info)})),this}},{key:"whisper",value:function(t,e){return this.pusher.channels.channels[this.name].trigger("client-".concat(t),e),this}},{key:"leaving",value:function(t){return this.on("pusher:member_removed",(function(e){t(e.info)})),this}}]),n}(Ge),Qe=function(t){qe(n,t);var e=$e(n);function n(t,r,o){var i;return Fe(this,n),(i=e.call(this)).events={},i.listeners={},i.name=r,i.socket=t,i.options=o,i.eventFormatter=new Ke(i.options.namespace),i.subscribe(),i}return Be(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(t,e){return this.on(this.eventFormatter.format(t),e),this}},{key:"stopListening",value:function(t,e){return this.unbindEvent(this.eventFormatter.format(t),e),this}},{key:"subscribed",value:function(t){return this.on("connect",(function(e){t(e)})),this}},{key:"error",value:function(t){return this}},{key:"on",value:function(t,e){var n=this;return this.listeners[t]=this.listeners[t]||[],this.events[t]||(this.events[t]=function(e,r){n.name===e&&n.listeners[t]&&n.listeners[t].forEach((function(t){return t(r)}))},this.socket.on(t,this.events[t])),this.listeners[t].push(e),this}},{key:"unbind",value:function(){var t=this;Object.keys(this.events).forEach((function(e){t.unbindEvent(e)}))}},{key:"unbindEvent",value:function(t,e){this.listeners[t]=this.listeners[t]||[],e&&(this.listeners[t]=this.listeners[t].filter((function(t){return t!==e}))),e&&0!==this.listeners[t].length||(this.events[t]&&(this.socket.removeListener(t,this.events[t]),delete this.events[t]),delete this.listeners[t])}}]),n}(ze),Ze=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"whisper",value:function(t,e){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(t),data:e}),this}}]),n}(Qe),tn=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"here",value:function(t){return this.on("presence:subscribed",(function(e){t(e.map((function(t){return t.user_info})))})),this}},{key:"joining",value:function(t){return this.on("presence:joining",(function(e){return t(e.user_info)})),this}},{key:"whisper",value:function(t,e){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(t),data:e}),this}},{key:"leaving",value:function(t){return this.on("presence:leaving",(function(e){return t(e.user_info)})),this}}]),n}(Ze),en=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(t,e){return this}},{key:"listenToAll",value:function(t){return this}},{key:"stopListening",value:function(t,e){return this}},{key:"subscribed",value:function(t){return this}},{key:"error",value:function(t){return this}},{key:"on",value:function(t,e){return this}}]),n}(ze),nn=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"whisper",value:function(t,e){return this}}]),n}(en),rn=function(t){qe(n,t);var e=$e(n);function n(){return Fe(this,n),e.apply(this,arguments)}return Be(n,[{key:"here",value:function(t){return this}},{key:"joining",value:function(t){return this}},{key:"whisper",value:function(t,e){return this}},{key:"leaving",value:function(t){return this}}]),n}(en),on=function(){function t(e){Fe(this,t),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(e),this.connect()}return Be(t,[{key:"setOptions",value:function(t){this.options=He(this._defaultOptions,t);var e=this.csrfToken();return e&&(this.options.auth.headers["X-CSRF-TOKEN"]=e,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=e),(e=this.options.bearerToken)&&(this.options.auth.headers.Authorization="Bearer "+e,this.options.userAuthentication.headers.Authorization="Bearer "+e),t}},{key:"csrfToken",value:function(){var t;return"undefined"!=typeof window&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:"undefined"!=typeof document&&"function"==typeof document.querySelector&&(t=document.querySelector('meta[name="csrf-token"]'))?t.getAttribute("content"):null}}]),t}(),sn=function(t){qe(n,t);var e=$e(n);function n(){var t;return Fe(this,n),(t=e.apply(this,arguments)).channels={},t}return Be(n,[{key:"connect",value:function(){void 0!==this.options.client?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(t,e,n){return this.channel(t).listen(e,n)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new Ge(this.pusher,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new Je(this.pusher,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"encryptedPrivateChannel",value:function(t){return this.channels["private-encrypted-"+t]||(this.channels["private-encrypted-"+t]=new Xe(this.pusher,"private-encrypted-"+t,this.options)),this.channels["private-encrypted-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new Ye(this.pusher,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this;[t,"private-"+t,"private-encrypted-"+t,"presence-"+t].forEach((function(t,n){e.leaveChannel(t)}))}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(on),an=function(t){qe(n,t);var e=$e(n);function n(){var t;return Fe(this,n),(t=e.apply(this,arguments)).channels={},t}return Be(n,[{key:"connect",value:function(){var t=this,e=this.getSocketIO();return this.socket=e(this.options.host,this.options),this.socket.on("reconnect",(function(){Object.values(t.channels).forEach((function(t){t.subscribe()}))})),this.socket}},{key:"getSocketIO",value:function(){if(void 0!==this.options.client)return this.options.client;if("undefined"!=typeof io)return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(t,e,n){return this.channel(t).listen(e,n)}},{key:"channel",value:function(t){return this.channels[t]||(this.channels[t]=new Qe(this.socket,t,this.options)),this.channels[t]}},{key:"privateChannel",value:function(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new Ze(this.socket,"private-"+t,this.options)),this.channels["private-"+t]}},{key:"presenceChannel",value:function(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new tn(this.socket,"presence-"+t,this.options)),this.channels["presence-"+t]}},{key:"leave",value:function(t){var e=this;[t,"private-"+t,"presence-"+t].forEach((function(t){e.leaveChannel(t)}))}},{key:"leaveChannel",value:function(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(on),cn=function(t){qe(n,t);var e=$e(n);function n(){var t;return Fe(this,n),(t=e.apply(this,arguments)).channels={},t}return Be(n,[{key:"connect",value:function(){}},{key:"listen",value:function(t,e,n){return new en}},{key:"channel",value:function(t){return new en}},{key:"privateChannel",value:function(t){return new nn}},{key:"encryptedPrivateChannel",value:function(t){return new nn}},{key:"presenceChannel",value:function(t){return new rn}},{key:"leave",value:function(t){}},{key:"leaveChannel",value:function(t){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(on),un=function(){function t(e){Fe(this,t),this.options=e,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return Be(t,[{key:"channel",value:function(t){return this.connector.channel(t)}},{key:"connect",value:function(){"reverb"==this.options.broadcaster?this.connector=new sn(He(He({},this.options),{cluster:""})):"pusher"==this.options.broadcaster?this.connector=new sn(this.options):"socket.io"==this.options.broadcaster?this.connector=new an(this.options):"null"==this.options.broadcaster?this.connector=new cn(this.options):"function"==typeof this.options.broadcaster&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(t){return this.connector.presenceChannel(t)}},{key:"leave",value:function(t){this.connector.leave(t)}},{key:"leaveChannel",value:function(t){this.connector.leaveChannel(t)}},{key:"leaveAllChannels",value:function(){for(var t in this.connector.channels)this.leaveChannel(t)}},{key:"listen",value:function(t,e,n){return this.connector.listen(t,e,n)}},{key:"private",value:function(t){return this.connector.privateChannel(t)}},{key:"encryptedPrivate",value:function(t){return this.connector.encryptedPrivateChannel(t)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){"function"==typeof Vue&&Vue.http&&this.registerVueRequestInterceptor(),"function"==typeof axios&&this.registerAxiosRequestInterceptor(),"function"==typeof jQuery&&this.registerjQueryAjaxSetup(),"object"===("undefined"==typeof Turbo?"undefined":Ie(Turbo))&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var t=this;Vue.http.interceptors.push((function(e,n){t.socketId()&&e.headers.set("X-Socket-ID",t.socketId()),n()}))}},{key:"registerAxiosRequestInterceptor",value:function(){var t=this;axios.interceptors.request.use((function(e){return t.socketId()&&(e.headers["X-Socket-Id"]=t.socketId()),e}))}},{key:"registerjQueryAjaxSetup",value:function(){var t=this;void 0!==jQuery.ajax&&jQuery.ajaxPrefilter((function(e,n,r){t.socketId()&&r.setRequestHeader("X-Socket-Id",t.socketId())}))}},{key:"registerTurboRequestInterceptor",value:function(){var t=this;document.addEventListener("turbo:before-fetch-request",(function(e){e.detail.fetchOptions.headers["X-Socket-Id"]=t.socketId()}))}}]),t}(),ln=n(6479),hn=n.n(ln),fn=n(89);function dn(t){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function pn(){pn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,s=Object.create(i.prototype),a=new C(r||[]);return o(s,"_invoke",{value:x(t,n,a)}),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function y(){}function b(){}function g(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(_([])));S&&S!==n&&r.call(S,s)&&(w=S);var O=g.prototype=y.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,i,s,a){var c=h(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==dn(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,n,r){var o=f;return function(i,s){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=h(e,n,r);if("normal"===u.type){if(o=r.done?m:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function L(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function _(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(dn(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(T.prototype),u(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new T(l(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:_(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vn(r.key),r)}}function vn(t){var e=function(t,e){if("object"!=dn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dn(e)?e:e+""}function yn(t,e,n){return e=En(e),function(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gn()?Reflect.construct(e,n||[],En(t).constructor):e.apply(t,n))}function bn(t){var e="function"==typeof Map?new Map:void 0;return bn=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(gn())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&wn(o,n.prototype),o}(t,arguments,En(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wn(n,t)},bn(t)}function gn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gn=function(){return!!t})()}function wn(t,e){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wn(t,e)}function En(t){return En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},En(t)}var Sn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},On=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yn(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){return Sn(this,void 0,void 0,pn().mark((function t(){var e=this;return pn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,fn.connectStreamSource)(this),this.subscription=(n=this.type,r=this.channel,"presence"===n?window.Echo.join(r):window.Echo[n](r)).listenToAll((function(t,n){e.dispatchMessageEvent(n.streams)}));case 2:case"end":return t.stop()}var n,r}),t,this)})))}},{key:"disconnectedCallback",value:function(){(0,fn.disconnectStreamSource)(this),this.subscription&&(window.Echo.leave(this.channel),this.subscription=null)}},{key:"dispatchMessageEvent",value:function(t){var e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}},{key:"channel",get:function(){return this.getAttribute("channel")||""}},{key:"type",get:function(){return this.getAttribute("type")||"private"}}],r&&mn(n.prototype,r),o&&mn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(bn(HTMLElement));window.Pusher=hn(),window.Waterhole.echoConfig.broadcaster&&(window.Echo=new un(Object.assign({namespace:"Waterhole.Events"},window.Waterhole.echoConfig)),window.Echo.registerTurboRequestInterceptor(),customElements.define("turbo-echo-stream-source",On));class kn{constructor(t){this.children=[],this.parent=t}delete(t){const e=this.children.indexOf(t);return-1!==e&&(this.children=this.children.slice(0,e).concat(this.children.slice(e+1)),0===this.children.length&&this.parent.delete(this),!0)}add(t){return this.children.push(t),this}}class Tn{constructor(t){this.parent=null,this.children={},this.parent=t||null}get(t){return this.children[t]}insert(t){let e=this;for(let n=0;n<t.length;n+=1){const r=t[n];let o=e.get(r);if(n===t.length-1)return o instanceof Tn&&(e.delete(o),o=null),o||(o=new kn(e),e.children[r]=o),o;o instanceof kn&&(o=null),o||(o=new Tn(e),e.children[r]=o),e=o}return e}delete(t){for(const e in this.children){if(this.children[e]===t){const t=delete this.children[e];return 0===Object.keys(this.children).length&&this.parent&&this.parent.delete(this),t}}return!1}}const xn={"¡":"1","™":"2","£":"3","¢":"4","∞":"5","§":"6","¶":"7","•":"8",ª:"9",º:"0","–":"-","≠":"=","⁄":"!","€":"@","‹":"#","›":"$",ﬁ:"%",ﬂ:"^","‡":"&","°":"*","·":"(","‚":")","—":"_","±":"+",œ:"q","∑":"w","®":"r","†":"t","¥":"y",ø:"o",π:"p","“":"[","‘":"]","«":"\\",Œ:"Q","„":"W","´":"E","‰":"R",ˇ:"T",Á:"Y","¨":"U",ˆ:"I",Ø:"O","∏":"P","”":"{","’":"}","»":"|",å:"a",ß:"s","∂":"d",ƒ:"f","©":"g","˙":"h","∆":"j","˚":"k","¬":"l","…":";",æ:"'",Å:"A",Í:"S",Î:"D",Ï:"F","˝":"G",Ó:"H",Ô:"J","":"K",Ò:"L",Ú:":",Æ:'"',Ω:"z","≈":"x",ç:"c","√":"v","∫":"b",µ:"m","≤":",","≥":".","÷":"/","¸":"Z","˛":"X",Ç:"C","◊":"V",ı:"B","˜":"N",Â:"M","¯":"<","˘":">","¿":"?"},Ln={" ":"Space","+":"Plus"};function Pn(t,e=navigator.platform){var n,r;const{ctrlKey:o,altKey:i,metaKey:s,key:a}=t,c=[],u=[o,i,s,Cn(t)];for(const[t,e]of u.entries())e&&c.push(An[t]);if(!An.includes(a)){const t=c.includes("Alt")&&jn.test(e)&&null!==(n=xn[a])&&void 0!==n?n:a,o=null!==(r=Ln[t])&&void 0!==r?r:t;c.push(o)}return c.join("+")}const An=["Control","Alt","Meta","Shift"];function Cn(t){const{shiftKey:e,code:n,key:r}=t;return e&&!(n.startsWith("Key")&&r.toUpperCase()===r)}function _n(t,e){let n;return n=function(t,e=navigator.platform){const n=jn.test(e)?"Meta":"Control";return t.replace("Mod",n)}(t,e),n=function(t){const e=t.split("+").pop(),n=[];for(const e of["Control","Alt","Meta","Shift"])t.includes(e)&&n.push(e);return n.push(e),n.join("+")}(n),n}const jn=/Mac|iPod|iPhone|iPad/i;const Rn=" ";class Mn{constructor({onReset:t}={}){this._path=[],this.timer=null,this.onReset=t}get path(){return this._path}get sequence(){return this._path.join(Rn)}registerKeypress(t){this._path=[...this._path,Pn(t)],this.startTimer()}reset(){var t;this.killTimer(),this._path=[],null===(t=this.onReset)||void 0===t||t.call(this)}killTimer(){null!=this.timer&&window.clearTimeout(this.timer),this.timer=null}startTimer(){this.killTimer(),this.timer=window.setTimeout((()=>this.reset()),Mn.CHORD_TIMEOUT)}}function Nn(t){if(!(t instanceof HTMLElement))return!1;const e=t.nodeName.toLowerCase(),n=(t.getAttribute("type")||"").toLowerCase();return"select"===e||"textarea"===e||"input"===e&&"submit"!==n&&"reset"!==n&&"checkbox"!==n&&"radio"!==n&&"file"!==n||t.isContentEditable}Mn.CHORD_TIMEOUT=1500;const In=new Tn,Fn=new WeakMap;let Dn=In;const Bn=new Mn({onReset(){Dn=In}});function Hn(t){if(t.defaultPrevented)return;if(!(t.target instanceof Node))return;if(Nn(t.target)){const e=t.target;if(!e.id)return;if(!e.ownerDocument.querySelector(`[data-hotkey-scope="${e.id}"]`))return}const e=Dn.get(Pn(t));if(e){if(Bn.registerKeypress(t),Dn=e,e instanceof kn){const n=t.target;let r,o=!1;const i=Nn(n);for(let t=e.children.length-1;t>=0;t-=1){r=e.children[t];const s=r.getAttribute("data-hotkey-scope");if(!i&&!s||i&&n.id===s){o=!0;break}}r&&o&&(!function(t,e){const n=new CustomEvent("hotkey-fire",{cancelable:!0,detail:{path:e}});!t.dispatchEvent(n)||(Nn(t)?t.focus():t.click())}(r,Bn.path),t.preventDefault()),Bn.reset()}}else Bn.reset()}function qn(t,e){0===Object.keys(In.children).length&&document.addEventListener("keydown",Hn);const n=function(t){const e=[];let n=[""],r=!1;for(let o=0;o<t.length;o++)r&&","===t[o]?(e.push(n),n=[""],r=!1):t[o]!==Rn?(r="+"!==t[o],n[n.length-1]+=t[o]):(n.push(""),r=!1);return e.push(n),e.map((t=>t.map((t=>_n(t))).filter((t=>""!==t)))).filter((t=>t.length>0))}(e||t.getAttribute("data-hotkey")||""),r=n.map((e=>In.insert(e).add(t)));Fn.set(t,r)}function Un(t){t.target.querySelectorAll("[data-hotkey]").forEach((function(t){qn(t)}))}document.addEventListener("DOMContentLoaded",Un),document.addEventListener("turbo:render",Un),document.addEventListener("turbo:frame-render",Un);var Vn=n(7119),Wn=n.n(Vn),$n=n(6877);function zn(t){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(t)}function Kn(){Kn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,s=Object.create(i.prototype),a=new C(r||[]);return o(s,"_invoke",{value:x(t,n,a)}),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",m="completed",v={};function y(){}function b(){}function g(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(_([])));S&&S!==n&&r.call(S,s)&&(w=S);var O=g.prototype=y.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,i,s,a){var c=h(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==zn(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,n,r){var o=f;return function(i,s){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=h(e,n,r);if("normal"===u.type){if(o=r.done?m:d,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function L(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function _(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(zn(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(T.prototype),u(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new T(l(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(O),u(O,c,"Generator"),u(O,s,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:_(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}var Gn,Jn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};fn.start(),window.Turbo=fn,document.addEventListener("turbo:before-stream-render",(function(t){var e=t.detail,n=e.render;e.render=function(t){"replace"===t.action?t.targetElements.forEach((function(e){Wn()(e,t.templateContent.firstElementChild)})):n(t)}})),document.addEventListener("turbo:before-fetch-response",(function(t){return Jn(void 0,void 0,void 0,Kn().mark((function e(){var n,r,o,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.detail.fetchResponse.response).ok&&422!==r.status){e.next=3;break}return e.abrupt("return");case 3:t.preventDefault(),(o=t.target)instanceof fn.FrameElement?(i=(0,$n.Ml)("frame-error"),null===(n=i.querySelector("button"))||void 0===n||n.addEventListener("click",(function(){o.reload()})),o.replaceChildren(i)):Waterhole.fetchError(r);case 6:case"end":return e.stop()}}),e)})))})),document.addEventListener("turbo:frame-missing",(function(t){return Jn(void 0,void 0,void 0,Kn().mark((function e(){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(n=t.detail).visit(n.response,{action:"replace"});case 3:case"end":return e.stop()}}),e)})))})),Waterhole.fetchError=function(t){return Jn(this,void 0,void 0,Kn().mark((function e(){var n,r,o;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=null==t?void 0:t.status,e.next=401===e.t0||403===e.t0?3:422===e.t0?5:429===e.t0?11:13;break;case 3:return n="forbidden-alert",e.abrupt("break",14);case 5:return r=(0,$n.Ml)("template-alert-danger"),e.next=8,t.json();case 8:return r.querySelector(".alert__message").textContent=e.sent.message,Waterhole.alerts.show(r,{key:"fetchError"}),e.abrupt("break",14);case 11:return n="too-many-requests-alert",e.abrupt("break",14);case 13:n="fatal-error-alert";case 14:n&&(o=(0,$n.Ml)(n))&&Waterhole.alerts.show(o,{key:"fetchError"});case 15:case"end":return e.stop()}}),e)})))},Object.defineProperty(Waterhole,"alerts",{get:function(){return document.getElementById("alerts")}}),window.Stimulus=I.lg.start(),window.Stimulus.load((Gn=n(9361)).keys().map((t=>function(t,e){const n=function(t){const e=(t.match(/^(?:\.\/)?(.+)(?:[_-]controller\..+?)$/)||[])[1];if(e)return e.replace(/_/g,"-").replace(/\//g,"--")}(e);if(n)return function(t,e){const n=t.default;if("function"==typeof n)return{identifier:e,controllerConstructor:n}}(t(e),n)}(Gn,t))).filter((t=>t))),Waterhole.fetch=it.create({headers:{"X-XSRF-TOKEN":(0,$n.Ri)("XSRF-TOKEN")||void 0},hooks:{beforeError:[function(t){return Waterhole.fetchError(t.response),t}]}})},6877:(t,e,n)=>{"use strict";function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||void 0!==t.button&&0!==t.button}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getBoundingClientRect();return-n.top/n.height<e&&(n.bottom-window.innerHeight)/n.height<e}function i(){var t;return(null===(t=document.getElementById("header"))||void 0===t?void 0:t.offsetHeight)||0}function s(t){var e,n,r=document.getElementById(t);return null===(n=null===(e=null==r?void 0:r.content)||void 0===e?void 0:e.firstElementChild)||void 0===n?void 0:n.cloneNode(!0)}function a(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null}n.d(e,{Ml:()=>s,Ri:()=>a,YG:()=>o,kX:()=>r,vF:()=>i})},2834:t=>{"use strict";var e=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(e,"\\$&")}},4248:()=>{},127:()=>{},6889:t=>{function e(t,e){if(!t)throw new Error(e||"AssertionError")}e.notEqual=function(t,n,r){e(t!=n,r)},e.notOk=function(t,n){e(!t,n)},e.equal=function(t,n,r){e(t==n,r)},e.ok=e,t.exports=e},7119:(t,e,n)=>{var r=n(6889),o=n(4157),i=3;function s(t,e){return e?t?t.isSameNode&&t.isSameNode(e)?e:t.tagName!==e.tagName||a(t)!==a(e)?t:(o(t,e),c(t,e),e):null:t}function a(t){return t.dataset?t.dataset.nanomorphComponentId:void 0}function c(t,e){for(var n,r,o,i,a=0,c=0;n=e.childNodes[c],r=t.childNodes[c-a],n||r;c++)if(r)if(n)if(u(r,n))(o=s(r,n))!==n&&(e.replaceChild(o,n),a++);else{i=null;for(var l=c;l<e.childNodes.length;l++)if(u(e.childNodes[l],r)){i=e.childNodes[l];break}i?((o=s(r,i))!==i&&a++,e.insertBefore(o,n)):r.id||n.id?(e.insertBefore(r,n),a++):(o=s(r,n))!==n&&(e.replaceChild(o,n),a++)}else e.appendChild(r),a++;else e.removeChild(n),c--}function u(t,e){return t.id?t.id===e.id:t.isSameNode?t.isSameNode(e):t.tagName===e.tagName&&(t.type===i&&t.nodeValue===e.nodeValue)}t.exports=function(t,e,n){if(r.equal(typeof t,"object","nanomorph: oldTree should be an object"),r.equal(typeof e,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly)return c(e,t),t;return r.notEqual(e.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),s(e,t)}},4726:t=>{t.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"]},4157:(t,e,n)=>{var r=n(4726),o=r.length;function i(t,e,n){t[n]!==e[n]&&(e[n]=t[n],t[n]?e.setAttribute(n,""):e.removeAttribute(n))}t.exports=function(t,e){var n=t.nodeType,s=t.nodeName;1===n&&function(t,e){for(var n=e.attributes,r=t.attributes,o=null,i=null,s=null,a=null,c=r.length-1;c>=0;--c)s=(a=r[c]).name,o=a.namespaceURI,i=a.value,o?(s=a.localName||s,e.getAttributeNS(o,s)!==i&&e.setAttributeNS(o,s,i)):e.hasAttribute(s)?e.getAttribute(s)!==i&&("null"===i||"undefined"===i?e.removeAttribute(s):e.setAttribute(s,i)):e.setAttribute(s,i);for(var u=n.length-1;u>=0;--u)!1!==(a=n[u]).specified&&(s=a.name,(o=a.namespaceURI)?(s=a.localName||s,t.hasAttributeNS(o,s)||e.removeAttributeNS(o,s)):t.hasAttributeNS(null,s)||e.removeAttribute(s))}(t,e);3!==n&&8!==n||e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue);"INPUT"===s?function(t,e){var n=t.value,r=e.value;i(t,e,"checked"),i(t,e,"disabled"),t.indeterminate!==e.indeterminate&&(e.indeterminate=t.indeterminate);if("file"===e.type)return;n!==r&&(e.setAttribute("value",n),e.value=n);"null"===n&&(e.value="",e.removeAttribute("value"));t.hasAttributeNS(null,"value")?"range"===e.type&&(e.value=n):e.removeAttribute("value")}(t,e):"OPTION"===s?function(t,e){i(t,e,"selected")}(t,e):"TEXTAREA"===s&&function(t,e){var n=t.value;n!==e.value&&(e.value=n);if(e.firstChild&&e.firstChild.nodeValue!==n){if(""===n&&e.firstChild.nodeValue===e.placeholder)return;e.firstChild.nodeValue=n}}(t,e);!function(t,e){for(var n=0;n<o;n++){var i=r[n];t[i]?e[i]=t[i]:e[i]&&(e[i]=void 0)}}(t,e)}},6479:t=>{var e;window,e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=256,s=function(){function t(t){void 0===t&&(t="="),this._paddingCharacter=t}return t.prototype.encodedLength=function(t){return this._paddingCharacter?(t+2)/3*4|0:(8*t+5)/6|0},t.prototype.encode=function(t){for(var e="",n=0;n<t.length-2;n+=3){var r=t[n]<<16|t[n+1]<<8|t[n+2];e+=this._encodeByte(r>>>18&63),e+=this._encodeByte(r>>>12&63),e+=this._encodeByte(r>>>6&63),e+=this._encodeByte(r>>>0&63)}var o=t.length-n;return o>0&&(r=t[n]<<16|(2===o?t[n+1]<<8:0),e+=this._encodeByte(r>>>18&63),e+=this._encodeByte(r>>>12&63),e+=2===o?this._encodeByte(r>>>6&63):this._paddingCharacter||"",e+=this._paddingCharacter||""),e},t.prototype.maxDecodedLength=function(t){return this._paddingCharacter?t/4*3|0:(6*t+7)/8|0},t.prototype.decodedLength=function(t){return this.maxDecodedLength(t.length-this._getPaddingLength(t))},t.prototype.decode=function(t){if(0===t.length)return new Uint8Array(0);for(var e=this._getPaddingLength(t),n=t.length-e,r=new Uint8Array(this.maxDecodedLength(n)),o=0,s=0,a=0,c=0,u=0,l=0,h=0;s<n-4;s+=4)c=this._decodeChar(t.charCodeAt(s+0)),u=this._decodeChar(t.charCodeAt(s+1)),l=this._decodeChar(t.charCodeAt(s+2)),h=this._decodeChar(t.charCodeAt(s+3)),r[o++]=c<<2|u>>>4,r[o++]=u<<4|l>>>2,r[o++]=l<<6|h,a|=c&i,a|=u&i,a|=l&i,a|=h&i;if(s<n-1&&(c=this._decodeChar(t.charCodeAt(s)),u=this._decodeChar(t.charCodeAt(s+1)),r[o++]=c<<2|u>>>4,a|=c&i,a|=u&i),s<n-2&&(l=this._decodeChar(t.charCodeAt(s+2)),r[o++]=u<<4|l>>>2,a|=l&i),s<n-3&&(h=this._decodeChar(t.charCodeAt(s+3)),r[o++]=l<<6|h,a|=h&i),0!==a)throw new Error("Base64Coder: incorrect characters for decoding");return r},t.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-15,e+=62-t>>>8&3,String.fromCharCode(e)},t.prototype._decodeChar=function(t){var e=i;return e+=(42-t&t-44)>>>8&-256+t-43+62,e+=(46-t&t-48)>>>8&-256+t-47+63,e+=(47-t&t-58)>>>8&-256+t-48+52,e+=(64-t&t-91)>>>8&-256+t-65+0,e+=(96-t&t-123)>>>8&-256+t-97+26},t.prototype._getPaddingLength=function(t){var e=0;if(this._paddingCharacter){for(var n=t.length-1;n>=0&&t[n]===this._paddingCharacter;n--)e++;if(t.length<4||e>2)throw new Error("Base64Coder: incorrect padding")}return e},t}();e.Coder=s;var a=new s;e.encode=function(t){return a.encode(t)},e.decode=function(t){return a.decode(t)};var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-13,e+=62-t>>>8&49,String.fromCharCode(e)},e.prototype._decodeChar=function(t){var e=i;return e+=(44-t&t-46)>>>8&-256+t-45+62,e+=(94-t&t-96)>>>8&-256+t-95+63,e+=(47-t&t-58)>>>8&-256+t-48+52,e+=(64-t&t-91)>>>8&-256+t-65+0,e+=(96-t&t-123)>>>8&-256+t-97+26},e}(s);e.URLSafeCoder=c;var u=new c;e.encodeURLSafe=function(t){return u.encode(t)},e.decodeURLSafe=function(t){return u.decode(t)},e.encodedLength=function(t){return a.encodedLength(t)},e.maxDecodedLength=function(t){return a.maxDecodedLength(t)},e.decodedLength=function(t){return a.decodedLength(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="utf8: invalid string",o="utf8: invalid source encoding";function i(t){for(var e=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);if(o<128)e+=1;else if(o<2048)e+=2;else if(o<55296)e+=3;else{if(!(o<=57343))throw new Error(r);if(n>=t.length-1)throw new Error(r);n++,e+=4}}return e}e.encode=function(t){for(var e=new Uint8Array(i(t)),n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=192|o>>6,e[n++]=128|63&o):o<55296?(e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|63&o):(r++,o=(1023&o)<<10,o|=1023&t.charCodeAt(r),o+=65536,e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|63&o)}return e},e.encodedLength=i,e.decode=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(128&r){var i=void 0;if(r<224){if(n>=t.length)throw new Error(o);if(128!=(192&(s=t[++n])))throw new Error(o);r=(31&r)<<6|63&s,i=128}else if(r<240){if(n>=t.length-1)throw new Error(o);var s=t[++n],a=t[++n];if(128!=(192&s)||128!=(192&a))throw new Error(o);r=(15&r)<<12|(63&s)<<6|63&a,i=2048}else{if(!(r<248))throw new Error(o);if(n>=t.length-2)throw new Error(o);s=t[++n],a=t[++n];var c=t[++n];if(128!=(192&s)||128!=(192&a)||128!=(192&c))throw new Error(o);r=(15&r)<<18|(63&s)<<12|(63&a)<<6|63&c,i=65536}if(r<i||r>=55296&&r<=57343)throw new Error(o);if(r>=65536){if(r>1114111)throw new Error(o);r-=65536,e.push(String.fromCharCode(55296|r>>10)),r=56320|1023&r}}e.push(String.fromCharCode(r))}return e.join("")}},function(t,e,n){t.exports=n(3).default},function(t,e,n){"use strict";n.r(e);var r,o=function(){function t(t,e){this.lastId=0,this.prefix=t,this.name=e}return t.prototype.create=function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,r=this.name+"["+e+"]",o=!1,i=function(){o||(t.apply(null,arguments),o=!0)};return this[e]=i,{number:e,id:n,name:r,callback:i}},t.prototype.remove=function(t){delete this[t.number]},t}(),i=new o("_pusher_script_","Pusher.ScriptReceivers"),s={VERSION:"7.6.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},a=function(){function t(t){this.options=t,this.receivers=t.receivers||i,this.loading={}}return t.prototype.load=function(t,e,n){var r=this;if(r.loading[t]&&r.loading[t].length>0)r.loading[t].push(n);else{r.loading[t]=[n];var o=Ae.createScriptRequest(r.getPath(t,e)),i=r.receivers.create((function(e){if(r.receivers.remove(i),r.loading[t]){var n=r.loading[t];delete r.loading[t];for(var s=function(t){t||o.cleanup()},a=0;a<n.length;a++)n[a](e,s)}}));o.send(i)}},t.prototype.getRoot=function(t){var e=Ae.getDocument().location.protocol;return(t&&t.useTLS||"https:"===e?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},t}(),c=new o("_pusher_dependencies","Pusher.DependenciesReceivers"),u=new a({cdn_http:s.cdn_http,cdn_https:s.cdn_https,version:s.VERSION,suffix:s.dependency_suffix,receivers:c}),l={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},h=function(t){var e,n=l.urls[t];return n?(n.fullUrl?e=n.fullUrl:n.path&&(e=l.baseUrl+n.path),e?"See: "+e:""):""};!function(t){t.UserAuthentication="user-authentication",t.ChannelAuthorization="channel-authorization"}(r||(r={}));for(var f,d=(f=function(t,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},f(t,e)},function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),m=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),v=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),y=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),b=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),g=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),w=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),E=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return d(e,t),e}(Error),S=function(t){function e(e,n){var r=this.constructor,o=t.call(this,n)||this;return o.status=e,Object.setPrototypeOf(o,r.prototype),o}return d(e,t),e}(Error),O=function(t,e,n,o,i){var s=Ae.createXHR();for(var a in s.open("POST",n.endpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)s.setRequestHeader(a,n.headers[a]);if(null!=n.headersProvider){var c=n.headersProvider();for(var a in c)s.setRequestHeader(a,c[a])}return s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t=void 0,e=!1;try{t=JSON.parse(s.responseText),e=!0}catch(t){i(new S(200,"JSON returned from "+o.toString()+" endpoint was invalid, yet status code was 200. Data was: "+s.responseText),null)}e&&i(null,t)}else{var a="";switch(o){case r.UserAuthentication:a=h("authenticationEndpoint");break;case r.ChannelAuthorization:a="Clients must be authorized to join private or presence channels. "+h("authorizationEndpoint")}i(new S(s.status,"Unable to retrieve auth string from "+o.toString()+" endpoint - received status: "+s.status+" from "+n.endpoint+". "+a),null)}},s.send(e),s},k=String.fromCharCode,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x={},L=0;L<64;L++)x[T.charAt(L)]=L;var P=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?k(192|e>>>6)+k(128|63&e):k(224|e>>>12&15)+k(128|e>>>6&63)+k(128|63&e)},A=function(t){return t.replace(/[^\x00-\x7F]/g,P)},C=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[T.charAt(n>>>18),T.charAt(n>>>12&63),e>=2?"=":T.charAt(n>>>6&63),e>=1?"=":T.charAt(63&n)].join("")},_=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,C)},j=function(){function t(t,e,n,r){var o=this;this.clear=e,this.timer=t((function(){o.timer&&(o.timer=r(o.timer))}),n)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}(),R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function M(t){window.clearTimeout(t)}function N(t){window.clearInterval(t)}var I=function(t){function e(e,n){return t.call(this,setTimeout,M,e,(function(t){return n(),null}))||this}return R(e,t),e}(j),F=function(t){function e(e,n){return t.call(this,setInterval,N,e,(function(t){return n(),t}))||this}return R(e,t),e}(j),D={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new I(0,t)},method:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,r.concat(arguments))}}},B=D;function H(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];for(var i in o)o[i]&&o[i].constructor&&o[i].constructor===Object?t[i]=H(t[i]||{},o[i]):t[i]=o[i]}return t}function q(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(Q(arguments[e]));return t.join(" : ")}function U(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,o=t.length;r<o;r++)if(t[r]===e)return r;return-1}function V(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function W(t){var e=[];return V(t,(function(t,n){e.push(n)})),e}function $(t,e,n){for(var r=0;r<t.length;r++)e.call(n||window,t[r],r,t)}function z(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t,n));return n}function K(t,e){e=e||function(t){return!!t};for(var n=[],r=0;r<t.length;r++)e(t[r],r,t,n)&&n.push(t[r]);return n}function G(t,e){var n={};return V(t,(function(r,o){(e&&e(r,o,t,n)||Boolean(r))&&(n[o]=r)})),n}function J(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function X(t){return e=function(t){return"object"==typeof t&&(t=Q(t)),encodeURIComponent((e=t.toString(),_(A(e))));var e},n={},V(t,(function(t,r){n[r]=e(t)})),n;var e,n}function Y(t){var e,n,r=G(t,(function(t){return void 0!==t}));return z((e=X(r),n=[],V(e,(function(t,e){n.push([e,t])})),n),B.method("join","=")).join("&")}function Q(t){try{return JSON.stringify(t)}catch(r){return JSON.stringify((e=[],n=[],function t(r,o){var i,s,a;switch(typeof r){case"object":if(!r)return null;for(i=0;i<e.length;i+=1)if(e[i]===r)return{$ref:n[i]};if(e.push(r),n.push(o),"[object Array]"===Object.prototype.toString.apply(r))for(a=[],i=0;i<r.length;i+=1)a[i]=t(r[i],o+"["+i+"]");else for(s in a={},r)Object.prototype.hasOwnProperty.call(r,s)&&(a[s]=t(r[s],o+"["+JSON.stringify(s)+"]"));return a;case"number":case"string":case"boolean":return r}}(t,"$")))}var e,n}var Z=function(){function t(){this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLog,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogWarn,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogError,t)},t.prototype.globalLogWarn=function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)},t.prototype.globalLogError=function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)},t.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=q.apply(this,arguments);tn.log?tn.log(r):tn.logToConsole&&t.bind(this)(r)},t}(),tt=new Z,et=function(t,e,n,r,o){void 0===n.headers&&null==n.headersProvider||tt.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var i=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var s=t.getDocument(),a=s.createElement("script");t.auth_callbacks[i]=function(t){o(null,t)};var c="Pusher.auth_callbacks['"+i+"']";a.src=n.endpoint+"?callback="+encodeURIComponent(c)+"&"+e;var u=s.getElementsByTagName("head")[0]||s.documentElement;u.insertBefore(a,u.firstChild)},nt=function(){function t(t){this.src=t}return t.prototype.send=function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(e.script,r.firstChild),e.errorScript&&r.insertBefore(e.errorScript,e.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}(),rt=function(){function t(t,e){this.url=t,this.data=e}return t.prototype.send=function(t){if(!this.request){var e=Y(this.data),n=this.url+"/"+t.number+"?"+e;this.request=Ae.createScriptRequest(n),this.request.send(t)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}(),ot={name:"jsonp",getAgent:function(t,e){return function(n,r){var o="http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path,s=Ae.createJSONPRequest(o,n),a=Ae.ScriptReceivers.create((function(e,n){i.remove(a),s.cleanup(),n&&n.host&&(t.host=n.host),r&&r(e,n)}));s.send(a)}}};function it(t,e,n){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+n}function st(t,e){return"/app/"+t+"?protocol="+s.PROTOCOL+"&client=js&version="+s.VERSION+(e?"&"+e:"")}var at={getInitial:function(t,e){return it("ws",e,(e.httpPath||"")+st(t,"flash=false"))}},ct={getInitial:function(t,e){return it("http",e,(e.httpPath||"/pusher")+st(t))}},ut={getInitial:function(t,e){return it("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return st(t)}},lt=function(){function t(){this._callbacks={}}return t.prototype.get=function(t){return this._callbacks[ht(t)]},t.prototype.add=function(t,e,n){var r=ht(t);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:e,context:n})},t.prototype.remove=function(t,e,n){if(t||e||n){var r=t?[ht(t)]:W(this._callbacks);e||n?this.removeCallback(r,e,n):this.removeAllCallbacks(r)}else this._callbacks={}},t.prototype.removeCallback=function(t,e,n){$(t,(function(t){this._callbacks[t]=K(this._callbacks[t]||[],(function(t){return e&&e!==t.fn||n&&n!==t.context})),0===this._callbacks[t].length&&delete this._callbacks[t]}),this)},t.prototype.removeAllCallbacks=function(t){$(t,(function(t){delete this._callbacks[t]}),this)},t}();function ht(t){return"_"+t}var ft=function(){function t(t){this.callbacks=new lt,this.global_callbacks=[],this.failThrough=t}return t.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},t.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},t.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},t.prototype.unbind_global=function(t){return t?(this.global_callbacks=K(this.global_callbacks||[],(function(e){return e!==t})),this):(this.global_callbacks=[],this)},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(t,e,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](t,e);var o=this.callbacks.get(t),i=[];if(n?i.push(e,n):e&&i.push(e),o&&o.length>0)for(r=0;r<o.length;r++)o[r].fn.apply(o[r].context||window,i);else this.failThrough&&this.failThrough(t,e);return this},t}(),dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(t){function e(e,n,r,o,i){var s=t.call(this)||this;return s.initialize=Ae.transportConnectionInitializer,s.hooks=e,s.name=n,s.priority=r,s.key=o,s.options=i,s.state="new",s.timeline=i.timeline,s.activityTimeout=i.activityTimeout,s.id=s.timeline.generateUniqueID(),s}return dt(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return B.defer((function(){t.onError(e),t.changeState("closed")})),!1}return this.bindListeners(),tt.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(t){var e=this;return"open"===this.state&&(B.defer((function(){e.socket&&e.socket.send(t)})),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},e.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(t){this.emit("message",t)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.prototype.buildTimelineMessage=function(t){return H({cid:this.id},t)},e}(ft),mt=pt,vt=function(){function t(t){this.hooks=t}return t.prototype.isSupported=function(t){return this.hooks.isSupported(t)},t.prototype.createConnection=function(t,e,n,r){return new mt(this.hooks,t,e,n,r)},t}(),yt=new vt({urls:at,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(Ae.getWebSocketAPI())},isSupported:function(){return Boolean(Ae.getWebSocketAPI())},getSocket:function(t){return Ae.createWebSocket(t)}}),bt={urls:ct,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},gt=H({getSocket:function(t){return Ae.HTTPFactory.createStreamingSocket(t)}},bt),wt=H({getSocket:function(t){return Ae.HTTPFactory.createPollingSocket(t)}},bt),Et={isSupported:function(){return Ae.isXHRSupported()}},St={ws:yt,xhr_streaming:new vt(H({},gt,Et)),xhr_polling:new vt(H({},wt,Et))},Ot=new vt({file:"sockjs",urls:ut,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:u.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),kt={isSupported:function(t){return Ae.isXDRSupported(t.useTLS)}},Tt=new vt(H({},gt,kt)),xt=new vt(H({},wt,kt));St.xdr_streaming=Tt,St.xdr_polling=xt,St.sockjs=Ot;var Lt=St,Pt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),At=new(function(t){function e(){var e=t.call(this)||this,n=e;return void 0!==window.addEventListener&&(window.addEventListener("online",(function(){n.emit("online")}),!1),window.addEventListener("offline",(function(){n.emit("offline")}),!1)),e}return Pt(e,t),e.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e}(ft)),Ct=function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(t,e,n,r){var o=this;r=H({},r,{activityTimeout:this.pingDelay});var i=this.transport.createConnection(t,e,n,r),s=null,a=function(){i.unbind("open",a),i.bind("closed",c),s=B.now()},c=function(t){if(i.unbind("closed",c),1002===t.code||1003===t.code)o.manager.reportDeath();else if(!t.wasClean&&s){var e=B.now()-s;e<2*o.maxPingDelay&&(o.manager.reportDeath(),o.pingDelay=Math.max(e/2,o.minPingDelay))}};return i.bind("open",a),i},t.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},t}(),_t={decodeMessage:function(t){try{var e=JSON.parse(t.data),n=e.data;if("string"==typeof n)try{n=JSON.parse(e.data)}catch(t){}var r={event:e.event,channel:e.channel,data:n};return e.user_id&&(r.user_id=e.user_id),r}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=_t.decodeMessage(t);if("pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},jt=_t,Rt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mt=function(t){function e(e,n){var r=t.call(this)||this;return r.id=e,r.transport=n,r.activityTimeout=n.activityTimeout,r.bindListeners(),r}return Rt(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(t){return this.transport.send(t)},e.prototype.send_event=function(t,e,n){var r={event:t,data:e};return n&&(r.channel=n),tt.debug("Event sent",r),this.send(jt.encodeMessage(r))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var t=this,e={message:function(e){var n;try{n=jt.decodeMessage(e)}catch(n){t.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==n){switch(tt.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",e)},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){V(e,(function(e,n){t.transport.unbind(n,e)}))};V(e,(function(e,n){t.transport.bind(n,e)}))},e.prototype.handleCloseEvent=function(t){var e=jt.getCloseAction(t),n=jt.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e,{action:e,error:n})},e}(ft),Nt=function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){var n;t.unbindListeners();try{n=jt.processHandshake(e)}catch(e){return t.finish("error",{error:e}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new Mt(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=jt.getCloseAction(e)||"backoff",r=jt.getCloseError(e);t.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(t,e){this.callback(H({transport:this.transport,action:t},e))},t}(),It=function(){function t(t,e){this.timeline=t,this.options=e||{}}return t.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(Ae.TimelineTransport.getAgent(this,t),e)},t}(),Ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dt=function(t){function e(e,n){var r=t.call(this,(function(t,n){tt.debug("No callbacks on "+e+" for "+t)}))||this;return r.name=e,r.pusher=n,r.subscribed=!1,r.subscriptionPending=!1,r.subscriptionCancelled=!1,r}return Ft(e,t),e.prototype.authorize=function(t,e){return e(null,{auth:""})},e.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new p("Event '"+t+"' does not start with 'client-'");if(!this.subscribed){var n=h("triggeringClientEvents");tt.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(t,e,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(t){var e=t.event,n=t.data;"pusher_internal:subscription_succeeded"===e?this.handleSubscriptionSucceededEvent(t):"pusher_internal:subscription_count"===e?this.handleSubscriptionCountEvent(t):0!==e.indexOf("pusher_internal:")&&this.emit(e,n,{})},e.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)},e.prototype.handleSubscriptionCountEvent=function(t){t.data.subscription_count&&(this.subscriptionCount=t.data.subscription_count),this.emit("pusher:subscription_count",t.data)},e.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(e,n){e?(t.subscriptionPending=!1,tt.error(e.toString()),t.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof S?{status:e.status}:{}))):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})})))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(ft),Bt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bt(e,t),e.prototype.authorize=function(t,e){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:t},e)},e}(Dt),qt=Ht,Ut=function(){function t(){this.reset()}return t.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},t.prototype.each=function(t){var e=this;V(this.members,(function(n,r){t(e.get(r))}))},t.prototype.setMyID=function(t){this.myID=t},t.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},t.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}(),Vt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},$t=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},zt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.members=new Ut,r}return Vt(e,t),e.prototype.authorize=function(e,n){var r=this;t.prototype.authorize.call(this,e,(function(t,e){return Wt(r,void 0,void 0,(function(){var r,o;return $t(this,(function(i){switch(i.label){case 0:return t?[3,3]:null==e.channel_data?[3,1]:(r=JSON.parse(e.channel_data),this.members.setMyID(r.user_id),[3,3]);case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(i.sent(),null==this.pusher.user.user_data)return o=h("authorizationEndpoint"),tt.error("Invalid auth response for channel '"+this.name+"', expected 'channel_data' field. "+o+", or the user should be signed in."),n("Invalid auth response"),[2];this.members.setMyID(this.pusher.user.user_data.id),i.label=3;case 3:return n(t,e),[2]}}))}))}))},e.prototype.handleEvent=function(t){var e=t.event;if(0===e.indexOf("pusher_internal:"))this.handleInternalEvent(t);else{var n=t.data,r={};t.user_id&&(r.user_id=t.user_id),this.emit(e,n,r)}},e.prototype.handleInternalEvent=function(t){var e=t.event,n=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(t);break;case"pusher_internal:member_added":var r=this.members.addMember(n);this.emit("pusher:member_added",r);break;case"pusher_internal:member_removed":var o=this.members.removeMember(n);o&&this.emit("pusher:member_removed",o)}},e.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(qt),Kt=n(1),Gt=n(0),Jt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xt=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.key=null,o.nacl=r,o}return Jt(e,t),e.prototype.authorize=function(e,n){var r=this;t.prototype.authorize.call(this,e,(function(t,e){if(t)n(t,e);else{var o=e.shared_secret;o?(r.key=Object(Gt.decode)(o),delete e.shared_secret,n(null,e)):n(new Error("No shared_secret key in auth payload for encrypted channel: "+r.name),null)}}))},e.prototype.trigger=function(t,e){throw new g("Client events are not currently supported for encrypted channels")},e.prototype.handleEvent=function(e){var n=e.event,r=e.data;0!==n.indexOf("pusher_internal:")&&0!==n.indexOf("pusher:")?this.handleEncryptedEvent(n,r):t.prototype.handleEvent.call(this,e)},e.prototype.handleEncryptedEvent=function(t,e){var n=this;if(this.key)if(e.ciphertext&&e.nonce){var r=Object(Gt.decode)(e.ciphertext);if(r.length<this.nacl.secretbox.overheadLength)tt.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+r.length);else{var o=Object(Gt.decode)(e.nonce);if(o.length<this.nacl.secretbox.nonceLength)tt.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+o.length);else{var i=this.nacl.secretbox.open(r,o,this.key);if(null===i)return tt.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(e,s){e?tt.error("Failed to make a request to the authEndpoint: "+s+". Unable to fetch new key, so dropping encrypted event"):null!==(i=n.nacl.secretbox.open(r,o,n.key))?n.emit(t,n.getDataToEmit(i)):tt.error("Failed to decrypt event with new key. Dropping encrypted event")}));this.emit(t,this.getDataToEmit(i))}}}else tt.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+e);else tt.debug("Received encrypted event before key has been retrieved from the authEndpoint")},e.prototype.getDataToEmit=function(t){var e=Object(Kt.decode)(t);try{return JSON.parse(e)}catch(t){return e}},e}(qt),Yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(t){function e(e,n){var r=t.call(this)||this;r.state="initialized",r.connection=null,r.key=e,r.options=n,r.timeline=r.options.timeline,r.usingTLS=r.options.useTLS,r.errorCallbacks=r.buildErrorCallbacks(),r.connectionCallbacks=r.buildConnectionCallbacks(r.errorCallbacks),r.handshakeCallbacks=r.buildHandshakeCallbacks(r.errorCallbacks);var o=Ae.getNetwork();return o.bind("online",(function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)})),o.bind("offline",(function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()})),r.updateStrategy(),r}return Yt(e,t),e.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},e.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},e.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isUsingTLS=function(){return this.usingTLS},e.prototype.startConnecting=function(){var t=this,e=function(n,r){n?t.runner=t.strategy.connect(0,e):"error"===r.action?(t.emit("error",{type:"HandshakeError",error:r.error}),t.timeline.error({handshakeError:r.error})):(t.abortConnecting(),t.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,e)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},e.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new I(t||0,(function(){e.disconnectInternally(),e.connect()}))},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new I(this.options.unavailableTimeout,(function(){t.updateState("unavailable")}))},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new I(this.options.pongTimeout,(function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)}))},e.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new I(this.activityTimeout,(function(){t.sendActivityCheck()})))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(t){var e=this;return H({},t,{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",t)},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}})},e.prototype.buildHandshakeCallbacks=function(t){var e=this;return H({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var t=this,e=function(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}};return{tls_only:e((function(){t.usingTLS=!0,t.updateStrategy(),t.retryIn(0)})),refused:e((function(){t.disconnect()})),backoff:e((function(){t.retryIn(1e3)})),retry:e((function(){t.retryIn(0)}))}},e.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},e.prototype.updateState=function(t,e){var n=this.state;if(this.state=t,n!==t){var r=t;"connected"===r&&(r+=" with new socket ID "+e.socket_id),tt.debug("State changed",n+" -> "+r),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(ft),Zt=function(){function t(){this.channels={}}return t.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){if(0===t.indexOf("private-encrypted-")){if(e.config.nacl)return ee.createEncryptedChannel(t,e,e.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=h("encryptedChannelSupport");throw new g(n+". "+r)}if(0===t.indexOf("private-"))return ee.createPrivateChannel(t,e);if(0===t.indexOf("presence-"))return ee.createPresenceChannel(t,e);if(0===t.indexOf("#"))throw new m('Cannot create a channel with name "'+t+'".');return ee.createChannel(t,e)}(t,e)),this.channels[t]},t.prototype.all=function(){return function(t){var e=[];return V(t,(function(t){e.push(t)})),e}(this.channels)},t.prototype.find=function(t){return this.channels[t]},t.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},t.prototype.disconnect=function(){V(this.channels,(function(t){t.disconnect()}))},t}(),te=Zt,ee={createChannels:function(){return new te},createConnectionManager:function(t,e){return new Qt(t,e)},createChannel:function(t,e){return new Dt(t,e)},createPrivateChannel:function(t,e){return new qt(t,e)},createPresenceChannel:function(t,e){return new zt(t,e)},createEncryptedChannel:function(t,e,n){return new Xt(t,e,n)},createTimelineSender:function(t,e){return new It(t,e)},createHandshake:function(t,e){return new Nt(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new Ct(t,e,n)}},ne=function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(t){return ee.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}(),re=function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return t.prototype.isSupported=function(){return J(this.strategies,B.method("isSupported"))},t.prototype.connect=function(t,e){var n=this,r=this.strategies,o=0,i=this.timeout,s=null,a=function(c,u){u?e(null,u):(o+=1,n.loop&&(o%=r.length),o<r.length?(i&&(i*=2,n.timeoutLimit&&(i=Math.min(i,n.timeoutLimit))),s=n.tryStrategy(r[o],t,{timeout:i,failFast:n.failFast},a)):e(!0))};return s=this.tryStrategy(r[o],t,{timeout:i,failFast:this.failFast},a),{abort:function(){s.abort()},forceMinPriority:function(e){t=e,s&&s.forceMinPriority(e)}}},t.prototype.tryStrategy=function(t,e,n,r){var o=null,i=null;return n.timeout>0&&(o=new I(n.timeout,(function(){i.abort(),r(!0)}))),i=t.connect(e,(function(t,e){t&&o&&o.isRunning()&&!n.failFast||(o&&o.ensureAborted(),r(t,e))})),{abort:function(){o&&o.ensureAborted(),i.abort()},forceMinPriority:function(t){i.forceMinPriority(t)}}},t}(),oe=function(){function t(t){this.strategies=t}return t.prototype.isSupported=function(){return J(this.strategies,B.method("isSupported"))},t.prototype.connect=function(t,e){return function(t,e,n){var r=z(t,(function(t,r,o,i){return t.connect(e,n(r,i))}));return{abort:function(){$(r,ie)},forceMinPriority:function(t){$(r,(function(e){e.forceMinPriority(t)}))}}}(this.strategies,t,(function(t,n){return function(r,o){n[t].error=r,r?function(t){return function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}(t,(function(t){return Boolean(t.error)}))}(n)&&e(!0):($(n,(function(t){t.forceMinPriority(o.transport.priority)})),e(null,o))}}))},t}();function ie(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var se=function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.usingTLS,r=function(t){var e=Ae.getLocalStorage();if(e)try{var n=e[ce(t)];if(n)return JSON.parse(n)}catch(e){ue(t)}return null}(n),o=[this.strategy];if(r&&r.timestamp+this.ttl>=B.now()){var i=this.transports[r.transport];i&&(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),o.push(new re([i],{timeout:2*r.latency+1e3,failFast:!0})))}var s=B.now(),a=o.pop().connect(t,(function r(i,c){i?(ue(n),o.length>0?(s=B.now(),a=o.pop().connect(t,r)):e(i)):(function(t,e,n){var r=Ae.getLocalStorage();if(r)try{r[ce(t)]=Q({timestamp:B.now(),transport:e,latency:n})}catch(t){}}(n,c.transport.name,B.now()-s),e(null,c))}));return{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}},t}(),ae=se;function ce(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function ue(t){var e=Ae.getLocalStorage();if(e)try{delete e[ce(t)]}catch(t){}}var le=function(){function t(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n,r=this.strategy,o=new I(this.options.delay,(function(){n=r.connect(t,e)}));return{abort:function(){o.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},t}(),he=function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},t}(),fe=function(){function t(t){this.strategy=t}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.strategy.connect(t,(function(t,r){r&&n.abort(),e(t,r)}));return n},t}();function de(t){return function(){return t.isSupported()}}var pe,me=function(t,e,n){var r={};function o(e,o,i,s,a){var c=n(t,e,o,i,s,a);return r[e]=c,c}var i,s=Object.assign({},e,{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}),a=Object.assign({},s,{useTLS:!0}),c=Object.assign({},e,{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}),u={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new ne({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),h=new ne({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),f=o("ws","ws",3,s,l),d=o("wss","ws",3,a,l),p=o("sockjs","sockjs",1,c),m=o("xhr_streaming","xhr_streaming",1,c,h),v=o("xdr_streaming","xdr_streaming",1,c,h),y=o("xhr_polling","xhr_polling",1,c),b=o("xdr_polling","xdr_polling",1,c),g=new re([f],u),w=new re([d],u),E=new re([p],u),S=new re([new he(de(m),m,v)],u),O=new re([new he(de(y),y,b)],u),k=new re([new he(de(S),new oe([S,new le(O,{delay:4e3})]),O)],u),T=new he(de(k),k,E);return i=e.useTLS?new oe([g,new le(T,{delay:2e3})]):new oe([g,new le(w,{delay:2e3}),new le(T,{delay:5e3})]),new ae(new fe(new he(de(f),i,T)),r,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},ve={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new v),t.close()},e.onerror=function(e){t.emit("error",e),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}},ye=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(t){function e(e,n,r){var o=t.call(this)||this;return o.hooks=e,o.method=n,o.url=r,o}return ye(e,t),e.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},Ae.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},e.prototype.close=function(){this.unloader&&(Ae.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},e.prototype.isBufferTooLong=function(t){return this.position===t.length&&t.length>262144},e}(ft);!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(pe||(pe={}));var ge=pe,we=1;function Ee(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+we++}function Se(t){return Ae.randomInt(t)}var Oe,ke=function(){function t(t,e){this.hooks=t,this.session=Se(1e3)+"/"+function(t){for(var e=[],n=0;n<t;n++)e.push(Se(32).toString(32));return e.join("")}(8),this.location=function(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(e),this.readyState=ge.CONNECTING,this.openStream()}return t.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(t,e){this.onClose(t,e,!0)},t.prototype.sendRaw=function(t){if(this.readyState!==ge.OPEN)return!1;try{return Ae.createSocketRequest("POST",Ee((e=this.location,n=this.session,e.base+"/"+n+"/xhr_send"))).start(t),!0}catch(t){return!1}var e,n},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=ge.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},t.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===ge.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var n=0;n<e.length;n++)this.onEvent(e[n]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},t.prototype.onOpen=function(t){var e,n,r;this.readyState===ge.CONNECTING?(t&&t.hostname&&(this.location.base=(e=this.location.base,n=t.hostname,(r=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e))[1]+n+r[3])),this.readyState=ge.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(t){this.readyState===ge.OPEN&&this.onmessage&&this.onmessage({data:t})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(t){this.onerror&&this.onerror(t)},t.prototype.openStream=function(){var t=this;this.stream=Ae.createSocketRequest("POST",Ee(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(e){t.onChunk(e)})),this.stream.bind("finished",(function(e){t.hooks.onFinished(t,e)})),this.stream.bind("buffer_too_long",(function(){t.reconnect()}));try{this.stream.start()}catch(e){B.defer((function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)}))}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}(),Te={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},xe={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},Le={getRequest:function(t){var e=new(Ae.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},Pe={createStreamingSocket:function(t){return this.createSocket(Te,t)},createPollingSocket:function(t){return this.createSocket(xe,t)},createSocket:function(t,e){return new ke(t,e)},createXHR:function(t,e){return this.createRequest(Le,t,e)},createRequest:function(t,e,n){return new be(t,e,n)},createXDR:function(t,e){return this.createRequest(ve,t,e)}},Ae={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:i,DependenciesReceivers:c,getDefaultStrategy:me,Transports:Lt,transportConnectionInitializer:function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.useTLS?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),u.load(t.hooks.file,{useTLS:t.options.useTLS},(function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))}))):t.onClose()},HTTPFactory:Pe,TimelineTransport:ot,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():u.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:O,jsonp:et}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout((function(){e.onDocumentBody(t)}),0)},createJSONPRequest:function(t,e){return new rt(t,e)},createScriptRequest:function(t){return new nt(t)},getLocalStorage:function(){try{return window.localStorage}catch(t){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return At},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)},randomInt:function(t){return Math.floor((window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)*t)}};!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(Oe||(Oe={}));var Ce=Oe,_e=function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(H({},e,{timestamp:B.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(t){this.log(Ce.ERROR,t)},t.prototype.info=function(t){this.log(Ce.INFO,t)},t.prototype.debug=function(t){this.log(Ce.DEBUG,t)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(t,e){var n=this,r=H({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(r,(function(t,r){t||n.sent++,e&&e(t,r)})),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}(),je=function(){function t(t,e,n,r){this.name=t,this.priority=e,this.transport=n,this.options=r||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},t.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return Re(new E,e);if(this.priority<t)return Re(new y,e);var r=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),i=null,s=function(){o.unbind("initialized",s),o.connect()},a=function(){i=ee.createHandshake(o,(function(t){r=!0,l(),e(null,t)}))},c=function(t){l(),e(t)},u=function(){var t;l(),t=Q(o),e(new b(t))},l=function(){o.unbind("initialized",s),o.unbind("open",a),o.unbind("error",c),o.unbind("closed",u)};return o.bind("initialized",s),o.bind("open",a),o.bind("error",c),o.bind("closed",u),o.initialize(),{abort:function(){r||(l(),i?i.close():o.close())},forceMinPriority:function(t){r||n.priority<t&&(i?i.close():o.close())}}},t}();function Re(t,e){return B.defer((function(){e(t)})),{abort:function(){},forceMinPriority:function(){}}}var Me=Ae.Transports,Ne=function(t,e,n,r,o,i){var s,a=Me[n];if(!a)throw new w(n);return t.enabledTransports&&-1===U(t.enabledTransports,e)||t.disabledTransports&&-1!==U(t.disabledTransports,e)?s=Ie:(o=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},o),s=new je(e,r,i?i.getAssistant(a):a,o)),s},Ie={isSupported:function(){return!1},connect:function(t,e){var n=B.defer((function(){e(new E)}));return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},Fe=function(t){if(void 0===Ae.getAuthorizers()[t.transport])throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var o=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var r in e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);if(null!=e.paramsProvider){var o=e.paramsProvider();for(var r in o)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(o[r])}return n}(e,t);Ae.getAuthorizers()[t.transport](Ae,o,t,r.UserAuthentication,n)}},De=function(t){if(void 0===Ae.getAuthorizers()[t.transport])throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var o=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var r in n+="&channel_name="+encodeURIComponent(t.channelName),e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);if(null!=e.paramsProvider){var o=e.paramsProvider();for(var r in o)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(o[r])}return n}(e,t);Ae.getAuthorizers()[t.transport](Ae,o,t,r.ChannelAuthorization,n)}},Be=function(t,e,n){var r={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return function(e,o){var i=t.channel(e.channelName);n(i,r).authorize(e.socketId,o)}},He=function(){return He=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},He.apply(this,arguments)};function qe(t){return t.httpHost?t.httpHost:t.cluster?"sockjs-"+t.cluster+".pusher.com":s.httpHost}function Ue(t){return t.wsHost?t.wsHost:t.cluster?Ve(t.cluster):Ve(s.cluster)}function Ve(t){return"ws-"+t+".pusher.com"}function We(t){return"https:"===Ae.getProtocol()||!1!==t.forceTLS}function $e(t){return"enableStats"in t?t.enableStats:"disableStats"in t&&!t.disableStats}function ze(t){var e=He(He({},s.userAuthentication),t.userAuthentication);return"customHandler"in e&&null!=e.customHandler?e.customHandler:Fe(e)}function Ke(t,e){var n=function(t,e){var n;return"channelAuthorization"in t?n=He(He({},s.channelAuthorization),t.channelAuthorization):(n={transport:t.authTransport||s.authTransport,endpoint:t.authEndpoint||s.authEndpoint},"auth"in t&&("params"in t.auth&&(n.params=t.auth.params),"headers"in t.auth&&(n.headers=t.auth.headers)),"authorizer"in t&&(n.customHandler=Be(e,n,t.authorizer))),n}(t,e);return"customHandler"in n&&null!=n.customHandler?n.customHandler:De(n)}var Ge=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=function(t){function e(e){var n=t.call(this,(function(t,e){tt.debug("No callbacks on watchlist events for "+t)}))||this;return n.pusher=e,n.bindWatchlistInternalEvent(),n}return Ge(e,t),e.prototype.handleEvent=function(t){var e=this;t.data.events.forEach((function(t){e.emit(t.name,t)}))},e.prototype.bindWatchlistInternalEvent=function(){var t=this;this.pusher.connection.bind("message",(function(e){"pusher_internal:watchlist_events"===e.event&&t.handleEvent(e)}))},e}(ft),Xe=function(){var t,e;return{promise:new Promise((function(n,r){t=n,e=r})),resolve:t,reject:e}},Ye=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(t){function e(e){var n=t.call(this,(function(t,e){tt.debug("No callbacks on user for "+t)}))||this;return n.signin_requested=!1,n.user_data=null,n.serverToUserChannel=null,n.signinDonePromise=null,n._signinDoneResolve=null,n._onAuthorize=function(t,e){if(t)return tt.warn("Error during signin: "+t),void n._cleanup();n.pusher.send_event("pusher:signin",{auth:e.auth,user_data:e.user_data})},n.pusher=e,n.pusher.connection.bind("state_change",(function(t){var e=t.previous,r=t.current;"connected"!==e&&"connected"===r&&n._signin(),"connected"===e&&"connected"!==r&&(n._cleanup(),n._newSigninPromiseIfNeeded())})),n.watchlist=new Je(e),n.pusher.connection.bind("message",(function(t){"pusher:signin_success"===t.event&&n._onSigninSuccess(t.data),n.serverToUserChannel&&n.serverToUserChannel.name===t.channel&&n.serverToUserChannel.handleEvent(t)})),n}return Ye(e,t),e.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},e.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},e.prototype._onSigninSuccess=function(t){try{this.user_data=JSON.parse(t.user_data)}catch(e){return tt.error("Failed parsing user data after signin: "+t.user_data),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return tt.error("user_data doesn't contain an id. user_data: "+this.user_data),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()},e.prototype._subscribeChannels=function(){var t,e=this;this.serverToUserChannel=new Dt("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global((function(t,n){0!==t.indexOf("pusher_internal:")&&0!==t.indexOf("pusher:")&&e.emit(t,n)})),(t=this.serverToUserChannel).subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==e.pusher.connection.state||t.subscribe()},e.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},e.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&(!this.signinDonePromise||this.signinDonePromise.done)){var t=Xe(),e=t.promise,n=t.resolve;t.reject,e.done=!1;var r=function(){e.done=!0};e.then(r).catch(r),this.signinDonePromise=e,this._signinDoneResolve=n}},e}(ft),Ze=function(){function t(e,n){var r,o,i,a=this;if(function(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."}(e),!(n=n||{}).cluster&&!n.wsHost&&!n.httpHost){var c=h("javascriptQuickStart");tt.warn("You should always specify a cluster when connecting. "+c)}"disableStats"in n&&tt.warn("The disableStats option is deprecated in favor of enableStats"),this.key=e,this.config=(o=this,i={activityTimeout:(r=n).activityTimeout||s.activityTimeout,cluster:r.cluster||s.cluster,httpPath:r.httpPath||s.httpPath,httpPort:r.httpPort||s.httpPort,httpsPort:r.httpsPort||s.httpsPort,pongTimeout:r.pongTimeout||s.pongTimeout,statsHost:r.statsHost||s.stats_host,unavailableTimeout:r.unavailableTimeout||s.unavailableTimeout,wsPath:r.wsPath||s.wsPath,wsPort:r.wsPort||s.wsPort,wssPort:r.wssPort||s.wssPort,enableStats:$e(r),httpHost:qe(r),useTLS:We(r),wsHost:Ue(r),userAuthenticator:ze(r),channelAuthorizer:Ke(r,o)},"disabledTransports"in r&&(i.disabledTransports=r.disabledTransports),"enabledTransports"in r&&(i.enabledTransports=r.enabledTransports),"ignoreNullOrigin"in r&&(i.ignoreNullOrigin=r.ignoreNullOrigin),"timelineParams"in r&&(i.timelineParams=r.timelineParams),"nacl"in r&&(i.nacl=r.nacl),i),this.channels=ee.createChannels(),this.global_emitter=new ft,this.sessionID=Ae.randomInt(1e9),this.timeline=new _e(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ce.INFO,version:s.VERSION}),this.config.enableStats&&(this.timelineSender=ee.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Ae.TimelineTransport.name})),this.connection=ee.createConnectionManager(this.key,{getStrategy:function(t){return Ae.getDefaultStrategy(a.config,t,Ne)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",(function(){a.subscribeAll(),a.timelineSender&&a.timelineSender.send(a.connection.isUsingTLS())})),this.connection.bind("message",(function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=a.channel(t.channel);n&&n.handleEvent(t)}e||a.global_emitter.emit(t.event,t.data)})),this.connection.bind("connecting",(function(){a.channels.disconnect()})),this.connection.bind("disconnected",(function(){a.channels.disconnect()})),this.connection.bind("error",(function(t){tt.warn(t)})),t.instances.push(this),this.timeline.info({instances:t.instances.length}),this.user=new Qe(this),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.getClientFeatures=function(){return W(G({ws:Ae.Transports.ws},(function(t){return t.isSupported({})})))},t.prototype.channel=function(t){return this.channels.find(t)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),e=this.timelineSender;this.timelineSenderTimer=new F(6e4,(function(){e.send(t)}))}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(t,e,n){return this.global_emitter.bind(t,e,n),this},t.prototype.unbind=function(t,e,n){return this.global_emitter.unbind(t,e,n),this},t.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},t.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},t.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},t.prototype.subscribe=function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e},t.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&e.subscribed&&e.unsubscribe()},t.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},t.prototype.shouldUseTLS=function(){return this.config.useTLS},t.prototype.signin=function(){this.user.signin()},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=Ae,t.ScriptReceivers=Ae.ScriptReceivers,t.DependenciesReceivers=Ae.DependenciesReceivers,t.auth_callbacks=Ae.auth_callbacks,t}(),tn=e.default=Ze;Ae.setup(Ze)}])},t.exports=e()},9315:(t,e,n)=>{"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=c(n(2834)),a=c(n(340));function c(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e}return i(t,[{key:"range",value:function(t){var e=this.el;if(null==t)return[e.selectionStart||0,e.selectionEnd||0];this.focus();var n=o(t,2);return e.selectionStart=n[0],e.selectionEnd=n[1],this}},{key:"insert",value:function(t){var e=!0;this.el.contentEditable=!0,this.focus();try{document.execCommand("insertText",!1,t)}catch(t){e=!1}if(this.el.contentEditable=!1,e)return this;try{document.execCommand("ms-beginUndoUnit")}catch(t){}var n=this.selection(),r=n.before,o=n.after;this.el.value=r+t+o;try{document.execCommand("ms-endUndoUnit")}catch(t){}var i=document.createEvent("Event");return i.initEvent("input",!0,!0),this.el.dispatchEvent(i),this}},{key:"focus",value:function(){return document.activeElement!==this.el&&this.el.focus(),this}},{key:"selection",value:function(){var t=this.range(),e=o(t,2),n=e[0],r=e[1],i=this.el.value.replace("\r\n","\n");return{before:i.slice(0,n),content:i.slice(n,r),after:i.slice(r)}}},{key:"getFormat",value:function(t){if("object"==(void 0===t?"undefined":r(t)))return m(t);if(!a.default.hasOwnProperty(t))throw new Error("Invalid format "+t);return m(a.default[t])}},{key:"toggle",value:function(t){if(this.hasFormat(t))return this.unformat(t);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.format.apply(this,[t].concat(n))}},{key:"format",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=this.getFormat(t),s=i.prefix,a=i.suffix,c=i.multiline,u=this.selection(),l=u.before,h=u.content,d=u.after,p=c?h.split("\n"):[h],m=this.range(),v=o(m,2),b=v[0],g=v[1],w=(p=p.map((function(t,e){var r=y.apply(void 0,[s.value,t,e+1].concat(n)),o=y.apply(void 0,[a.value,t,e+1].concat(n));return c&&h.length?g+=r.length+o.length:(b+=r.length,g+=r.length),r+t+o}))).join("\n");if(i.block){var E=f(l,/\n+$/),S=f(d,/^\n+/);if(l)for(;E<2;)w="\n"+w,b++,g++,E++;if(d)for(;S<2;)w+="\n",S++}return this.insert(w),this.range([b,g]),this}},{key:"unformat",value:function(t){if(!this.hasFormat(t))return this;var e=this.getFormat(t),n=e.prefix,r=e.suffix,i=e.multiline,s=this.selection(),a=s.before,c=s.content,u=s.after,f=i?c.split("\n"):[c],m=this.range(),v=o(m,2),y=v[0],b=v[1];i&&1!=f.length||!h(a,n)||!l(u,r)||(y-=p(a,n),b+=d(u,r),this.range([y,b]),f=[this.selection().content]);var g=(f=f.map((function(t){var e=d(t,n),o=p(t,r);return t.slice(e,t.length-o)}))).join("\n");return this.insert(g),this.range([y,y+g.length]),this}},{key:"hasFormat",value:function(t){var e=this.getFormat(t),n=e.prefix,r=e.suffix,o=e.multiline,i=this.selection(),s=i.before,a=i.content,c=i.after,u=a.split("\n");return o&&1!=u.length?u.filter((function(t){return l(t,n)&&h(t,r)})).length===u.length:h(s,n)&&l(c,r)||l(a,n)&&h(a,r)}}]),t}();function l(t,e){var n=new RegExp("^"+e.pattern).test(t);if(e.antipattern){var r=new RegExp("^"+e.antipattern);n=n&&!r.test(t)}return n}function h(t,e){var n=new RegExp(e.pattern+"$").test(t);if(e.antipattern){var r=new RegExp(e.antipattern+"$");n=n&&!r.test(t)}return n}function f(t,e){var n=t.match(e);return n?n[0].length:0}function d(t,e){return f(t,new RegExp("^"+e.pattern))}function p(t,e){return f(t,new RegExp(e.pattern+"$"))}function m(t){var e=Object.assign({},t);return e.prefix=v(t.prefix),e.suffix=v(t.suffix),e}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"object"==(void 0===t?"undefined":r(t))?t:{value:t,pattern:(0,s.default)(t)}}function y(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"==typeof t?t.apply(void 0,n):t}e.Ay=u,a.default},340:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={bold:{prefix:"**",suffix:"**"},italic:{prefix:"_",suffix:"_"},strikethrough:{prefix:"~~",suffix:"~~"},link:{prefix:{value:"[",pattern:"\\[",antipattern:"\\!\\["},suffix:{value:function(t,e,n){return"]("+n+")"},pattern:"\\]\\([^()]*?\\)"}},image:{prefix:"![",suffix:{value:function(t,e,n){return"]("+n+")"},pattern:"\\]\\([^()]*?\\)"}},header1:{prefix:{value:"# ",pattern:"# ",antipattern:"[#]{2,} "}},header2:{prefix:{value:"## ",pattern:"## ",antipattern:"[#]{3,} "}},header3:{prefix:{value:"### ",pattern:"### ",antipattern:"[#]{4,} "}},header4:{prefix:{value:"#### ",pattern:"#### ",antipattern:"[#]{5,} "}},header5:{prefix:{value:"##### ",pattern:"##### ",antipattern:"[#]{6,} "}},header6:{prefix:{value:"###### ",pattern:"###### ",antipattern:"[#]{7,} "}},code:{block:!0,prefix:"```\n",suffix:"\n```"},orderedList:{block:!0,multiline:!0,prefix:{value:function(t,e){return e+". "},pattern:"[0-9]+\\. "}},unorderedList:{block:!0,multiline:!0,prefix:"- "},taskList:{block:!0,multiline:!0,prefix:{value:"- [ ] ",pattern:"- \\[[x ]{1}\\] "}},blockquote:{block:!0,multiline:!0,prefix:"> "}}},9361:(t,e,n)=>{var r={"./action-menu-controller.ts":2233,"./alert-controller.ts":2209,"./comment-controller.ts":9792,"./comment-replies-controller.ts":7143,"./composer-controller.ts":895,"./copy-link-controller.ts":8715,"./load-backwards-controller.ts":3316,"./login-controller.ts":6636,"./mentions-controller.ts":5620,"./modal-controller.ts":4608,"./notifications-popup-controller.ts":4254,"./page-controller.ts":160,"./post-controller.ts":3227,"./post-feed-controller.ts":8960,"./post-page-controller.ts":8629,"./quotable-controller.ts":222,"./reveal-controller.ts":4582,"./scrollspy-controller.ts":7452,"./similar-posts-controller.ts":3207,"./text-editor-controller.ts":2345,"./theme-controller.ts":1068,"./truncated-controller.ts":9849,"./turbo-frame-controller.ts":9631,"./uploads-controller.ts":8821,"./watch-scroll-controller.ts":7784,"./watch-sticky-controller.ts":2073};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=9361},5361:(t,e,n)=>{"use strict";n.d(e,{BN:()=>u,Ej:()=>l,UU:()=>a,cY:()=>c,rD:()=>i});var r=n(7193);function o(t,e,n){let{reference:o,floating:i}=t;const s=(0,r.TV)(e),a=(0,r.Dz)(e),c=(0,r.sq)(a),u=(0,r.C0)(e),l="y"===s,h=o.x+o.width/2-i.width/2,f=o.y+o.height/2-i.height/2,d=o[c]/2-i[c]/2;let p;switch(u){case"top":p={x:h,y:o.y-i.height};break;case"bottom":p={x:h,y:o.y+o.height};break;case"right":p={x:o.x+o.width,y:f};break;case"left":p={x:o.x-i.width,y:f};break;default:p={x:o.x,y:o.y}}switch((0,r.Sg)(e)){case"start":p[a]-=d*(n&&l?-1:1);break;case"end":p[a]+=d*(n&&l?-1:1)}return p}const i=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,c=s.filter(Boolean),u=await(null==a.isRTL?void 0:a.isRTL(e));let l=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:f}=o(l,r,u),d=r,p={},m=0;for(let n=0;n<c.length;n++){const{name:s,fn:v}=c[n],{x:y,y:b,data:g,reset:w}=await v({x:h,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:p,rects:l,platform:a,elements:{reference:t,floating:e}});h=null!=y?y:h,f=null!=b?b:f,p={...p,[s]:{...p[s],...g}},w&&m<=50&&(m++,"object"==typeof w&&(w.placement&&(d=w.placement),w.rects&&(l=!0===w.rects?await a.getElementRects({reference:t,floating:e,strategy:i}):w.rects),({x:h,y:f}=o(l,d,u))),n=-1)}return{x:h,y:f,placement:d,strategy:i,middlewareData:p}};async function s(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:s,rects:a,elements:c,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=(0,r._3)(e,t),m=(0,r.nI)(p),v=c[d?"floating"===f?"reference":"floating":f],y=(0,r.B1)(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(v)))||n?v:v.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(c.floating)),boundary:l,rootBoundary:h,strategy:u})),b="floating"===f?{...a.floating,x:o,y:i}:a.reference,g=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c.floating)),w=await(null==s.isElement?void 0:s.isElement(g))&&await(null==s.getScale?void 0:s.getScale(g))||{x:1,y:1},E=(0,r.B1)(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:g,strategy:u}):b);return{top:(y.top-E.top+m.top)/w.y,bottom:(E.bottom-y.bottom+m.bottom)/w.y,left:(y.left-E.left+m.left)/w.x,right:(E.right-y.right+m.right)/w.x}}const a=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:i,middlewareData:a,rects:c,initialPlacement:u,platform:l,elements:h}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...b}=(0,r._3)(t,e);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const g=(0,r.C0)(i),w=(0,r.C0)(u)===u,E=await(null==l.isRTL?void 0:l.isRTL(h.floating)),S=p||(w||!y?[(0,r.bV)(u)]:(0,r.WJ)(u));p||"none"===v||S.push(...(0,r.lP)(u,y,v,E));const O=[u,...S],k=await s(e,b),T=[];let x=(null==(o=a.flip)?void 0:o.overflows)||[];if(f&&T.push(k[g]),d){const t=(0,r.w7)(i,c,E);T.push(k[t[0]],k[t[1]])}if(x=[...x,{placement:i,overflows:T}],!T.every((t=>t<=0))){var L,P;const t=((null==(L=a.flip)?void 0:L.index)||0)+1,e=O[t];if(e)return{data:{index:t,overflows:x},reset:{placement:e}};let n=null==(P=x.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:P.placement;if(!n)switch(m){case"bestFit":{var A;const t=null==(A=x.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:A[0];t&&(n=t);break}case"initialPlacement":n=u}if(i!==n)return{reset:{placement:n}}}return{}}}};const c=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:i,y:s,placement:a,middlewareData:c}=e,u=await async function(t,e){const{placement:n,platform:o,elements:i}=t,s=await(null==o.isRTL?void 0:o.isRTL(i.floating)),a=(0,r.C0)(n),c=(0,r.Sg)(n),u="y"===(0,r.TV)(n),l=["left","top"].includes(a)?-1:1,h=s&&u?-1:1,f=(0,r._3)(e,t);let{mainAxis:d,crossAxis:p,alignmentAxis:m}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return c&&"number"==typeof m&&(p="end"===c?-1*m:m),u?{x:p*h,y:d*l}:{x:d*l,y:p*h}}(e,t);return a===(null==(n=c.offset)?void 0:n.placement)&&null!=(o=c.arrow)&&o.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:a}}}}},u=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...l}=(0,r._3)(t,e),h={x:n,y:o},f=await s(e,l),d=(0,r.TV)((0,r.C0)(i)),p=(0,r.PG)(d);let m=h[p],v=h[d];if(a){const t="y"===p?"bottom":"right",e=m+f["y"===p?"top":"left"],n=m-f[t];m=(0,r.qE)(e,m,n)}if(c){const t="y"===d?"bottom":"right",e=v+f["y"===d?"top":"left"],n=v-f[t];v=(0,r.qE)(e,v,n)}const y=u.fn({...e,[p]:m,[d]:v});return{...y,data:{x:y.x-n,y:y.y-o}}}}},l=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:i,elements:a}=e,{apply:c=(()=>{}),...u}=(0,r._3)(t,e),l=await s(e,u),h=(0,r.C0)(n),f=(0,r.Sg)(n),d="y"===(0,r.TV)(n),{width:p,height:m}=o.floating;let v,y;"top"===h||"bottom"===h?(v=h,y=f===(await(null==i.isRTL?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,v="end"===f?"top":"bottom");const b=m-l[v],g=p-l[y],w=!e.middlewareData.shift;let E=b,S=g;if(d){const t=p-l.left-l.right;S=f||w?(0,r.jk)(g,t):t}else{const t=m-l.top-l.bottom;E=f||w?(0,r.jk)(b,t):t}if(w&&!f){const t=(0,r.T9)(l.left,0),e=(0,r.T9)(l.right,0),n=(0,r.T9)(l.top,0),o=(0,r.T9)(l.bottom,0);d?S=p-2*(0!==t||0!==e?t+e:(0,r.T9)(l.left,l.right)):E=m-2*(0!==n||0!==o?n+o:(0,r.T9)(l.top,l.bottom))}await c({...e,availableWidth:S,availableHeight:E});const O=await i.getDimensions(a.floating);return p!==O.width||m!==O.height?{reset:{rects:!0}}:{}}}}},3901:(t,e,n)=>{"use strict";n.d(e,{ll:()=>F,rD:()=>q,UU:()=>B,BN:()=>D,Ej:()=>H});var r=n(7193),o=n(5361);function i(t){return c(t)?(t.nodeName||"").toLowerCase():"#document"}function s(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function a(t){var e;return null==(e=(c(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function c(t){return t instanceof Node||t instanceof s(t).Node}function u(t){return t instanceof Element||t instanceof s(t).Element}function l(t){return t instanceof HTMLElement||t instanceof s(t).HTMLElement}function h(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof s(t).ShadowRoot)}function f(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=y(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function d(t){return["table","td","th"].includes(i(t))}function p(t){const e=m(),n=y(t);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function m(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function v(t){return["html","body","#document"].includes(i(t))}function y(t){return s(t).getComputedStyle(t)}function b(t){return u(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function g(t){if("html"===i(t))return t;const e=t.assignedSlot||t.parentNode||h(t)&&t.host||a(t);return h(e)?e.host:e}function w(t){const e=g(t);return v(e)?t.ownerDocument?t.ownerDocument.body:t.body:l(e)&&f(e)?e:w(e)}function E(t,e,n){var r;void 0===e&&(e=[]),void 0===n&&(n=!0);const o=w(t),i=o===(null==(r=t.ownerDocument)?void 0:r.body),a=s(o);return i?e.concat(a,a.visualViewport||[],f(o)?o:[],a.frameElement&&n?E(a.frameElement):[]):e.concat(o,E(o,[],n))}function S(t){const e=y(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=l(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:o,c=(0,r.LI)(n)!==s||(0,r.LI)(o)!==a;return c&&(n=s,o=a),{width:n,height:o,$:c}}function O(t){return u(t)?t:t.contextElement}function k(t){const e=O(t);if(!l(e))return(0,r.Jx)(1);const n=e.getBoundingClientRect(),{width:o,height:i,$:s}=S(e);let a=(s?(0,r.LI)(n.width):n.width)/o,c=(s?(0,r.LI)(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),c&&Number.isFinite(c)||(c=1),{x:a,y:c}}const T=(0,r.Jx)(0);function x(t){const e=s(t);return m()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:T}function L(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),a=O(t);let c=(0,r.Jx)(1);e&&(o?u(o)&&(c=k(o)):c=k(t));const l=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==s(t))&&e}(a,n,o)?x(a):(0,r.Jx)(0);let h=(i.left+l.x)/c.x,f=(i.top+l.y)/c.y,d=i.width/c.x,p=i.height/c.y;if(a){const t=s(a),e=o&&u(o)?s(o):o;let n=t,r=n.frameElement;for(;r&&o&&e!==n;){const t=k(r),e=r.getBoundingClientRect(),o=y(r),i=e.left+(r.clientLeft+parseFloat(o.paddingLeft))*t.x,a=e.top+(r.clientTop+parseFloat(o.paddingTop))*t.y;h*=t.x,f*=t.y,d*=t.x,p*=t.y,h+=i,f+=a,n=s(r),r=n.frameElement}}return(0,r.B1)({width:d,height:p,x:h,y:f})}const P=[":popover-open",":modal"];function A(t){return P.some((e=>{try{return t.matches(e)}catch(t){return!1}}))}function C(t){return L(a(t)).left+b(t).scrollLeft}function _(t,e,n){let o;if("viewport"===e)o=function(t,e){const n=s(t),r=a(t),o=n.visualViewport;let i=r.clientWidth,c=r.clientHeight,u=0,l=0;if(o){i=o.width,c=o.height;const t=m();(!t||t&&"fixed"===e)&&(u=o.offsetLeft,l=o.offsetTop)}return{width:i,height:c,x:u,y:l}}(t,n);else if("document"===e)o=function(t){const e=a(t),n=b(t),o=t.ownerDocument.body,i=(0,r.T9)(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),s=(0,r.T9)(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let c=-n.scrollLeft+C(t);const u=-n.scrollTop;return"rtl"===y(o).direction&&(c+=(0,r.T9)(e.clientWidth,o.clientWidth)-i),{width:i,height:s,x:c,y:u}}(a(t));else if(u(e))o=function(t,e){const n=L(t,!0,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft,s=l(t)?k(t):(0,r.Jx)(1);return{width:t.clientWidth*s.x,height:t.clientHeight*s.y,x:i*s.x,y:o*s.y}}(e,n);else{const n=x(t);o={...e,x:e.x-n.x,y:e.y-n.y}}return(0,r.B1)(o)}function j(t,e){const n=g(t);return!(n===e||!u(n)||v(n))&&("fixed"===y(n).position||j(n,e))}function R(t,e,n){const o=l(e),s=a(e),c="fixed"===n,u=L(t,!0,c,e);let h={scrollLeft:0,scrollTop:0};const d=(0,r.Jx)(0);if(o||!o&&!c)if(("body"!==i(e)||f(s))&&(h=b(e)),o){const t=L(e,!0,c,e);d.x=t.x+e.clientLeft,d.y=t.y+e.clientTop}else s&&(d.x=C(s));return{x:u.left+h.scrollLeft-d.x,y:u.top+h.scrollTop-d.y,width:u.width,height:u.height}}function M(t,e){return l(t)&&"fixed"!==y(t).position?e?e(t):t.offsetParent:null}function N(t,e){const n=s(t);if(!l(t)||A(t))return n;let r=M(t,e);for(;r&&d(r)&&"static"===y(r).position;)r=M(r,e);return r&&("html"===i(r)||"body"===i(r)&&"static"===y(r).position&&!p(r))?n:r||function(t){let e=g(t);for(;l(e)&&!v(e);){if(p(e))return e;e=g(e)}return null}(t)||n}const I={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:o,strategy:s}=t;const c="fixed"===s,u=a(o),h=!!e&&A(e.floating);if(o===u||h&&c)return n;let d={scrollLeft:0,scrollTop:0},p=(0,r.Jx)(1);const m=(0,r.Jx)(0),v=l(o);if((v||!v&&!c)&&(("body"!==i(o)||f(u))&&(d=b(o)),l(o))){const t=L(o);p=k(o),m.x=t.x+o.clientLeft,m.y=t.y+o.clientTop}return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-d.scrollLeft*p.x+m.x,y:n.y*p.y-d.scrollTop*p.y+m.y}},getDocumentElement:a,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:s}=t;const a=[..."clippingAncestors"===n?function(t,e){const n=e.get(t);if(n)return n;let r=E(t,[],!1).filter((t=>u(t)&&"body"!==i(t))),o=null;const s="fixed"===y(t).position;let a=s?g(t):t;for(;u(a)&&!v(a);){const e=y(a),n=p(a);n||"fixed"!==e.position||(o=null),(s?!n&&!o:!n&&"static"===e.position&&o&&["absolute","fixed"].includes(o.position)||f(a)&&!n&&j(t,a))?r=r.filter((t=>t!==a)):o=e,a=g(a)}return e.set(t,r),r}(e,this._c):[].concat(n),o],c=a[0],l=a.reduce(((t,n)=>{const o=_(e,n,s);return t.top=(0,r.T9)(o.top,t.top),t.right=(0,r.jk)(o.right,t.right),t.bottom=(0,r.jk)(o.bottom,t.bottom),t.left=(0,r.T9)(o.left,t.left),t}),_(e,c,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:N,getElementRects:async function(t){const e=this.getOffsetParent||N,n=this.getDimensions;return{reference:R(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=S(t);return{width:e,height:n}},getScale:k,isElement:u,isRTL:function(t){return"rtl"===y(t).direction}};function F(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:u="function"==typeof IntersectionObserver,animationFrame:l=!1}=o,h=O(t),f=i||s?[...h?E(h):[],...E(e)]:[];f.forEach((t=>{i&&t.addEventListener("scroll",n,{passive:!0}),s&&t.addEventListener("resize",n)}));const d=h&&u?function(t,e){let n,o=null;const i=a(t);function s(){var t;clearTimeout(n),null==(t=o)||t.disconnect(),o=null}return function a(c,u){void 0===c&&(c=!1),void 0===u&&(u=1),s();const{left:l,top:h,width:f,height:d}=t.getBoundingClientRect();if(c||e(),!f||!d)return;const p={rootMargin:-(0,r.RI)(h)+"px "+-(0,r.RI)(i.clientWidth-(l+f))+"px "+-(0,r.RI)(i.clientHeight-(h+d))+"px "+-(0,r.RI)(l)+"px",threshold:(0,r.T9)(0,(0,r.jk)(1,u))||1};let m=!0;function v(t){const e=t[0].intersectionRatio;if(e!==u){if(!m)return a();e?a(!1,e):n=setTimeout((()=>{a(!1,1e-7)}),100)}m=!1}try{o=new IntersectionObserver(v,{...p,root:i.ownerDocument})}catch(t){o=new IntersectionObserver(v,p)}o.observe(t)}(!0),s}(h,n):null;let p,m=-1,v=null;c&&(v=new ResizeObserver((t=>{let[r]=t;r&&r.target===h&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame((()=>{var t;null==(t=v)||t.observe(e)}))),n()})),h&&!l&&v.observe(h),v.observe(e));let y=l?L(t):null;return l&&function e(){const r=L(t);!y||r.x===y.x&&r.y===y.y&&r.width===y.width&&r.height===y.height||n();y=r,p=requestAnimationFrame(e)}(),n(),()=>{var t;f.forEach((t=>{i&&t.removeEventListener("scroll",n),s&&t.removeEventListener("resize",n)})),null==d||d(),null==(t=v)||t.disconnect(),v=null,l&&cancelAnimationFrame(p)}}const D=o.BN,B=o.UU,H=o.Ej,q=(t,e,n)=>{const r=new Map,i={platform:I,...n},s={...i.platform,_c:r};return(0,o.rD)(t,e,{...i,platform:s})}},7193:(t,e,n)=>{"use strict";n.d(e,{B1:()=>k,C0:()=>f,Dz:()=>y,Jx:()=>a,LI:()=>i,PG:()=>p,RI:()=>s,Sg:()=>d,T9:()=>o,TV:()=>v,WJ:()=>g,_3:()=>h,bV:()=>S,jk:()=>r,lP:()=>E,nI:()=>O,qE:()=>l,sq:()=>m,w7:()=>b});const r=Math.min,o=Math.max,i=Math.round,s=Math.floor,a=t=>({x:t,y:t}),c={left:"right",right:"left",bottom:"top",top:"bottom"},u={start:"end",end:"start"};function l(t,e,n){return o(t,r(e,n))}function h(t,e){return"function"==typeof t?t(e):t}function f(t){return t.split("-")[0]}function d(t){return t.split("-")[1]}function p(t){return"x"===t?"y":"x"}function m(t){return"y"===t?"height":"width"}function v(t){return["top","bottom"].includes(f(t))?"y":"x"}function y(t){return p(v(t))}function b(t,e,n){void 0===n&&(n=!1);const r=d(t),o=y(t),i=m(o);let s="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=S(s)),[s,S(s)]}function g(t){const e=S(t);return[w(t),e,w(e)]}function w(t){return t.replace(/start|end/g,(t=>u[t]))}function E(t,e,n,r){const o=d(t);let i=function(t,e,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?i:s;default:return[]}}(f(t),"start"===n,r);return o&&(i=i.map((t=>t+"-"+o)),e&&(i=i.concat(i.map(w)))),i}function S(t){return t.replace(/left|right|bottom|top/g,(t=>c[t]))}function O(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function k(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}},9734:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))};function o(t){let e=0,n=0,r=t;do{e+=r.offsetTop||0,n+=r.offsetLeft||0,r=r.offsetParent}while(r);return{top:e,left:n}}class i{constructor(t){this.element=t}getHorizontalScroll(){return this.element.scrollLeft}getVerticalScroll(){return this.element.scrollTop}getMaxHorizontalScroll(){return this.element.scrollWidth-this.element.clientWidth}getMaxVerticalScroll(){return this.element.scrollHeight-this.element.clientHeight}getHorizontalElementScrollOffset(t,e){return o(t).left-o(e).left}getVerticalElementScrollOffset(t,e){return o(t).top-o(e).top}scrollTo(t,e){this.element.scrollLeft=t,this.element.scrollTop=e}}class s{constructor(){this.element=window}getHorizontalScroll(){return window.scrollX||document.documentElement.scrollLeft}getVerticalScroll(){return window.scrollY||document.documentElement.scrollTop}getMaxHorizontalScroll(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)-window.innerWidth}getMaxVerticalScroll(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight}getHorizontalElementScrollOffset(t){return(window.scrollX||document.documentElement.scrollLeft)+t.getBoundingClientRect().left}getVerticalElementScrollOffset(t){return(window.scrollY||document.documentElement.scrollTop)+t.getBoundingClientRect().top}scrollTo(t,e){window.scrollTo(t,e)}}const a={elements:[],cancelMethods:[],add:(t,e)=>{a.elements.push(t),a.cancelMethods.push(e)},remove:(t,e)=>{const n=a.elements.indexOf(t);n>-1&&(e&&a.cancelMethods[n](),a.elements.splice(n,1),a.cancelMethods.splice(n,1))}},c="undefined"!=typeof window,u={cancelOnUserAction:!0,easing:t=>--t*t*t+1,elementToScroll:c?window:null,horizontalOffset:0,maxDuration:3e3,minDuration:250,speed:500,verticalOffset:0};const l=function(t,e={}){return r(this,void 0,void 0,(function*(){if(!c)return new Promise((t=>{t(!1)}));if(!window.Promise)throw"Browser doesn't support Promises, and animated-scroll-to depends on it, please provide a polyfill.";let n,r,o,l=Object.assign(Object.assign({},u),e);const h=l.elementToScroll===window,f=!!l.elementToScroll.nodeName;if(!h&&!f)throw"Element to scroll needs to be either window or DOM element.";const d=h?document.documentElement:l.elementToScroll;"smooth"===getComputedStyle(d).getPropertyValue("scroll-behavior")&&console.warn(`${d.tagName} has "scroll-behavior: smooth" which can mess up with animated-scroll-to's animations`);const p=h?new s:new i(l.elementToScroll);if(t instanceof Element){if(o=t,f&&(!l.elementToScroll.contains(o)||l.elementToScroll.isSameNode(o)))throw"options.elementToScroll has to be a parent of scrollToElement";n=p.getHorizontalElementScrollOffset(o,l.elementToScroll),r=p.getVerticalElementScrollOffset(o,l.elementToScroll)}else if("number"==typeof t)n=p.getHorizontalScroll(),r=t;else{if(!Array.isArray(t)||2!==t.length)throw"Wrong function signature. Check documentation.\nAvailable method signatures are:\n  animateScrollTo(y:number, options)\n  animateScrollTo([x:number | null, y:number | null], options)\n  animateScrollTo(scrollToElement:Element, options)";n=null===t[0]?p.getHorizontalScroll():t[0],r=null===t[1]?p.getVerticalScroll():t[1]}n+=l.horizontalOffset,r+=l.verticalOffset;const m=p.getMaxHorizontalScroll(),v=p.getHorizontalScroll();n>m&&(n=m);const y=n-v,b=p.getMaxVerticalScroll(),g=p.getVerticalScroll();r>b&&(r=b);const w=r-g,E=Math.abs(Math.round(y/1e3*l.speed)),S=Math.abs(Math.round(w/1e3*l.speed));let O=E>S?E:S;return O<l.minDuration?O=l.minDuration:O>l.maxDuration&&(O=l.maxDuration),new Promise(((t,e)=>{let o;0===y&&0===w&&t(!0),a.remove(p.element,!0);const i=()=>{h(),cancelAnimationFrame(o),t(!1)};a.add(p.element,i);const s=l.cancelOnUserAction?i:t=>t.preventDefault(),c=l.cancelOnUserAction?{passive:!0}:{passive:!1},u=["wheel","touchstart","keydown","mousedown"],h=()=>{u.forEach((t=>{p.element.removeEventListener(t,s,c)}))};u.forEach((t=>{p.element.addEventListener(t,s,c)}));const f=Date.now(),d=()=>{var e=Date.now()-f,i=e/O;const s=Math.round(v+y*l.easing(i)),c=Math.round(g+w*l.easing(i));e<O&&(s!==n||c!==r)?(p.scrollTo(s,c),o=requestAnimationFrame(d)):(p.scrollTo(n,r),cancelAnimationFrame(o),h(),a.remove(p.element,!1),t(!0))};o=requestAnimationFrame(d)}))}))}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var s=1/0;for(l=0;l<t.length;l++){for(var[n,o,i]=t[l],a=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(a=!1,i<s&&(s=i));if(a){t.splice(l--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[n,o,i]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={190:0,682:0,922:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[s,a,c]=n,u=0;if(s.some((e=>0!==t[e]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(c)var l=c(r)}for(e&&e(n);u<s.length;u++)i=s[u],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(l)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.O(void 0,[682,922],(()=>r(5805))),r.O(void 0,[682,922],(()=>r(4248)));var o=r.O(void 0,[682,922],(()=>r(127)));o=r.O(o)})();